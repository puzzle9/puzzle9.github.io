<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>puzzle9 blog</title>
  
  <subtitle>I exist because you need me.</subtitle>
  <link href="https://puzzle9.github.io/atom.xml" rel="self"/>
  
  <link href="https://puzzle9.github.io/"/>
  <updated>2025-06-25T08:29:38.771Z</updated>
  <id>https://puzzle9.github.io/</id>
  
  <author>
    <name>puzzle9</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç§Ÿæˆ¿å•Š</title>
    <link href="https://puzzle9.github.io/posts/abbe4be6/"/>
    <id>https://puzzle9.github.io/posts/abbe4be6/</id>
    <published>2025-06-25T08:16:52.000Z</published>
    <updated>2025-06-25T08:29:38.771Z</updated>
    
    <content type="html"><![CDATA[<p>å•Š ç§Ÿæˆ¿</p><p>æœ‰äº†æˆ¿å­</p><p>é‚£ä¸å¾—ç‚¹æ»¡æŠ€èƒ½æ ‘</p><h1 id="ä½å¤„"><a href="#ä½å¤„" class="headerlink" title="ä½å¤„"></a>ä½å¤„</h1><p>æœ‰äº† åºŠæ¶<br>é‚£å°±å¾—æœ‰ åºŠå«<br>é‚£å°±å¾—æœ‰ åºŠå•<br>é‚£å°±å¾—æœ‰ è¢«ç½©<br>é‚£å°±å¾—æœ‰ è¢«è¤¥<br>é‚£å°±å¾—æœ‰ æ•å¥—<br>é‚£å°±å¾—æœ‰ â€¦</p><h1 id="å¨æˆ¿"><a href="#å¨æˆ¿" class="headerlink" title="å¨æˆ¿"></a>å¨æˆ¿</h1><p>æœ‰äº† é£Ÿç‰©<br>é‚£å°±å¾—æœ‰ ç…¤æ°”ç¶&#x2F;ç”µç£ç‚‰<br>é‚£å°±å¾—æœ‰ æ¡ˆæ¿<br>é‚£å°±å¾—æœ‰ å¨åˆ€&#x2F;åˆ®èœ&#x2F;<br>é‚£å°±å¾—æœ‰ ç‚’èœé”…&#x2F;æ±¤é”…<br>é‚£å°±å¾—æœ‰ é“²å­&#x2F;æ¼å‹º&#x2F;æ±¤å‹º&#x2F;é¥­å‹º<br>é‚£å°±å¾—æœ‰ æ²¹&#x2F;ç›&#x2F;é…±&#x2F;é†‹&#x2F;è¾£<br>é‚£å°±å¾—æœ‰ æŠ¹å¸ƒ&#x2F;é’¢ä¸çƒ&#x2F;åƒåœ¾è¢‹<br>é‚£å°±å¾—æœ‰ â€¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å•Š ç§Ÿæˆ¿&lt;/p&gt;
&lt;p&gt;æœ‰äº†æˆ¿å­&lt;/p&gt;
&lt;p&gt;é‚£ä¸å¾—ç‚¹æ»¡æŠ€èƒ½æ ‘&lt;/p&gt;
&lt;h1 id=&quot;ä½å¤„&quot;&gt;&lt;a href=&quot;#ä½å¤„&quot; class=&quot;headerlink&quot; title=&quot;ä½å¤„&quot;&gt;&lt;/a&gt;ä½å¤„&lt;/h1&gt;&lt;p&gt;æœ‰äº† åºŠæ¶&lt;br&gt;é‚£å°±å¾—æœ‰ åºŠå«&lt;br&gt;é‚£å°±å¾—æœ‰ åºŠå•&lt;br</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>cr660x è·¯ç”±å™¨ç ”ç©¶</title>
    <link href="https://puzzle9.github.io/posts/2d3b406e/"/>
    <id>https://puzzle9.github.io/posts/2d3b406e/</id>
    <published>2025-06-24T08:51:04.000Z</published>
    <updated>2025-06-24T14:06:55.588Z</updated>
    
    <content type="html"><![CDATA[<p>å—¯ taçš„ä»·æ ¼è¿˜æ˜¯<code>50</code>æ²¡æœ‰å˜!!!</p><h1 id="è§£é”"><a href="#è§£é”" class="headerlink" title="è§£é”"></a>è§£é”</h1><p>æŒ‰ç…§è§£é‡Šè¯´ å¦‚æœè·å–ä¸åˆ°ipæ—¶ ä¼šæŠŠè‡ªå·±ipè®¾ä¸º <code>169.254.31.2</code> å¹¶ä¸”å» <code>169.254.31.1</code> æ‹‰å»å‚æ•°å¹¶æ‰§è¡Œ</p><p>é‚£ä¹ˆ åœ¨ <code>archlinux</code> ä¸­å¯ä»¥ç”¨ <a href="https://aur.archlinux.org/packages/linux-wifi-hotspot"><code>linux-wifi-hotspot</code></a> æä¾›çš„ <code>create_ap</code> å¿«æ·åˆ›å»ºçƒ­ç‚¹</p><p>å½“ç„¶ è¦<a href="https://github.com/lakinduakash/linux-wifi-hotspot/issues/435">å…ˆåœæ­¢</a> <code>NetworkManager</code> æœåŠ¡</p><p>é¦–å…ˆ å¼€çƒ­ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_ap wlan0 lo ap 12345678 -g 169.254.31.1 --no-dnsmasq -<span class="built_in">dd</span></span><br></pre></td></tr></table></figure><p>å†å¯åŠ¨ä¸€ä¸ªæ‹‰å‚æ•°çš„æœåŠ¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> http.server <span class="keyword">import</span> BaseHTTPRequestHandler, HTTPServer</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleServer</span>(<span class="title class_ inherited__">BaseHTTPRequestHandler</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_POST</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;It comes!&quot;</span>)</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&quot;code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;token&quot;</span>: <span class="string">&quot;; nvram set ssh_en=1; nvram commit; sed -i &#x27;s/channel=.*/channel=\&quot;debug\&quot;/g&#x27; /etc/init.d/dropbear; /etc/init.d/dropbear start;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">self</span>.send_response(<span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.end_headers()</span><br><span class="line">        <span class="variable language_">self</span>.wfile.write(json.dumps(data).encode())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server_address = (<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="number">80</span>)</span><br><span class="line">httpd = HTTPServer(server_address, SimpleServer)</span><br><span class="line">httpd.serve_forever()</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>python server.py</code> å¯åŠ¨æœåŠ¡</p><p>å†å»è®¿é—®</p><ul><li><code>http://&lt;CR660Xè®¾å¤‡IP&gt;/cgi-bin/luci/;stok=&lt;è·å–åˆ°çš„stok&gt;/api/misystem/extendwifi_connect?ssid=ap&amp;password=12345678</code></li></ul><p>å¯ä»¥çœ‹åˆ°æ—¥å¿—æœ‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wlan0: STA aa:bb:cc:b2:b2:cc IEEE 802.11: authenticated</span><br><span class="line">wlan0: STA aa:bb:cc:b2:b2:cc IEEE 802.11: associated (aid 1)</span><br><span class="line">wlan0: AP-STA-CONNECTED aa:bb:cc:b2:b2:cc</span><br><span class="line">wlan0: STA aa:bb:cc:b2:b2:cc RADIUS: starting accounting session F94929848293082E</span><br><span class="line">wlan0: STA aa:bb:cc:b2:b2:cc WPA: pairwise key handshake completed (RSN)</span><br><span class="line">wlan0: EAPOL-4WAY-HS-COMPLETED aa:bb:cc:b2:b2:cc</span><br></pre></td></tr></table></figure><ul><li><code>http://&lt;CR660Xè®¾å¤‡IP&gt;/cgi-bin/luci/;stok=&lt;è·å–åˆ°çš„stok&gt;/api/xqsystem/oneclick_get_remote_token?username=xxx&amp;password=xxx&amp;nonce=xxx</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">It comes!</span><br><span class="line">169.254.31.2 - - [24/Jun/2025 20:34:47] &quot;POST /cgi-bin/luci/api/xqsystem/token HTTP/1.1&quot; 200 -</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ <code>ssh</code> å·²ç»è§£é”</p><h1 id="åˆ·å…¥-breed-æˆ–-bpboot"><a href="#åˆ·å…¥-breed-æˆ–-bpboot" class="headerlink" title="åˆ·å…¥ breed æˆ– bpboot"></a>åˆ·å…¥ <a href="https://breed.hackpascal.net/r1338%20%5b2021-12-16%5d/breed-mt7621-xiaomi-r3g.bin">breed</a> æˆ– <a href="https://downloads.pangubox.com:63443/lintel/CR660X/pb-boot/pb-boot.img">bpboot</a></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/</span><br><span class="line">wget http://169.254.31.1:3000/pb-boot.img</span><br><span class="line">mtd write pb-boot.img Bootloader</span><br></pre></td></tr></table></figure><p>ä»¥ç½‘çº¿æ¨¡å¼æ’å…¥ <code>lan</code> å£ è¿›å…¥é¡µé¢</p><h1 id="åˆ·-wrt-å¹¶ä¼˜åŒ–"><a href="#åˆ·-wrt-å¹¶ä¼˜åŒ–" class="headerlink" title="åˆ· wrt å¹¶ä¼˜åŒ–"></a>åˆ· wrt å¹¶ä¼˜åŒ–</h1><h2 id="åˆ·"><a href="#åˆ·" class="headerlink" title="åˆ·"></a>åˆ·</h2><p>å…ˆåœ¨ <code>pb-boot</code> åˆ·å…¥ <a href="https://downloads.openwrt.org/releases/24.10.1/targets/ramips/mt7621/openwrt-24.10.1-ramips-mt7621-xiaomi_mi-router-cr6608-initramfs-kernel.bin%60"><code>openwrt-24.10.1-ramips-mt7621-xiaomi_mi-router-cr6608-initramfs-kernel.bin</code></a></p><p>ä»¥ç©ºå¯†ç ç™»å½•å å†åˆ·å…¥ <a href="https://downloads.openwrt.org/releases/24.10.1/targets/ramips/mt7621/openwrt-24.10.1-ramips-mt7621-xiaomi_mi-router-cr6608-squashfs-sysupgrade.bin"><code>openwrt-24.10.1-ramips-mt7621-xiaomi_mi-router-cr6608-squashfs-sysupgrade.bin</code></a></p><h2 id="å›½å†…æº"><a href="#å›½å†…æº" class="headerlink" title="å›½å†…æº"></a>å›½å†…æº</h2><ul><li><a href="https://help.mirrors.cernet.edu.cn/openwrt/">https://help.mirrors.cernet.edu.cn/openwrt/</a></li></ul><h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><ul><li><a href="https://github.com/jerrykuku/luci-theme-argon/releases/download/v2.3.2/luci-theme-argon_2.3.2-r20250207_all.ipk">luci-theme-argon-2.3.2-r20250207_all.apk</a></li></ul><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="http://cnblogs.com/milton/p/18694477">http://cnblogs.com/milton/p/18694477</a></li><li><a href="https://haoyu.love/blog1389.html">https://haoyu.love/blog1389.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å—¯ taçš„ä»·æ ¼è¿˜æ˜¯&lt;code&gt;50&lt;/code&gt;æ²¡æœ‰å˜!!!&lt;/p&gt;
&lt;h1 id=&quot;è§£é”&quot;&gt;&lt;a href=&quot;#è§£é”&quot; class=&quot;headerlink&quot; title=&quot;è§£é”&quot;&gt;&lt;/a&gt;è§£é”&lt;/h1&gt;&lt;p&gt;æŒ‰ç…§è§£é‡Šè¯´ å¦‚æœè·å–ä¸åˆ°ipæ—¶ ä¼šæŠŠè‡ªå·±ipè®¾ä¸º &lt;code&gt;1</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>hs8145v å…‰çŒ«ç ”ç©¶</title>
    <link href="https://puzzle9.github.io/posts/ac7934cb/"/>
    <id>https://puzzle9.github.io/posts/ac7934cb/</id>
    <published>2025-06-11T15:59:55.000Z</published>
    <updated>2025-06-12T06:30:03.956Z</updated>
    
    <content type="html"><![CDATA[<p>ç¿»å‡ºæ¥äº†æ¥ &#96;&#96; çš„å…‰çŒ«</p><p>å¥½åœ¨æ˜¯ é»˜è®¤ ç”¨æˆ·å <code>telecomadmin</code> å¯†ç  <code>nE7jA%5m</code></p><p><img src="/posts/11c11b49/145v/login.png"></p><p>è¿™ä¸ å¾ˆé¡ºç•…çš„ç™»å½•è¿›å»äº†</p><p>ä¸å¾—ä¸è¯´ è¿™ä¸ªç•Œé¢åé¢çš„åŠ¨æ€æ•ˆæœçœŸä¸é”™ è¿™å¯æ˜¯å¥½å‡ å¹´å‰çš„å•Š</p><p>åˆå‘ç°ç‰ˆæœ¬æ˜¯ <code>B79.A</code> <code>V3.17.C10S115</code></p><p><img src="/posts/11c11b49/145v/manage_index.png"></p><p>å—¯ é€›äº†ä¸‹è®ºå›</p><p>å‘ä¸‹ è¿˜æœ‰å‡çº§åŒ… è™½ç„¶æ­¤åˆ»å¹¶ä¸çŸ¥é“æœ€åéƒ½å› ä¸º<a href="https://www.chinadsl.net/forum.php?mod=viewthread&tid=171477">å‹å·ä¸åŒ¹é…</a>è€Œå¤±è´¥äº†</p><p>å—¯ å¾ˆé¡ºç•…</p><p>å¼€å¯ <code>telnet</code></p><p><img src="/posts/11c11b49/145v/telnet.png"></p><p>è¿æ¥</p><p>ç”¨æˆ·å <code>root</code> å¯†ç  <code>adminHW</code></p><p>å—¯ å¾ˆé¡ºç•…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ telnet 192.168.2.11</span><br><span class="line">Trying 192.168.2.11...</span><br><span class="line">Connected to 192.168.2.11.</span><br><span class="line">Escape character is <span class="string">&#x27;^]&#x27;</span>.</span><br><span class="line"></span><br><span class="line">Welcome Visiting Huawei Home Gateway</span><br><span class="line">Copyright by Huawei Technologies Co., Ltd.</span><br><span class="line"></span><br><span class="line">Login:root</span><br><span class="line">Password:</span><br><span class="line">WAP&gt;su</span><br><span class="line">success!</span><br><span class="line">SU_WAP&gt;</span><br></pre></td></tr></table></figure><p>çœ‹äº†çœ¼ä¸‹ä¸‹çš„åˆ·æœºåŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ HS8145V5_V500R019C20SPC115_China_All.bin</span><br><span class="line">â”œâ”€â”€ HS8546V5_V500R019C00SPC110_china_all.bin</span><br><span class="line">â”œâ”€â”€ HS8546V5_V500R019C20SPC050_china_all.bin</span><br><span class="line">â””â”€â”€ HS8546V5_V500R019C20SPC105_china_all.bin</span><br></pre></td></tr></table></figure><p>å¼€å¯ <a href="https://wiki.archlinux.org/title/TFTP"><code>tftp</code></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S tftp-hpa</span><br><span class="line">systemctl start tftpd</span><br></pre></td></tr></table></figure><p>å¼€åˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SU_WAP&gt;load pack by tftp svrip 192.168.1.21 remotefile HS8145V5_V500R019C20SPC115_China_All.bin</span><br><span class="line">success!</span><br><span class="line">SU_WAP&gt;Software Operation Faild!RetCode=0xf7204045!</span><br></pre></td></tr></table></figure><p>å¥½äº† <a href="https://www.right.com.cn/forum/thread-8370161-1-1.html">å¤±è´¥å‘Šç»ˆ</a></p><p>ä½† ä¸å½±å“ä»–ä½œä¸ºä¸€ä¸ª<code>ap</code>å‘€</p><p>å…ˆå°†å…¶ä½™çš„ç½‘ç»œéƒ½åˆ é™¤ æ–°å»ºä¸€ä¸ª</p><p><img src="/posts/11c11b49/145v/network_create.png"></p><p>è™½ç„¶æˆ‘æ²¡çœ‹æ˜ç™½ä¸ºä»€ä¹ˆè¦å†ç»‘å®šä¸ª <a href="https://www.right.com.cn/forum/thread-5768047-1-1.html"><code>vlan</code></a></p><p><img src="/posts/11c11b49/145v/vlan_setting.png"></p><p>å†å…³é—­ <code>dhcp</code> çš„ <code>v4</code> å’Œ <code>v6</code> å¹¶ä¿®æ”¹ <code>v4</code> çš„ <code>ipåœ°å€</code></p><p><img src="/posts/11c11b49/145v/dhcp_ipv4.png"><br><img src="/posts/11c11b49/145v/dhcp_ipv6.png"></p><p>å†ä¿®æ”¹ä¸‹ <code>wifi</code> çš„é…ç½®</p><p>å†å…³é—­ <code>ä¸ŠæŠ¥</code> <code>æ—¥å¿—</code> <code>ntp</code> ç­‰<code>æœ‰çš„æ²¡çš„</code>çš„ä¸œè¥¿</p><p>å¥½äº† ä¸€ä¸ª <code>ap</code> è®¾ç½®å®Œæˆ</p><p>è‡³äº <code>è¡¥å…¨shell</code> ç­‰ç”¨ <code>win</code> äº†åå†ç ”ç©¶</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç¿»å‡ºæ¥äº†æ¥ &amp;#96;&amp;#96; çš„å…‰çŒ«&lt;/p&gt;
&lt;p&gt;å¥½åœ¨æ˜¯ é»˜è®¤ ç”¨æˆ·å &lt;code&gt;telecomadmin&lt;/code&gt; å¯†ç  &lt;code&gt;nE7jA%5m&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/11c11b49/145v/login.png</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>dae è·¨å¢™</title>
    <link href="https://puzzle9.github.io/posts/f1a175df/"/>
    <id>https://puzzle9.github.io/posts/f1a175df/</id>
    <published>2025-06-10T13:27:33.000Z</published>
    <updated>2025-06-10T13:47:18.230Z</updated>
    
    <content type="html"><![CDATA[<p>è¦è¯´ ä»€ä¹ˆç®€å• å±é™©</p><p>å”¯æœ‰ <a href="https://github.com/wireguard"><code>è·¨å¢™</code></a></p><p>å°±æ˜¯æœ‰ç‚¹è´¹ <code>èº«ä½“</code> ä¸ <strong>çº¢å°˜</strong></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>è¿™æ˜¯ä¸ªè·¨è¿‡é™åˆ¶å¤§é—¨çš„å·¥å…·</p></blockquote><h1 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h1><p>å¾ˆä½©æœè®¾è®¡è¿™ä¸ªæ–¹æ¡ˆçš„å¤§ç¥ä»¬</p><p>è¦è®¿é—®åŸŸå å°±ç‰µæ‰¯åˆ°äº† <code>dns</code></p><p>è¦åº”å¯¹è§£æ å°±ç‰µæ‰¯åˆ°äº† <code>è·¯ç”±</code></p><p>è¦åº”å¯¹åˆ†æµ å°±ç‰µæ‰¯åˆ°äº† <code>èŠ‚ç‚¹</code></p><p>è¦åº”å¯¹é€Ÿåº¦ å°±ç‰µæ‰¯åˆ°äº† <code>ç¾¤ç»„</code></p><p>è¦åº”å¯¹æ›´æ–° å°±ç‰µæ‰¯åˆ°äº† <code>è®¢é˜…</code></p><p>â€¦</p><p>ä¸€ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>ç›´æ¥å®‰è£… <a href="https://github.com/daeuniverse/daed"><code>daed</code></a> ä½¿ç”¨ <code>ç½‘é¡µ</code> ç‰ˆæœ¬é…ç½®å§</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¦è¯´ ä»€ä¹ˆç®€å• å±é™©&lt;/p&gt;
&lt;p&gt;å”¯æœ‰ &lt;a href=&quot;https://github.com/wireguard&quot;&gt;&lt;code&gt;è·¨å¢™&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°±æ˜¯æœ‰ç‚¹è´¹ &lt;code&gt;èº«ä½“&lt;/code&gt; ä¸ &lt;strong&gt;çº¢å°˜&lt;/strong&gt;&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ZeroTier æ‰“æ´ ğŸ•Š</title>
    <link href="https://puzzle9.github.io/posts/b54f4888/"/>
    <id>https://puzzle9.github.io/posts/b54f4888/</id>
    <published>2025-06-10T13:15:58.000Z</published>
    <updated>2025-06-10T13:20:01.985Z</updated>
    
    <content type="html"><![CDATA[<p>è¦è¯´ ä»€ä¹ˆç®€å• åˆºæ¿€</p><p>å”¯æœ‰ <a href="https://github.com/zerotier/ZeroTierOne"><code>æ‰“æ´</code></a></p><p>å°±æ˜¯æœ‰ç‚¹çœ‹ <code>è¿æ°”</code> ä¸ <strong>çº¢å°˜</strong></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>æˆ‘ä¹Ÿä¸çŸ¥é“è¿™æ˜¯ä¸ªåŸºäºä»€ä¹ˆçš„ <code>ipv4</code> çš„ <code>nat</code>æ‰“æ´å·¥å…·</p></blockquote><h1 id="todo"><a href="#todo" class="headerlink" title="todo"></a>todo</h1><p>æˆ‘è¿˜åœ¨ç§¯æ”’è¿æ°”ä¸­</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¦è¯´ ä»€ä¹ˆç®€å• åˆºæ¿€&lt;/p&gt;
&lt;p&gt;å”¯æœ‰ &lt;a href=&quot;https://github.com/zerotier/ZeroTierOne&quot;&gt;&lt;code&gt;æ‰“æ´&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°±æ˜¯æœ‰ç‚¹çœ‹ &lt;code&gt;è¿æ°”&lt;/code&gt; ä¸ &lt;strong&gt;çº¢å°˜&lt;/str</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>rathole ç©¿é€</title>
    <link href="https://puzzle9.github.io/posts/60e86601/"/>
    <id>https://puzzle9.github.io/posts/60e86601/</id>
    <published>2025-06-10T13:02:46.000Z</published>
    <updated>2025-06-13T08:14:55.737Z</updated>
    
    <content type="html"><![CDATA[<p>è¦è¯´ ä»€ä¹ˆç®€å• çœå¿ƒ</p><p>å”¯æœ‰ <a href="https://github.com/yujqiao/rathole"><code>ç©¿é€</code></a></p><p>å°±æ˜¯æœ‰ç‚¹è€— <code>æµé‡</code> ä¸ <strong>çº¢å°˜</strong></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>è¿™æ˜¯ä¸ªå†…ç½‘ç©¿é€å·¥å…· ç±»ä¼¼äº <a href="https://github.com/fatedier/frp"><code>frp</code></a> <a href="https://github.com/ehang-io/nps"><code>nps</code></a> ç­‰</p></blockquote><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirror.nju.edu.cn/alpine/edge/testing/x86_64/rathole-0.5.0-r0.apk</span><br><span class="line">apk add ./rathole-0.5.0-r0.apk</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /etc/rathole</span><br></pre></td></tr></table></figure><p><code>/etc/init.d/ratholec</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/sbin/openrc-run</span></span><br><span class="line"></span><br><span class="line">name=<span class="string">&quot;Rathole Client Service&quot;</span></span><br><span class="line">description=<span class="string">&quot;Rathole Client Service&quot;</span></span><br><span class="line"><span class="built_in">command</span>=<span class="string">&quot;/usr/bin/rathole&quot;</span></span><br><span class="line">command_args=<span class="string">&quot;-c /etc/rathole/rathole.toml&quot;</span></span><br><span class="line">pidfile=<span class="string">&quot;/run/<span class="variable">$SVCNAME</span>.pid&quot;</span></span><br><span class="line">command_background=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">depend</span></span>() &#123;</span><br><span class="line">    need net</span><br><span class="line">    after firewall</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /etc/init.d/ratholec</span><br><span class="line">rc-service ratholec start</span><br><span class="line">rc-update add ratholec</span><br></pre></td></tr></table></figure><h2 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt install unzip</span><br><span class="line">wget https://github.com/yujqiao/rathole/releases/download/v0.5.0/rathole-x86_64-unknown-linux-gnu.zip</span><br><span class="line">unzip -d /usr/bin/ rathole-x86_64-unknown-linux-gnu.zip</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/bin/rathole</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /etc/rathole</span><br></pre></td></tr></table></figure><p><code>/etc/systemd/system/ratholes.service</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Rathole Server Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5s</span><br><span class="line">LimitNOFILE=1048576</span><br><span class="line">User=root</span><br><span class="line"></span><br><span class="line">WorkingDirectory=/etc/rathole</span><br><span class="line">ExecStart=/usr/bin/rathole -s /etc/rathole/rathole.toml</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> ratholes.service --now</span><br></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server]</span></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç›‘å¬äº†è¿™ä¸ªç«¯å£</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="string">&quot;0.0.0.0:2333&quot;</span></span><br><span class="line"><span class="attr">default_token</span> = <span class="string">&quot;rathole&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯é€šè¿‡ipä¸ç«¯å£è¿›è¡Œè¿æ¥</span></span><br><span class="line"><span class="attr">remote_addr</span> = <span class="string">&quot;&#123;ip&#125;:2333&quot;</span></span><br><span class="line"><span class="attr">default_token</span> = <span class="string">&quot;rathole&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å¯†æ–¹å¼å¦‚ä¸‹</span></span><br><span class="line"><span class="section">[server.transport]</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;noise&quot;</span></span><br><span class="line"><span class="section">[server.transport.noise]</span></span><br><span class="line"><span class="attr">local_private_key</span> = <span class="string">&quot;nKdq0NUp3pcnRzfQEtFI/Qe/GdO6zYh1G56etEZgeIo=&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[client.transport]</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">&quot;noise&quot;</span></span><br><span class="line"><span class="section">[client.transport.noise]</span></span><br><span class="line"><span class="attr">remote_public_key</span> = <span class="string">&quot;OZgtXqojrnphLrNL/o8tFYxkRDCPNaoRfRxbuMOgqHg=&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡ç«¯èµ·äº†ä¸€ä¸ªå« go çš„æœåŠ¡ å¯¹å¤–ç«¯å£ä¸º 16070</span></span><br><span class="line"><span class="section">[server.services.go]</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="string">&quot;0.0.0.0:16070&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯å°†æœ¬æœºçš„ 6070 ç«¯å£ è½¬å‘ç»™æœåŠ¡ç«¯çš„ go æœåŠ¡</span></span><br><span class="line"><span class="section">[client.services.go]</span></span><br><span class="line"><span class="attr">local_addr</span> = <span class="string">&quot;127.0.0.1:6070&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥å†™åˆ°ä¸€èµ· ä»–æ˜¯ç”¨ <code>å‘½ä»¤</code> å»åŒºåˆ† å½“å‰æ˜¯è¿è¡Œçš„ <code>æœåŠ¡ç«¯ --server</code> è¿˜æ˜¯ <code>å®¢æˆ·ç«¯ --client</code> çš„<br>ç½®äºåŒºåˆ†æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæœåŠ¡ ç”¨çš„æ˜¯ <code>services.&#123;name&#125;</code> è¿›è¡ŒåŒºåˆ†çš„<br>è¿™ä¸ª<code>key</code>ç”¨ <code>rathole --genkey</code> ç”Ÿæˆ</p><h1 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h1><h2 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a>supervisor</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[program:rathole]</span><br><span class="line">command=rathole --client /data/rathole/config.toml</span><br><span class="line">directory=/data/rathole</span><br><span class="line">user=root</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¦è¯´ ä»€ä¹ˆç®€å• çœå¿ƒ&lt;/p&gt;
&lt;p&gt;å”¯æœ‰ &lt;a href=&quot;https://github.com/yujqiao/rathole&quot;&gt;&lt;code&gt;ç©¿é€&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°±æ˜¯æœ‰ç‚¹è€— &lt;code&gt;æµé‡&lt;/code&gt; ä¸ &lt;strong&gt;çº¢å°˜&lt;/strong&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>WireGuard ç»„ç½‘</title>
    <link href="https://puzzle9.github.io/posts/3ec5a2b7/"/>
    <id>https://puzzle9.github.io/posts/3ec5a2b7/</id>
    <published>2025-06-10T11:44:02.000Z</published>
    <updated>2025-06-10T13:38:56.602Z</updated>
    
    <content type="html"><![CDATA[<p>è¦è¯´ ä»€ä¹ˆç®€å• çœäº‹</p><p>å”¯æœ‰ <a href="https://github.com/wireguard"><code>ç»„ç½‘</code></a></p><p>å°±æ˜¯æœ‰ç‚¹çˆ½ <code>çˆ±å¥½</code> ä¸ <strong>çº¢å°˜</strong></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>è¿™æ˜¯ä¸ªåŸºäº <code>UDP</code> çš„å¼‚åœ°ç»„ç½‘å·¥å…·</p></blockquote><p>å…ˆæ”¾ä¸‹å®˜æ–¹çš„å®šä¹‰ <code>å¯¹ç­‰ä½“/èŠ‚ç‚¹/è®¾å¤‡</code> <code>Peer/Node/Device</code></p><p>è¯º å¦‚ä¸‹</p><table><thead><tr><th align="center">åç§°</th><th align="center">è™šæ‹Ÿip</th><th align="center">è‡ªå¸¦ç½‘æ®µ</th></tr></thead><tbody><tr><td align="center">Isaac</td><td align="center">192.168.99.1&#x2F;32</td><td align="center"></td></tr><tr><td align="center">Alice</td><td align="center">192.168.99.2&#x2F;32</td><td align="center">192.168.2.0&#x2F;24</td></tr><tr><td align="center">Bob</td><td align="center">192.168.99.3&#x2F;32</td><td align="center">192.168.3.0&#x2F;24</td></tr><tr><td align="center">Carol</td><td align="center">192.168.99.4&#x2F;32</td><td align="center">192.168.4.0&#x2F;24</td></tr><tr><td align="center">Dave</td><td align="center">192.168.99.5&#x2F;32</td><td align="center">192.168.5.0&#x2F;24</td></tr></tbody></table><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ul><li>å°† <code>net.ipv4.ip_forward = 1</code> æ·»åŠ åˆ° <code>/etc/sysctl.conf</code></li></ul><h2 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install wireguard-tools iptables</span><br></pre></td></tr></table></figure><h2 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apk add wireguard-tools-wg-quick iptables wireguard-tools-openrc</span><br><span class="line">rc-update add sysctl</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>/etc/conf.d/iptables</code> ä¸­ <code>IPFORWARD</code> ä¸º <code>yes</code></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><ul><li>å…¬é’¥ç§é’¥é‡‡ç”¨ <code>wg genkey | tee key.privatekey | wg pubkey &gt; key.publickey</code> ç”Ÿæˆ æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„</li><li>é…ç½®æ–‡ä»¶åœ¨ <code>/etc/wireguard</code> æ–‡ä»¶åå°±æ˜¯ç½‘å¡å è§„åˆ™ä¸º <code>^[a-zA-Z0-9_=+.-]&#123;1,15&#125;$</code></li><li>ä»¥ä¸‹é…ç½®æ–‡ä»¶æœ‰ç²¾ç®€</li></ul><h2 id="Alice-å’Œ-Bob-ä¸€èµ·ç©-Alice-æœ‰å…¬ç½‘"><a href="#Alice-å’Œ-Bob-ä¸€èµ·ç©-Alice-æœ‰å…¬ç½‘" class="headerlink" title="Alice å’Œ Bob ä¸€èµ·ç© Alice æœ‰å…¬ç½‘"></a><code>Alice</code> å’Œ <code>Bob</code> ä¸€èµ·ç© <code>Alice</code> æœ‰å…¬ç½‘</h2><ul><li><code>wg-quick up wg_ab_a</code></li></ul><p><code>Alice</code> <code>/etc/wireguard/wg_ab_a.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 192.168.99.2/24</span><br><span class="line">ListenPort = 51820</span><br><span class="line">PrivateKey = &#123;Alice_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Bob</span><br><span class="line">PublicKey = &#123;Bob_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.3/32, 192.168.3.0/24</span><br></pre></td></tr></table></figure><p><code>Bob</code> <code>/etc/wireguard/wg_ab_a.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 192.168.99.3/24</span><br><span class="line">PrivateKey = &#123;Bob_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Alice</span><br><span class="line">Endpoint = &#123;Alice_ip&#125;:51820</span><br><span class="line">PublicKey = &#123;Alice_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.2/32, 192.168.2.0/24</span><br></pre></td></tr></table></figure><h2 id="Alice-Bob-Carol-ä¸€èµ·ç©-Alice-æœ‰å…¬ç½‘"><a href="#Alice-Bob-Carol-ä¸€èµ·ç©-Alice-æœ‰å…¬ç½‘" class="headerlink" title="Alice Bob Carol ä¸€èµ·ç© Alice æœ‰å…¬ç½‘"></a><code>Alice</code> <code>Bob</code> <code>Carol</code> ä¸€èµ·ç© <code>Alice</code> æœ‰å…¬ç½‘</h2><ul><li><code>wg-quick up wg_abc_a</code></li><li><code>Bob</code> <code>Carol</code> ç©è€æ—¶é€šè¿‡ <code>Alice</code> ä¸­è½¬</li></ul><p><code>Alice</code> <code>/etc/wireguard/wg_abc_a.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 192.168.99.2/24</span><br><span class="line">ListenPort = 51820</span><br><span class="line">PrivateKey = &#123;Alice_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Bob</span><br><span class="line">PublicKey = &#123;Bob_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.3/32, 192.168.3.0/24</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Carol</span><br><span class="line">PublicKey = &#123;Carol_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.4/32, 192.168.4.0/24</span><br></pre></td></tr></table></figure><p><code>Bob</code> <code>/etc/wireguard/wg_abc_a.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 192.168.99.3/24</span><br><span class="line">PrivateKey = &#123;Bob_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Alice</span><br><span class="line">Endpoint = &#123;Alice_ip&#125;:51820</span><br><span class="line">PublicKey = &#123;Alice_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.2/32, 192.168.3.0/24, 192.168.4.0/24</span><br></pre></td></tr></table></figure><p><code>Carol</code> <code>/etc/wireguard/wg_abc_a.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">Address = 192.168.99.4/24</span><br><span class="line">PrivateKey = &#123;Carol_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Alice</span><br><span class="line">Endpoint = &#123;Alice_ip&#125;:51820</span><br><span class="line">PublicKey = &#123;Alice_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.2/32, 192.168.2.0/24, 192.168.4.0/24</span><br></pre></td></tr></table></figure><h2 id="Alice-Bob-Carol-ä¸€èµ·ç©-éƒ½æœ‰å…¬ç½‘"><a href="#Alice-Bob-Carol-ä¸€èµ·ç©-éƒ½æœ‰å…¬ç½‘" class="headerlink" title="Alice Bob Carol ä¸€èµ·ç© éƒ½æœ‰å…¬ç½‘"></a><code>Alice</code> <code>Bob</code> <code>Carol</code> ä¸€èµ·ç© éƒ½æœ‰å…¬ç½‘</h2><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="Address-å’Œ-AllowedIPs-ä»€ä¹ˆ"><a href="#Address-å’Œ-AllowedIPs-ä»€ä¹ˆ" class="headerlink" title="Address å’Œ AllowedIPs ä»€ä¹ˆ"></a><code>Address</code> å’Œ <code>AllowedIPs</code> ä»€ä¹ˆ</h2><p>ç«™åœ¨ <code>Alice</code> çš„è§’åº¦</p><ul><li><code>Address</code> æ˜¯ç»„ç½‘çš„ipåœ°å€ åªæœ‰åŒä¸ªå±€åŸŸç½‘æ‰èƒ½ä¸€èµ·ç©</li><li><code>[Peer]</code> å¯ä»¥æ‰¾è°ä¸€èµ·ç©</li><li><code>AllowedIPs</code> æ˜¯è·¯ç”± æ‰¾ä»–å¯ä»¥é€šè¿‡é‚£ä¸ªè·¯å‡ºå»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line"># æˆ‘ç»„äº†ä¸€ä¸ªå±€åŸŸç½‘</span><br><span class="line">Address = 192.168.99.2/24</span><br><span class="line"># ç›‘å¬åœ°å€æ˜¯è¿™ä¸ª</span><br><span class="line">ListenPort = 51820</span><br><span class="line"># æˆ‘çš„ç§é’¥</span><br><span class="line">PrivateKey = &#123;Alice_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Bob</span><br><span class="line"># è®¿é—® 192.168.3.0/24 ç½‘æ®µæ—¶ å»æ‰¾ Bob</span><br><span class="line">PublicKey = &#123;Bob_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.3/32, 192.168.3.0/24</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Carol</span><br><span class="line"># è®¿é—® 192.168.4.0/24 ç½‘æ®µæ—¶ å»æ‰¾ Carol</span><br><span class="line">PublicKey = &#123;Carol_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.4/32, 192.168.4.0/24</span><br></pre></td></tr></table></figure><p>è‡³äº <code>WireGuard</code> æ€ä¹ˆçŸ¥é“æ˜¯ <code>Bob</code> è¿˜æ˜¯ <code>Carol</code> æ¥æ‰¾è‡ªå·±äº†<br>é‚£ä¸æ˜¯æœ‰ <code>PublicKey</code> å­—æ®µå˜› æˆ‘æ¨æµ‹æ˜¯ç”¨å®ƒåˆ¤æ–­çš„</p><p>ç«™åœ¨ <code>Bob</code> çš„è§’åº¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line"># æˆ‘ç»„äº†æˆ–è€…åŠ å…¥äº†ä¸€ä¸ªå±€åŸŸç½‘</span><br><span class="line">Address = 192.168.99.3/24</span><br><span class="line"># æˆ‘çš„ç§é’¥</span><br><span class="line">PrivateKey = &#123;Bob_PrivateKey&#125;</span><br><span class="line">[Peer]</span><br><span class="line"># Name = Alice</span><br><span class="line">Endpoint = &#123;Alice_ip&#125;:51820</span><br><span class="line">PublicKey = &#123;Alice_PublicKey&#125;</span><br><span class="line">AllowedIPs = 192.168.99.2/32, 192.168.3.0/24, 192.168.4.0/24</span><br><span class="line"># æ¯25ç§’å»æ•²ä¸‹ Alice çš„é—¨ é˜²æ­¢ä»–å¿˜è®°æˆ‘</span><br><span class="line">PersistentKeepalive = 25</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>Endpoint</code> è¿™ä¸ªå»æ‰¾ <code>Alice</code> ç©<br>æˆ‘ä¹Ÿæƒ³å»æ‰¾ <code>Carol</code> ç© ä½†æ˜¯ä»–å’Œæˆ‘éƒ½æ²¡å¾— <code>å…¬ç½‘</code><br>é‚£æˆ‘åªèƒ½æŠŠç›¸å…³çš„ç½‘æ®µéƒ½ç»™ <code>Alice</code> è®©ä»–å»ä¸­è½¬</p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://wiki.alpinelinux.org/wiki/Configure_a_Wireguard_interface_(wg)">https://wiki.alpinelinux.org/wiki/Configure_a_Wireguard_interface_(wg)</a></li><li><a href="https://github.com/pirate/wireguard-docs">https://github.com/pirate/wireguard-docs</a></li><li><a href="https://wiki.archlinux.org/title/WireGuard">https://wiki.archlinux.org/title/WireGuard</a></li><li><a href="https://www.skyone.host/2024/wireguard-configure">https://www.skyone.host/2024/wireguard-configure</a></li><li><a href="https://v2ex.com/t/934101">https://v2ex.com/t/934101</a></li><li><a href="https://www.reddit.com/r/homelab/comments/gw22bv/wireguard_confusion_on_allowedips_and_addresses">https://www.reddit.com/r/homelab/comments/gw22bv/wireguard_confusion_on_allowedips_and_addresses</a></li><li><a href="https://www.cnblogs.com/milton/p/14178344.html">https://www.cnblogs.com/milton/p/14178344.html</a></li><li><a href="https://www.cyberciti.biz/faq/how-to-set-up-wireguard-vpn-server-on-alpine-linux/">https://www.cyberciti.biz/faq/how-to-set-up-wireguard-vpn-server-on-alpine-linux/</a></li><li><a href="https://github.com/smile365/blog/blob/master/wireguard.md">https://github.com/smile365/blog/blob/master/wireguard.md</a></li><li><a href="https://forum.proxmox.com/threads/proxmox-lxc-container-alpine-linux-set-up-wireguard-vpn-server-howto-05-2022-rev1.110778/">https://forum.proxmox.com/threads/proxmox-lxc-container-alpine-linux-set-up-wireguard-vpn-server-howto-05-2022-rev1.110778/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¦è¯´ ä»€ä¹ˆç®€å• çœäº‹&lt;/p&gt;
&lt;p&gt;å”¯æœ‰ &lt;a href=&quot;https://github.com/wireguard&quot;&gt;&lt;code&gt;ç»„ç½‘&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°±æ˜¯æœ‰ç‚¹çˆ½ &lt;code&gt;çˆ±å¥½&lt;/code&gt; ä¸ &lt;strong&gt;çº¢å°˜&lt;/strong&gt;&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>pve çš„ OpenWrt</title>
    <link href="https://puzzle9.github.io/posts/73ac8ef6/"/>
    <id>https://puzzle9.github.io/posts/73ac8ef6/</id>
    <published>2025-06-07T04:27:01.000Z</published>
    <updated>2025-06-11T15:42:35.673Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç½®å·¥ä½œ"><a href="#å‰ç½®å·¥ä½œ" class="headerlink" title="å‰ç½®å·¥ä½œ"></a>å‰ç½®å·¥ä½œ</h1><p><code>x86</code> æ¶æ„ä¸­ å…ˆä¸‹è½½æœ€æ–°çš„ <a href="https://downloads.openwrt.org/releases/24.10.1/targets/x86/64/openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img.gz"><code>generic-ext4-combined-efi.img.gz</code></a></p><p>ä¸Šä¼ åˆ° <code>pve</code> çš„ <code>tmp</code> ç›®å½•</p><p>è§£å‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/wrt</span><br><span class="line">gzip -d openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img.gz</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰é•œåƒ"><a href="#è‡ªå®šä¹‰é•œåƒ" class="headerlink" title="è‡ªå®šä¹‰é•œåƒ"></a>è‡ªå®šä¹‰é•œåƒ</h2><p>å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„ <code>raw</code> é•œåƒæ–‡ä»¶<br>å†æŠŠç°æœ‰çš„ä¸œè¥¿ åœ¨å¤åˆ¶è¿›å»çš„åŒæ—¶å»ä¿®æ”¹æ–‡ä»¶ è¾¾åˆ°è‡ªå®šä¹‰çš„ç›®çš„</p><h3 id="åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½"><a href="#åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½" class="headerlink" title="åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½"></a>åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -f raw openwrt_new.raw 1G</span><br><span class="line">losetup /dev/loop2 openwrt_new.raw</span><br></pre></td></tr></table></figure><p>åˆ†åŒºæ—¶å€™ ä¸€ä¸ª <code>efi</code> ä¸€ä¸ª <code>data</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/loop2</span><br><span class="line">kpartx -a /dev/loop2</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–åˆ†åŒºå¹¶æŒ‚è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -n EFI -F16 /dev/mapper/loop2p1</span><br><span class="line">mkfs.ext4 -L OpenWrt /dev/mapper/loop2p2</span><br><span class="line"></span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop2p1 /tmp/wrt/new/boot</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop2p2 /tmp/wrt/new/data</span><br></pre></td></tr></table></figure><h3 id="æŒ‚è½½ç°æœ‰é•œåƒ"><a href="#æŒ‚è½½ç°æœ‰é•œåƒ" class="headerlink" title="æŒ‚è½½ç°æœ‰é•œåƒ"></a>æŒ‚è½½ç°æœ‰é•œåƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">losetup /dev/loop4 openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img</span><br><span class="line">kpartx -a /dev/loop4</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop4p1 /tmp/wrt/old/boot</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop4p2 /tmp/wrt/old/data</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ"><a href="#å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ" class="headerlink" title="å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ"></a>å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS /tmp/wrt/old/boot/ /tmp/wrt/new/boot/</span><br><span class="line">rsync -qaHAXS /tmp/wrt/old/data/ /tmp/wrt/new/data/</span><br></pre></td></tr></table></figure><h4 id="ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼"><a href="#ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼" class="headerlink" title="ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼"></a>ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼</h4><p>ç¼–è¾‘ <code>/tmp/wrt/new/boot/boot/grub/grub.cfg</code> å¦‚ä¸‹</p><p>ä¿®æ”¹çš„æœ‰</p><ul><li><code>PARTUUID</code> <code>d9d3bec6-66ad-6945-acc6-cce5071fce8f</code> ç”¨ <code>blkid</code> è·å–åˆ°çš„ <code>/dev/mapper/loop2p2</code> çš„å€¼</li><li><code>timeout</code> ç­‰å¾…æ—¶é—´</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">serial --unit=0 --speed=115200 --word=8 --parity=no --stop=1 --rtscts=off</span><br><span class="line">terminal_input console serial; terminal_output console serial</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> default=<span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="built_in">timeout</span>=<span class="string">&quot;1&quot;</span></span><br><span class="line">search -l kernel -s root</span><br><span class="line"></span><br><span class="line">menuentry <span class="string">&quot;OpenWrt&quot;</span> &#123;</span><br><span class="line">        linux /boot/vmlinuz root=PARTUUID=d9d3bec6-66ad-6945-acc6-cce5071fce8f rootwait  console=tty1 console=ttyS0,115200n8 noinitrd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…³é—­wané˜²ç«å¢™"><a href="#å…³é—­wané˜²ç«å¢™" class="headerlink" title="å…³é—­wané˜²ç«å¢™"></a>å…³é—­<code>wan</code>é˜²ç«å¢™</h4><p>ç¼–è¾‘ <code>/tmp/wrt/new/data/etc/config/firewall</code></p><p>å°† é‡Œé¢çš„ <code>REJECT</code> æ”¹ä¸º <code>ACCEPT</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">config defaults</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line">        option synflood_protect &#x27;1&#x27;</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">        option name &#x27;lan&#x27;</span><br><span class="line">        list network &#x27;lan&#x27;</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">        option name &#x27;wan&#x27;</span><br><span class="line">        list network &#x27;wan&#x27;</span><br><span class="line">        list network &#x27;wan6&#x27;</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line">        option mtu_fix &#x27;1&#x27;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹ç½‘ç»œé…ç½®"><a href="#ä¿®æ”¹ç½‘ç»œé…ç½®" class="headerlink" title="ä¿®æ”¹ç½‘ç»œé…ç½®"></a>ä¿®æ”¹ç½‘ç»œé…ç½®</h4><p><code>/etc/config/network</code> è¿™ç©æ„è²Œä¼¼å¯åŠ¨æˆåŠŸåæ‰æœ‰</p><p>ç­‰è¿›å…¥åç”¨ç»ˆç«¯æ”¹å§</p><h3 id="å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹"><a href="#å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹" class="headerlink" title="å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹"></a>å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">umount /tmp/wrt/new/boot/</span><br><span class="line">umount /tmp/wrt/new/data/</span><br><span class="line">kpartx -d /dev/loop2</span><br><span class="line">losetup -d /dev/loop2</span><br><span class="line"></span><br><span class="line">umount /tmp/wrt/old/boot/</span><br><span class="line">umount /tmp/wrt/old/data/</span><br><span class="line">kpartx -d /dev/loop4</span><br><span class="line">losetup -d /dev/loop4</span><br></pre></td></tr></table></figure><h1 id="å¯¼å…¥é•œåƒ"><a href="#å¯¼å…¥é•œåƒ" class="headerlink" title="å¯¼å…¥é•œåƒ"></a>å¯¼å…¥é•œåƒ</h1><p><code>pve</code> å°†æ”¹ä¸º <code>uefi</code> å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qm disk import [openwrt vm <span class="built_in">id</span>] /tmp/wrt/openwrt_new.raw <span class="built_in">local</span></span><br></pre></td></tr></table></figure><h1 id="pve-ip-è®¾ç½®"><a href="#pve-ip-è®¾ç½®" class="headerlink" title="pve ip è®¾ç½®"></a><code>pve</code> <code>ip</code> è®¾ç½®</h1><p>ğŸ•Š</p><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="ä¸»è·¯ç”±é‡å¯åipv6æœªæ›´æ–°æƒ…å†µ"><a href="#ä¸»è·¯ç”±é‡å¯åipv6æœªæ›´æ–°æƒ…å†µ" class="headerlink" title="ä¸»è·¯ç”±é‡å¯åipv6æœªæ›´æ–°æƒ…å†µ"></a>ä¸»è·¯ç”±é‡å¯åipv6æœªæ›´æ–°æƒ…å†µ</h2><p><code>ipv6</code> æœ‰æ•ˆæœŸå¾ˆé•¿ ç„¶è€Œä¸»è·¯ç”±æ‹¨å·è·å¾—äº†æ–°çš„ä¹‹å è€çš„ä¸ä¼šè‡ªå·±å¤±æ•ˆ</p><p>è¿™å°±å¯¼è‡´æ— ç½‘ç»œè¿æ¥äº†</p><p>ä¸´æ—¶å…ˆä»¥è®¡åˆ’ä»»åŠ¡çš„çš„æ¨¡å¼å»åˆ¤æ–­ å†å»é‡å¯ç½‘å£</p><p><code>*/15 * * * * /data/scripts/check_wan6_count_auto_restart.sh</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">ipv6_count=$(ip -6 addr show dev eth3 | grep inet6 | grep -v fe80:: | <span class="built_in">wc</span> -l)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$ipv6_count</span>&quot;</span> -ge 2 ]; <span class="keyword">then</span></span><br><span class="line">        logger -t custom_scripts_wan6 <span class="string">&quot;ipv6 count: <span class="variable">$ipv6_count</span> restart&quot;</span></span><br><span class="line">        ifup wan6</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>å†å‡†å¤‡ç ”ç©¶ç›‘å¬é€»è¾‘</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://openwrt.org/docs/guide-user/installation/openwrt_x86">https://openwrt.org/docs/guide-user/installation/openwrt_x86</a></li><li><a href="https://xotechy.com/blog/mount-a-raw-qemu-image-file-to-your-linux-system/">https://xotechy.com/blog/mount-a-raw-qemu-image-file-to-your-linux-system/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰ç½®å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‰ç½®å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‰ç½®å·¥ä½œ&quot;&gt;&lt;/a&gt;å‰ç½®å·¥ä½œ&lt;/h1&gt;&lt;p&gt;&lt;code&gt;x86&lt;/code&gt; æ¶æ„ä¸­ å…ˆä¸‹è½½æœ€æ–°çš„ &lt;a href=&quot;https://downloads.openwrt</summary>
      
    
    
    
    
    <category term="pve" scheme="https://puzzle9.github.io/tags/pve/"/>
    
    <category term="OpenWrt" scheme="https://puzzle9.github.io/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>pve è‡ªå®šä¹‰åˆ†åŒº</title>
    <link href="https://puzzle9.github.io/posts/f3bcfc95/"/>
    <id>https://puzzle9.github.io/posts/f3bcfc95/</id>
    <published>2025-06-05T12:16:49.000Z</published>
    <updated>2025-06-05T13:02:01.223Z</updated>
    
    <content type="html"><![CDATA[<p>é€šå¸¸ <code>pve</code> å®‰è£…å‡ºæ¥çš„æ˜¯ <code>lvm</code> ä½œä¸ºå…¼å®¹å±‚ ä¸Šé¢å†æ˜¯å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>å¯æ˜¯å§ å•ç¡¬ç›˜ æˆ‘ç”¨ä¸åˆ°</p><p>æ˜¯çš„ æˆ‘ä¸å–œæ¬¢è¿™ç§åˆ†åŒºæ–¹æ¡ˆ</p><p>å¯æ˜¯ è¿™æ˜¯ <code>linux</code> å•Š é‚£ä¸éƒ½æ˜¯é€šç”¨çš„</p><p>å¼€æ</p><blockquote><p>å¤‡ä»½ å†æ¢å¤ å°±è¡Œ</p></blockquote><p>å…ˆé‡‡ç”¨å®˜æ–¹æ­£å¸¸çš„å®‰è£…æµç¨‹ è£…å®Œåè¿›å…¥ <code>livecd</code> æ¨è <a href="https://archlinux.org/download/"><code>archlinux</code></a> çš„</p><h1 id="å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº"><a href="#å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº" class="headerlink" title="å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº"></a>å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº</h1><h2 id="æ˜¯-lvm-æ ¼å¼çš„"><a href="#æ˜¯-lvm-æ ¼å¼çš„" class="headerlink" title="æ˜¯ lvm æ ¼å¼çš„"></a>æ˜¯ <a href="https://superuser.com/questions/116617/how-to-mount-an-lvm-volume"><code>lvm</code></a> æ ¼å¼çš„</h2><p>å…ˆ ä½¿ç”¨ <code>lvscan</code> ç½—åˆ—å‡ºæ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@pve:/tmp# lvscan</span><br><span class="line">  ACTIVE            <span class="string">&#x27;/dev/pve-OLD-A39EDD75/root&#x27;</span> [446.00 GiB] inherit</span><br></pre></td></tr></table></figure><p>å†ç›´æ¥æŒ‚è½½å°±è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/mapper/pve--OLD--A39EDD75-root olda/</span><br></pre></td></tr></table></figure><h2 id="æ˜¯-btrfs-æ ¼å¼çš„"><a href="#æ˜¯-btrfs-æ ¼å¼çš„" class="headerlink" title="æ˜¯ btrfs æ ¼å¼çš„"></a>æ˜¯ <code>btrfs</code> æ ¼å¼çš„</h2><p>ç›´æ¥æŒ‚è½½åˆ†åŒºå°±è¡Œ é»˜è®¤å®‰è£…çš„æ˜¯ä¸å¸¦å­å·çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p3 olda/</span><br></pre></td></tr></table></figure><h1 id="å¤‡ä»½æ–‡ä»¶"><a href="#å¤‡ä»½æ–‡ä»¶" class="headerlink" title="å¤‡ä»½æ–‡ä»¶"></a>å¤‡ä»½æ–‡ä»¶</h1><h2 id="ä½¿ç”¨-rsync"><a href="#ä½¿ç”¨-rsync" class="headerlink" title="ä½¿ç”¨ rsync"></a>ä½¿ç”¨ <a href="https://wiki.archlinux.org/title/Rsync#File_system_cloning"><code>rsync</code></a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS olda/ /tmp/bak/</span><br></pre></td></tr></table></figure><h1 id="é‡æ–°åˆ†åŒº"><a href="#é‡æ–°åˆ†åŒº" class="headerlink" title="é‡æ–°åˆ†åŒº"></a>é‡æ–°åˆ†åŒº</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/nvme0n1</span><br></pre></td></tr></table></figure><p>åˆ†ä¸¤ä¸ª</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Device           Start       End   Sectors  Size Type</span><br><span class="line">/dev/nvme0n1p1    2048   2099199   2097152    1G EFI System</span><br><span class="line">/dev/nvme0n1p2 2099200 966789119 964689920  460G Linux filesystem</span><br></pre></td></tr></table></figure><p>å†æ ¼å¼åŒ–ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -n EFI -F32 /dev/nvme0n1p1</span><br><span class="line">mkfs.btrfs -L PVE /dev/nvme0n1p2</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå­å·"><a href="#åˆ›å»ºå­å·" class="headerlink" title="åˆ›å»ºå­å·"></a>åˆ›å»ºå­å·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p2 /tmp/newbtrfs</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp/newbtrfs</span><br><span class="line"><span class="comment"># å°±è¿™ä¹ˆåˆ›å»ºä¸‹å»</span></span><br><span class="line">btrfs subvolume create @</span><br></pre></td></tr></table></figure><p>å¤§æ¦‚æœ‰è¿™äº›å­å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@pve:/tmp/newbtrfs# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ @</span><br><span class="line">â”œâ”€â”€ @pvevz</span><br><span class="line">â”œâ”€â”€ @root</span><br><span class="line">â”œâ”€â”€ @var_cache</span><br><span class="line">â”œâ”€â”€ @var_log</span><br><span class="line">â””â”€â”€ @var_tmp</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½æ–°åˆ†åŒº"><a href="#æŒ‚è½½æ–°åˆ†åŒº" class="headerlink" title="æŒ‚è½½æ–°åˆ†åŒº"></a>æŒ‚è½½æ–°åˆ†åŒº</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t btrfs -o subvol=/@,compress=zstd /dev/nvme0n1p2 /tmp/newpve</span><br></pre></td></tr></table></figure><h1 id="æ¢å¤å¤‡ä»½"><a href="#æ¢å¤å¤‡ä»½" class="headerlink" title="æ¢å¤å¤‡ä»½"></a>æ¢å¤å¤‡ä»½</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS /tmp/bak/ /tmp/newpve/</span><br></pre></td></tr></table></figure><h1 id="ä¿®å¤å¼•å¯¼"><a href="#ä¿®å¤å¼•å¯¼" class="headerlink" title="ä¿®å¤å¼•å¯¼"></a>ä¿®å¤å¼•å¯¼</h1><p>é»˜è®¤ç”¨çš„ <code>grub2</code> è¿›è¡Œå¼•å¯¼çš„</p><p>å‚è€ƒ <a href="https://pve.proxmox.com/wiki/Host_Bootloader"><code>proxmox-boot-tool</code></a> è¿™ä¸ª</p><p>è€Œæˆ‘ ç”¨çš„ <code>systemd-boot</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /tmp/newpve/</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>/etc/kernel/cmdline</code> åŠ å…¥å­å·å¯åŠ¨é¡¹ <code>rootflags=subvol=@</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root=UUID=eb239303-5067-4e32-add8-55fd643059ac rootflags=subvol=@ rw</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>proxmox-boot-tool clean</code> åˆ é™¤ <code>/etc/kernel/proxmox-boot-uuids</code> ä¸­æ—§çš„ <code>esp</code> <code>uuid</code></p><p>è¿è¡Œ <code>proxmox-boot-tool init /dev/nvme0n1p1</code> è‡ªåŠ¨å¤„ç† <code>efi</code> å¼•å¯¼ç­‰</p><p>è‡³æ­¤ <code>reboot</code> ååº”è¯¥å¯ä»¥è¿›å…¥ç³»ç»Ÿäº†</p><h1 id="å…³é—­-grub-æç¤ºä¿¡æ¯"><a href="#å…³é—­-grub-æç¤ºä¿¡æ¯" class="headerlink" title="å…³é—­ grub æç¤ºä¿¡æ¯"></a>å…³é—­ <code>grub</code> æç¤ºä¿¡æ¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Removable bootloader found at <span class="string">&#x27;/boot/efi/EFI/BOOT/BOOTX64.efi&#x27;</span>, but GRUB packages not <span class="built_in">set</span> up to update it!</span><br><span class="line">Run the following <span class="built_in">command</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;grub-efi-amd64 grub2/force_efi_extra_removable boolean true&#x27;</span> | debconf-set-selections -v -u</span><br><span class="line"></span><br><span class="line">Then reinstall GRUB with <span class="string">&#x27;apt install --reinstall grub-efi-amd64&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿›å…¥ç³»ç»Ÿå æ‰§è¡Œ <code>echo &#39;grub-efi-amd64 grub2/force_efi_extra_removable boolean true&#39; | debconf-set-selections -v -u</code></p><p>ç½®äºèƒ½ä¸èƒ½å¸è½½ <code>grub</code> è¿™ä»¶äº‹æƒ…å‘¢ å‘ç°æ˜¯ä¸è¡Œçš„</p><p>ä½†æ˜¯å¯ä»¥å¸è½½ <code>memtest86+</code></p><h1 id="å¸è½½æ—§å†…æ ¸"><a href="#å¸è½½æ—§å†…æ ¸" class="headerlink" title="å¸è½½æ—§å†…æ ¸"></a>å¸è½½æ—§å†…æ ¸</h1><p>ä»–æ˜¯ <code>proxmox-kernel-</code> å¼€å¤´çš„åŒ…</p><p>ç›´æ¥ <code>apt purge proxmox-kernel-6.8.12-9-pve</code> å°±è¡Œ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é€šå¸¸ &lt;code&gt;pve&lt;/code&gt; å®‰è£…å‡ºæ¥çš„æ˜¯ &lt;code&gt;lvm&lt;/code&gt; ä½œä¸ºå…¼å®¹å±‚ ä¸Šé¢å†æ˜¯å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;å¯æ˜¯å§ å•ç¡¬ç›˜ æˆ‘ç”¨ä¸åˆ°&lt;/p&gt;
&lt;p&gt;æ˜¯çš„ æˆ‘ä¸å–œæ¬¢è¿™ç§åˆ†åŒºæ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;å¯æ˜¯ è¿™æ˜¯ &lt;code&gt;linux&lt;/code&gt; å•Š </summary>
      
    
    
    
    
    <category term="pve" scheme="https://puzzle9.github.io/tags/pve/"/>
    
  </entry>
  
  <entry>
    <title>é•¿å¤§</title>
    <link href="https://puzzle9.github.io/posts/f18e40a8/"/>
    <id>https://puzzle9.github.io/posts/f18e40a8/</id>
    <published>2025-05-24T10:02:24.000Z</published>
    <updated>2025-05-24T10:07:17.731Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>éƒ½è¯´ è¢«ä¿æŠ¤çš„å¤ªå¥½çš„äººæ˜¯æ— æ³•æˆé•¿çš„</p></blockquote><p>é‚£ è‡ªå·±æ”¾å¼ƒæˆé•¿å‘¢</p><p>å—¯ ? !!</p><p>è½¬çœ¼é—´ å·²ç» <code>25å²4æœˆ</code> å•¦</p><p>å‘¨å›´çš„äºº ç»“å©šçš„ç»“å©š æ‹çˆ±çš„æ‹çˆ± ç»“å©šçš„ç»“å©š ç”Ÿå¨ƒçš„ç”Ÿå¨ƒ</p><p>æ„è¯†åˆ° è‡ªå·±æ˜¯æ™®é€šäºº æ²¡æœ‰é‚£é€†å¤©çš„ç³»ç»Ÿå</p><p>å†åŠ ä¸Šä¸€ä¸¢ä¸¢å€ºåŠ¡</p><p>ç¬é—´è§‰å¾— å¾—é•¿å¤§äº†</p>]]></content>
    
    
    <summary type="html">ç¢ç¢å¿µ</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Android TV ä¼˜åŒ–</title>
    <link href="https://puzzle9.github.io/posts/71fefb90/"/>
    <id>https://puzzle9.github.io/posts/71fefb90/</id>
    <published>2025-05-20T05:35:10.000Z</published>
    <updated>2025-05-20T06:16:17.445Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ä¸ª å·²ç» æœ‰ å¥½å¤šå¹´ å†å²çš„ <code>55</code>å¯¸ çš„ å¤§ç”µè§†</p></blockquote><p>é‚£æ—¶å€™çš„çƒ­æ’­å‰§è¿˜æ˜¯<a href="https://www.themoviedb.org/tv/60957"><code>é‚£ä¸ªç”·äºº</code></a></p><h1 id="åˆ·æœº"><a href="#åˆ·æœº" class="headerlink" title="åˆ·æœº"></a>åˆ·æœº</h1><p>ä» <a href="https://www.znds.com/tv-617019-1-1.html">https://www.znds.com/tv-617019-1-1.html</a> ä¸‹è½½ <code>8H73_M5_V016.011.171_9_5.5.zip</code> åæ”¾åˆ° <code>fat32</code>æ ¼å¼çš„<code>uç›˜</code>æ ¹ç›®å½•</p><p>é•¿æŒ‰ç”µæºé”® ç­‰å¾…äº®å±ååˆå†æ¬¡äº®å±æ—¶æ¾å¼€</p><p>è¿›å…¥ <code>recovery</code> æ¨¡å¼ å…ˆ <code>åŒæ¸…</code> å† <code>å‡çº§</code> å³å¯</p><h1 id="é¦–æ¬¡å¼€å¯-adb"><a href="#é¦–æ¬¡å¼€å¯-adb" class="headerlink" title="é¦–æ¬¡å¼€å¯ adb"></a>é¦–æ¬¡å¼€å¯ <code>adb</code></h1><p>åœ¨ è®¾ç½® çš„ å…³äºç³»ç»Ÿ é¡µé¢</p><p>æŒ‰ <code>â¬†ï¸â¬†ï¸â¬‡ï¸â¬‡ï¸â¬…ï¸â¡ï¸â¬…ï¸â¡ï¸</code> è¿›å…¥ <code>å·¥å‚æ¨¡å¼</code></p><p>é‡Œé¢ <code>å…¨éƒ¨è®¾ç½®</code> <code>å…¶ä»–</code> <code>å¼€å¯adb</code></p><h1 id="è§£é”-root"><a href="#è§£é”-root" class="headerlink" title="è§£é” root"></a>è§£é” <code>root</code></h1><p>ä¸‹è½½ <a href="https://www.kingoapp.com/">kingo root</a> å³å¯</p><p>ä½¿ç”¨ <code>adb install</code> å®‰è£…å</p><p>ç”µè§†æœºæ‰“å¼€ç­‰å¾…3åˆ†é’Ÿå·¦å³è§£é”<code>root</code></p><h1 id="adb-ç›¸å…³"><a href="#adb-ç›¸å…³" class="headerlink" title="adb ç›¸å…³"></a><code>adb</code> ç›¸å…³</h1><h2 id="è‡ªåŠ¨å¼€å¯"><a href="#è‡ªåŠ¨å¼€å¯" class="headerlink" title="è‡ªåŠ¨å¼€å¯"></a>è‡ªåŠ¨å¼€å¯</h2><p>ä¿®æ”¹ <code>/system/build.prop</code></p><ul><li><code>persist.sys.openadb=1</code></li></ul><h2 id="å†è¿æ¥æ—¶å€™-shell-Read-only-file-system"><a href="#å†è¿æ¥æ—¶å€™-shell-Read-only-file-system" class="headerlink" title="å†è¿æ¥æ—¶å€™ shell Read only file system"></a>å†è¿æ¥æ—¶å€™ <code>shell</code> <a href="https://stackoverflow.com/a/8534641/6686061"><code>Read only file system</code></a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o rw,remount /system</span><br></pre></td></tr></table></figure><h2 id="push-æ—¶"><a href="#push-æ—¶" class="headerlink" title="push æ—¶"></a><code>push</code> æ—¶</h2><p>å¯ä»¥å°†æ–‡ä»¶ <code>push</code> åˆ° <code>/data/local/tmp/</code> è¿™ä¸ªç›®å½•<br>å†è¿›å…¥ <code>shell</code> <code>cp</code> <code>chmod</code></p><h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><p>å®‰è£… <code>Solid Explorer</code> å°† æœ‰å›¾æ ‡ èƒ½çœ‹æ‡‚çš„åº”ç”¨ åˆ é™¤å³å¯</p><h1 id="æ¡Œé¢"><a href="#æ¡Œé¢" class="headerlink" title="æ¡Œé¢"></a>æ¡Œé¢</h1><ul><li>ä½¿ç”¨ <code>å½“è´æ¡Œé¢</code> <code>com.dangbei.tvlauncher</code></li></ul><p>ä¿®æ”¹ <code>/system/pcfg/8H73_M5/config/general_config.xml</code></p><ul><li><code>&lt;config name=&quot;DEFAULT_HOMEPAGE&quot; value = &quot;com.dangbei.tvlauncher/com.dangbei.tvlauncher.IndexActivity&quot;/&gt;</code></li></ul><p>å°†<code>apk</code> æ”¾åˆ° <code>system/app</code> ç›®å½•ä¸­ ä¸ç„¶ä¼šå¡å¼€æœº</p><h1 id="DLNA-æŠ•å±"><a href="#DLNA-æŠ•å±" class="headerlink" title="DLNA æŠ•å±"></a><code>DLNA</code> æŠ•å±</h1><p>å¯ä»¥ä½¿ç”¨ <code>æ©™å­æŠ•å±</code></p><h1 id="EMBY-ä½¿ç”¨"><a href="#EMBY-ä½¿ç”¨" class="headerlink" title="EMBY ä½¿ç”¨"></a><code>EMBY</code> ä½¿ç”¨</h1><p>è¿™æ˜¯æœ€åä¸€ä¸ªæ”¯æŒå®‰å“ç‰ˆæœ¬ <code>4.4.2</code> çš„</p><ul><li><a href="https://www.apkmirror.com/apk/emby-media/emby-for-android/emby-for-android-3-0-21-release/">https://www.apkmirror.com/apk/emby-media/emby-for-android/emby-for-android-3-0-21-release/</a></li></ul><p>ç¡¬ä»¶é—®é¢˜ <code>HDR</code> çš„è§†é¢‘æ˜¯æ— æ³•æ’­æ”¾çš„</p>]]></content>
    
    
    <summary type="html">ç»™ åˆ›ç»´ 8H73_M5 çš„ä¼˜åŒ–è®°å½•</summary>
    
    
    
    
    <category term="Android" scheme="https://puzzle9.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>btrfs</title>
    <link href="https://puzzle9.github.io/posts/6c53b462/"/>
    <id>https://puzzle9.github.io/posts/6c53b462/</id>
    <published>2025-05-14T04:45:43.000Z</published>
    <updated>2025-05-14T05:08:36.267Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠä¸»åŠ›æœºæ¢æˆ<code>arch</code>çš„é‚£ä¸¤ä¸‰äº‹</p></blockquote><p>è¦è¯´è¿™ä¸ªå¥½ é‚£å°±å¥½çš„ä¸å¾—äº†</p><p>é¦–å…ˆ è¦æœ‰ <a href="https://archlinux.org/packages/core/x86_64/btrfs-progs/"><code>btrfs-progs</code></a> è¿™ä¸ªåŒ…</p><p>å…¶æ¬¡ è¦æœ‰ <code>btrfs</code> çš„æ–‡ä»¶ç³»ç»Ÿ <code>mkfs.btrfs -L Arch /dev/sdxn</code></p><p>å†è€… è¦èƒ½è®¿é—® <code>mount /dev/sdxn /btrfs</code></p><h1 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h1><p>ä¸€ç§æ˜¯æŒ‚è½½ <code>åˆ†åŒº</code></p><p>è¿™æ—¶å€™å¯ä»¥å¯¹ <code>å­å·</code> è¿›è¡Œæ“ä½œ</p><p>å¦ä¸€ç§æ˜¯æŒ‚è½½ <code>å­å·</code></p><p>è¿™æ—¶å€™å¯ä»¥å † <code>å­å·</code> çš„æ–‡ä»¶è¿›è¡Œæ“ä½œ è™½è®©ä¸Šé¢é‚£ç§æŒ‚è½½ä¹Ÿè¡Œ</p><h1 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæŒ‚è½½</span></span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/sdxn /btrfs</span><br><span class="line"><span class="built_in">cd</span> /btrfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå­å·åˆ—è¡¨</span></span><br><span class="line">btrfs subvolume list .</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå­å·</span></span><br><span class="line">btrfs subvolume create @vm</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å­å·</span></span><br><span class="line">btrfs subvolume delete @vm</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿«ç…§å­å·</span></span><br><span class="line">btrfs subvolume snapshot @vm @vm_bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘½ä»¤ä¹Ÿå¯ä»¥ç²¾ç®€</span></span><br><span class="line"><span class="comment"># btrfs sub snap ...</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mount -t btrfs -o subvol=@vm,noatime,compress=zstd:1 /dev/sdxn /archlinux/vm</span><br><span class="line">mount -t btrfs -o subvol=@home,noatime,compress=lzo /dev/sdxn /archlinux/home</span><br><span class="line">mount -t btrfs -o subvol=@var_cache,noatime,nodatacow /dev/sdxn /archlinux/var/cache</span><br><span class="line">mount -t btrfs -o subvol=@var_log,noatime,nodatacow /dev/sdxn /archlinux/var/log</span><br></pre></td></tr></table></figure><ul><li><code>nodatacow</code> å…³é—­ <code>cow</code> åŠŸèƒ½</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºå±æ€§</span></span><br><span class="line">lsattr .</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æŸä¸ªæ–‡ä»¶å…³é—­cow</span></span><br><span class="line">chattr +C [path]</span><br></pre></td></tr></table></figure><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>è¿˜åœ¨å¯»æ‰¾ç­”æ¡ˆä¸­</p><p>linux btrf åŒä¸€ä¸ªå·ä¸­<br>æœ‰ä»¥ä¸‹ä¸‰ç§æŒ‚è½½æ–¹å¼<br>rw,noatime,compress&#x3D;zstd:1,subvol&#x3D;&#x2F;@<br>rw,noatime,compress&#x3D;lzo,subvol&#x3D;&#x2F;@home<br>rw,noatime,nodatacow,subvol&#x3D;&#x2F;@opt</p><p>æŠŠaæ–‡ä»¶ä»@ç§»åŠ¨åˆ°@homeæ—¶å€™ æ–‡ä»¶å‹ç¼©ç±»å‹å˜åŒ–å—<br>æŠŠbæ–‡ä»¶ä»@ç§»åŠ¨åˆ°@optæ—¶å€™ æ–‡ä»¶ç”¨åˆ°äº†cowäº†å—<br>æŠŠcæ–‡ä»¶ä»@optç§»åŠ¨åˆ°äº†@opt æ–‡ä»¶ç”¨åˆ°cowäº†å—<br>æŠŠdæ–‡ä»¶ä»@optç§»åŠ¨åˆ°äº†@home æ–‡ä»¶ç”¨åˆ°cowäº†å—<br>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦ç”¨åˆ°äº†cow</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æŠŠä¸»åŠ›æœºæ¢æˆ&lt;code&gt;arch&lt;/code&gt;çš„é‚£ä¸¤ä¸‰äº‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¦è¯´è¿™ä¸ªå¥½ é‚£å°±å¥½çš„ä¸å¾—äº†&lt;/p&gt;
&lt;p&gt;é¦–å…ˆ è¦æœ‰ &lt;a href=&quot;https://archlinux.org/packages/core/x8</summary>
      
    
    
    
    <category term="btrfs" scheme="https://puzzle9.github.io/categories/btrfs/"/>
    
    
    <category term="linux" scheme="https://puzzle9.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>libvirt åˆæ¢</title>
    <link href="https://puzzle9.github.io/posts/9c0bfbd/"/>
    <id>https://puzzle9.github.io/posts/9c0bfbd/</id>
    <published>2025-05-11T06:47:38.000Z</published>
    <updated>2025-05-27T18:07:36.816Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠä¸»åŠ›æœºæ¢æˆ<code>arch</code>çš„é‚£ä¸¤ä¸‰äº‹</p></blockquote><h1 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h1><ul><li><code>kvm</code> æ˜¯åº•å±‚è™šæ‹ŸåŒ– æä¾› <code>cpu</code> <code>å†…å­˜</code> ç­‰</li><li><code>qemu</code> æ˜¯åŸºäº <code>kvm</code> ç®¡ç†å¤–è®¾çš„ <code>ç½‘å¡</code> <code>ç¡¬ç›˜</code> ç­‰</li><li><code>libvirt</code> æ˜¯åŸºäºå‰ä¸¤ä¸ªçš„ <code>ç»ˆç«¯å‘½ä»¤</code></li><li><code>virt-manager</code> æ˜¯åŸºäº <code>libvirt</code> çš„ <code>gui</code> é¡µé¢</li><li><code>virt-viewer</code> æ˜¯åŸºäº <code>spice</code> åè®®çš„ è¿œç¨‹è¿æ¥è½¯ä»¶ å°† <code>virt-manager</code> è¿™éƒ¨åˆ†åŠŸèƒ½ç‹¬ç«‹å‡ºæ¥äº†</li></ul><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><ul><li><code>ä¸»æœº host</code> <code>æä¾›è™šæ‹ŸåŒ–çš„æœºå™¨</code></li><li><code>å®¢æˆ·æœº guest</code> <code>ä½¿ç”¨è™šæ‹ŸåŒ–çš„æœºå™¨</code></li></ul><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å¦‚æœä½¿ç”¨ <code>btrfs</code> çš„è¯<br>å»ºè®®æŠŠ <code>/var/lib/libvirt/</code> å…ˆåšä¸ªå­å· å¹¶è®¾ç½®ä¸º <code>nodatacow</code> å±æ€§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-desktop libvirt virt-manager dnsmasq</span><br><span class="line">systemctl <span class="built_in">enable</span> libvirtd --now</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a>ä¿®æ”¹æƒé™</h2><ul><li><code>/etc/libvirt/libvirtd.conf</code> å–æ¶ˆæ³¨é‡Š <code>unix_sock_group</code> å’Œ <code>unix_sock_ro_perms</code></li><li><code>usermod -aG libvirt [who]</code> å°†è‡ªå·±æ·»åŠ åˆ°ç”¨æˆ·ç»„</li></ul><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>æ‰“å¼€ <code>virt-manager</code></p><p>å¼€å¯ <code>xml</code> ç¼–è¾‘åŠŸèƒ½</p><h2 id="ç½‘ç»œè®¾ç½®"><a href="#ç½‘ç»œè®¾ç½®" class="headerlink" title="ç½‘ç»œè®¾ç½®"></a>ç½‘ç»œè®¾ç½®</h2><p>ä¿é™©æœŸé—´æœŸé—´ ä½¿ç”¨ <code>nat</code> æˆ–è€… <code>éš”ç¦»</code></p><p>ç½‘æ®µå¯ä¸º <code>192.168.26.0/28</code></p><h2 id="kvm"><a href="#kvm" class="headerlink" title="kvm"></a>kvm</h2><p>è¿æ¥ä¸º <code>qemu:///system</code></p><p>å¤–è®¾æ¨¡å¼éƒ½é€‰ <code>virtio</code> å†åˆ é™¤ä¸ç”¨çš„å¤–è®¾</p><p>ä½¿ç”¨ <code>qcow2</code> æ¨¡å¼é•œåƒ <code>å¿«ç…§</code> <code>æ´¾ç”Ÿ</code> ç­‰åŠŸèƒ½å¾ˆæ£’</p><h3 id="win10-or-win11"><a href="#win10-or-win11" class="headerlink" title="win10 or win11"></a>win10 or win11</h3><p>æ¨èç”¨ <code>Windows 10 IoT Enterprise LTSC 2021</code> æˆ– <code>Windows 11 IoT Enterprise LTSC 2024</code> <a href="https://massgrave.dev/windows_ltsc_links">é•œåƒ</a></p><p>ä¸€å®šè¦åŠ è½½ <a href="https://aur.archlinux.org/packages/virtio-win"><code>virtio-win</code></a> <a href="https://docs.fedoraproject.org/en-US/quick-docs/creating-windows-virtual-machines-using-virtio-drivers/index.html">é•œåƒ</a></p><p>å®‰è£…æ—¶ å¿…é¡»å°† <a href="https://superuser.com/a/948591/1173085"><strong>ç¡¬ç›˜è®¾ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹</strong></a></p><p><del>ç”¨peåº”è¯¥ä¹Ÿå¯ä»¥æ æˆ‘æ›¾ç»æƒ³è¯•è¿‡</del></p><p>ç”¨ <a href="https://firpe.cn/">pe</a> åŠ è½½ é©±åŠ¨å å®‰è£…æ—¶å†æŠŠé©±åŠ¨å†…ç½®è¿›å»å°±æˆ</p><h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><ul><li><p>ä½¿ç”¨ <code>host-passthrough</code> æ¨¡å¼</p></li><li><p><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#CPU_pinning">å®šä½<code>cpu</code></a></p></li><li><p>å…³é—­ä¼‘çœ  <code>powercfg -h off</code></p></li><li><p>ç¦ç”¨ <code>SysMain</code> <code>Search</code> ç­‰æœåŠ¡</p></li><li><p>åˆ é™¤ <code>å®šæ—¶ä»»åŠ¡</code></p></li><li><p><a href="https://github.com/tsgrgo/windows-update-disabler">ç¦æ­¢ <code>update</code> å•¦</a></p></li><li><p><a href="https://github.com/ionuttbara/windows-defender-remover">ç§»é™¤ <code>defender</code> å•¦</a></p></li></ul><h5 id="win10-lts-wsappx-cpuå ç”¨é«˜"><a href="#win10-lts-wsappx-cpuå ç”¨é«˜" class="headerlink" title="win10 lts wsappx cpuå ç”¨é«˜"></a>win10 lts wsappx cpuå ç”¨é«˜</h5><ul><li><a href="https://github.com/brokyz/Win10_LTSC_2021_FixPacks">https://github.com/brokyz/Win10_LTSC_2021_FixPacks</a></li></ul><h5 id="win11-ä¿®æ”¹ä¸º-win10-çš„å³é”®èœå•"><a href="#win11-ä¿®æ”¹ä¸º-win10-çš„å³é”®èœå•" class="headerlink" title="win11 ä¿®æ”¹ä¸º win10 çš„å³é”®èœå•"></a>win11 ä¿®æ”¹ä¸º win10 çš„å³é”®èœå•</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg.exe add &quot;HKCU\Software\Classes\CLSID\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\InprocServer32&quot; /f /ve</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-virtiofs-æ–‡ä»¶å…±äº«"><a href="#ä½¿ç”¨-virtiofs-æ–‡ä»¶å…±äº«" class="headerlink" title="ä½¿ç”¨ virtiofs æ–‡ä»¶å…±äº«"></a>ä½¿ç”¨ <a href="https://virtio-fs.gitlab.io/howto-windows.html"><code>virtiofs</code></a> æ–‡ä»¶å…±äº«</h4><blockquote><p>è¿™ä¸ªå…±äº«å§ æœ‰äº›è½¯ä»¶ä»–ä¸æ”¯æŒ!</p></blockquote><p>éœ€è¦å®‰è£… <a href="https://github.com/winfsp/winfsp"><code>WinFsp</code></a> å å¹¶æ‰‹åŠ¨å¼€å¯ <code>VirtioFsSvc</code> æœåŠ¡</p><p>è¿™ç§æ¨¡å¼åªæ”¯æŒä¸€ä¸ªæ–‡ä»¶å¤¹</p><p>å¦‚éœ€å¤šç§å…±äº«å‚è€ƒ <a href="https://github.com/virtio-win/kvm-guest-drivers-windows/wiki/Virtiofs:-Shared-file-system#mount">wiki</a></p><h4 id="gpu-å…±äº«"><a href="#gpu-å…±äº«" class="headerlink" title="gpu å…±äº«"></a><code>gpu</code> å…±äº«</h4><h5 id="ä½¿ç”¨-vgpu"><a href="#ä½¿ç”¨-vgpu" class="headerlink" title="ä½¿ç”¨ vgpu"></a>ä½¿ç”¨ <code>vgpu</code></h5><p>æˆ‘åœ¨ <code>arch 6.12.28-1-lts</code> ä¸Šä¸€ç›´å¤±è´¥ ä½†åœ¨ <code>debian 13</code> æ˜¯æˆåŠŸçš„ ä¾¿æ”¾å¼ƒäº†</p><ul><li><a href="https://gitlab.com/polloloco/vgpu-proxmox">https://gitlab.com/polloloco/vgpu-proxmox</a></li><li><a href="https://foxi.buduanwang.vip/virtualization/pve/3417.html">https://foxi.buduanwang.vip/virtualization/pve/3417.html</a></li><li><a href="https://alist.homelabproject.cc/foxipan">https://alist.homelabproject.cc/foxipan</a></li></ul><h5 id="ç›´é€š-gpu"><a href="#ç›´é€š-gpu" class="headerlink" title="ç›´é€š gpu"></a>ç›´é€š <code>gpu</code></h5><p>æ·»åŠ  <code>pci</code> å</p><p>å» <a href="https://www.nvidia.cn/drivers/lookup/"><code>nvidia</code></a> ä¸‹è½½ é©±åŠ¨ ä»–ä»¬å°±åå­—ä¸ä¸€æ ·</p><p>åªéœ€è¦å®‰è£… <code>ç²¾ç®€</code> é‚£ä¸ªæ¨¡å¼å°±è¡Œ</p><p>ç”±äº <code>win</code> æ˜¾å¡æ— è¾“å‡º æ‰€ä»¥ä»–ä¸ä¼šç”¨ <code>gpu</code> çš„ ç¥å¥‡å§</p><p>è¿™é‡Œå°±ç‰µæ‰¯åˆ°ä¸¤ä¸ªæ–¹æ¡ˆå•¦</p><h6 id="hdmiæ˜¾å¡æ¬ºéª—å™¨"><a href="#hdmiæ˜¾å¡æ¬ºéª—å™¨" class="headerlink" title="hdmiæ˜¾å¡æ¬ºéª—å™¨"></a>hdmiæ˜¾å¡æ¬ºéª—å™¨</h6><p>ç¬”è®°æœ¬ä¸­ä¸ç°å® æ”¾å¼ƒ</p><h6 id="è™šæ‹Ÿå±å¹•"><a href="#è™šæ‹Ÿå±å¹•" class="headerlink" title="è™šæ‹Ÿå±å¹•"></a><a href="https://github.com/VirtualDisplay/Virtual-Display-Driver">è™šæ‹Ÿå±å¹•</a></h6><p>éœ€è¦å®‰è£… <a href="https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-desktop-6.0.36-windows-x64-installer"><code>windowsdesktop-runtime-6.0.x-win-x64.exe</code></a></p><p>å®‰è£…åæœ‰å¯èƒ½è®¾å¤‡å¯åŠ¨å¤±è´¥ åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­çœ‹çœ‹å¯ä»¥æ‰‹åŠ¨å¯ç”¨ä¸ ä¸å¾—è¡Œå°±æ¢ <code>win11</code> å§</p><p>å¯ä»¥ä¿®æ”¹ å®‰è£…ç›®å½•çš„ <a href="https://github.com/VirtualDrivers/Virtual-Display-Driver/wiki/How-to-configure-the-driver#overview-of-the-configuration-xml"><code>vdd_settings.xml</code></a> æ–‡ä»¶è‡ªå®šä¹‰åˆ†è¾¨ç‡ç­‰</p><hr><p>é‚£è§£å†³äº†æ˜¾å¡æ— è¾“å‡ºé—®é¢˜å ä¸‹ä¸ªé—®é¢˜å°±å…‰æ˜æ­£å¤§çš„æ¥å•¦</p><p>é‚£è¦å¦‚ä½•æ˜¾ç¤ºè¿™ä¸ªè™šæ‹Ÿå±å¹•å‘¢?</p><p>è¿™æ—¶å€™ <a href="https://looking-glass.io/"><code>Looking Glass</code></a> å°±æ¥å•¦</p><p>å®‰è£… <a href="https://aur.archlinux.org/packages/looking-glass"><code>looking-glass-client</code></a></p><p>å†å‚è€ƒ <a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Using_Looking_Glass_to_stream_guest_screen_to_the_host"><code>wiki</code></a> é…ç½®ä¸‹</p><p>å°† <code>looking-glass</code> çš„æ˜¾å­˜å¯ä»¥è°ƒå¤§ç‚¹ æ¯”å¦‚ <code>128</code></p><p>åœ¨ <code>å®¢æˆ·æœº</code> ä¸Šå°†è™šæ‹Ÿå±å¹•è®¾ä¸ºå”¯ä¸€æ˜¾ç¤º</p><p>å‡ºé—®é¢˜äº†å¯ä»¥æŒ‰ <code>win + p</code> å‡­è®°å¿†ä¿®æ”¹æ˜¾ç¤ºå±å¹•</p><p>ä¸»æœºä¸Šè¿è¡Œ <code>looking-glass-client -m 97 -F</code> å³å¯å¯åŠ¨</p><ul><li><code>-F</code> å…¨å±</li><li><code>-m</code> æŒ‡å®šä¸»æœºé”® <code>97</code> è¿™é‡Œæ˜¯ <code>lctrl</code></li></ul><p>å‡ºäº†æ„å¤–çš„è¯ çœ‹ <code>%ProgramData%\Looking Glass (host)\looking-glass-host.txt</code> æ—¥å¿—</p><p>æ¥å¼  <em>ç´¢æ‹‰å¡å‰çš„å¯¹æ¯”å›¾</em></p><p><img src="/posts/9c0bfbd/lol_soraka_befor.png" alt="lol_soraka_befor"></p><h4 id="åˆ é™¤-win-çš„æ¢å¤åˆ†åŒº"><a href="#åˆ é™¤-win-çš„æ¢å¤åˆ†åŒº" class="headerlink" title="åˆ é™¤ win çš„æ¢å¤åˆ†åŒº"></a><a href="https://superuser.com/a/1824309/1173085">åˆ é™¤ win çš„æ¢å¤åˆ†åŒº</a></h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">diskpart</span><br><span class="line">list disk</span><br><span class="line">select disk [number]</span><br><span class="line">list partition</span><br><span class="line">select partition [number]</span><br><span class="line">delete partition override</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><h4 id="å¼€å¯-TPM-æ”¯æŒ"><a href="#å¼€å¯-TPM-æ”¯æŒ" class="headerlink" title="å¼€å¯ TPM æ”¯æŒ"></a>å¼€å¯ <code>TPM</code> æ”¯æŒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S swtpm</span><br></pre></td></tr></table></figure><h4 id="åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡"><a href="#åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡" class="headerlink" title="åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡"></a>åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡</h4><p>é¦–æ¬¡å¯ä»¥åŒæ­¥ å…¨å±å’Œä¿®æ”¹æœ‰ç‚¹é—®é¢˜</p><p>å¯ä»¥åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­ é‡å¯ <code>Red Hat VirtIO GPU DOD controller</code> è§£å†³</p><h3 id="qcow2-çš„-é«˜çº§ä½¿ç”¨"><a href="#qcow2-çš„-é«˜çº§ä½¿ç”¨" class="headerlink" title="qcow2 çš„ é«˜çº§ä½¿ç”¨"></a><code>qcow2</code> çš„ é«˜çº§ä½¿ç”¨</h3><ul><li>q -&gt; qume</li><li>cow -&gt; å†™æ—¶å¤åˆ¶</li><li>2 -&gt; ç¬¬äºŒç‰ˆæœ¬?</li></ul><p>è¿™ä¸ªå¿«ç…§æ˜¯çº¿æ€§çš„</p><h4 id="å¿«ç…§åˆå¹¶"><a href="#å¿«ç…§åˆå¹¶" class="headerlink" title="å¿«ç…§åˆå¹¶"></a>å¿«ç…§åˆå¹¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img convert -O qcow2 origin save</span><br><span class="line">qemu-img convert -O qcow2 base.qcow2 new.qcow2</span><br></pre></td></tr></table></figure><h4 id="é•œåƒæ´¾ç”Ÿ"><a href="#é•œåƒæ´¾ç”Ÿ" class="headerlink" title="é•œåƒæ´¾ç”Ÿ"></a>é•œåƒæ´¾ç”Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -F qcow2 -f qcow2 save -o backing_file=origin size</span><br><span class="line">qemu-img create -F qcow2 -f qcow2 new.qcow2 -o backing_file=/base.qcow2 200G</span><br></pre></td></tr></table></figure><h4 id="é•œåƒä¿®æ”¹"><a href="#é•œåƒä¿®æ”¹" class="headerlink" title="é•œåƒä¿®æ”¹"></a>é•œåƒä¿®æ”¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modprobe nbd</span><br><span class="line">qemu-nbd -c /dev/nbd0 base.qcow2</span><br><span class="line">qemu-nbd -d /dev/nbd0</span><br></pre></td></tr></table></figure><h2 id="lxc"><a href="#lxc" class="headerlink" title="lxc"></a>lxc</h2><p>è¿æ¥ä¸º <code>lxc:///</code></p><p>è¿™ä¸ªæ˜¯è‡ªå·±å®ç°çš„ <code>lxc</code> æ— é¡»å®‰è£…å…¶ä»–çš„åŒ…</p><p>å¯ä»¥ç›´æ¥ç”¨ <code>rootfs</code></p><p>æˆ–è€…åœ¨ <a href="https://images.linuxcontainers.org/">https://images.linuxcontainers.org/</a> ä¸‹è½½</p><p>å…ˆ <code>chroot</code> è¿›å»ä¿®æ”¹ å¯†ç </p><h3 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chroot</span> alpine /bin/sh -l</span><br></pre></td></tr></table></figure><p>å†è€… æ¨èä½¿ç”¨ <code>dropbear</code> æ¥èŠ‚çœç‚¹ <code>å†…å­˜</code></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://wiki.archlinux.org/title/Libvirt">https://wiki.archlinux.org/title/Libvirt</a></li><li><a href="https://wiki.archlinux.org/title/Virt-manager">https://wiki.archlinux.org/title/Virt-manager</a></li><li><a href="https://wiki.archlinux.org/title/QEMU">https://wiki.archlinux.org/title/QEMU</a></li><li><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF">https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF</a></li><li><a href="https://sysguides.com/install-a-windows-11-virtual-machine-on-kvm">https://sysguides.com/install-a-windows-11-virtual-machine-on-kvm</a></li><li><a href="https://zhuanlan.zhihu.com/p/24366335">https://zhuanlan.zhihu.com/p/24366335</a></li><li><a href="https://zhuanlan.zhihu.com/p/600611659">https://zhuanlan.zhihu.com/p/600611659</a></li><li><a href="https://ivonblog.com/posts/looking-glass-host-for-windows/">https://ivonblog.com/posts/looking-glass-host-for-windows/</a></li><li><a href="https://blog.gavinzh.com/2017/08/02/qemu-img-tutorial-commands/">https://blog.gavinzh.com/2017/08/02/qemu-img-tutorial-commands/</a></li></ul>]]></content>
    
    
    <summary type="html">linux è™šæ‹ŸåŒ– kvm qemu</summary>
    
    
    
    <category term="libvirt" scheme="https://puzzle9.github.io/categories/libvirt/"/>
    
    
    <category term="linux" scheme="https://puzzle9.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>vite çš„ target å‘€</title>
    <link href="https://puzzle9.github.io/posts/97f3c987/"/>
    <id>https://puzzle9.github.io/posts/97f3c987/</id>
    <published>2024-11-19T13:41:38.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© æµè§ˆå™¨å…¼å®¹ æ¢èµ›é“äº†å‘¢</p><p>å¥½ä¹…æ²¡å‡çº§çš„æˆ‘é‡åˆ°äº† <code>Object.hasOwn is not a function</code> é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/86.0.4240.99 XWEB/4263 MMWEBSDK/20220604 Mobile Safari/537.36 MMWEBID/2083 MicroMessenger/8.0.24.2167(0x28001843) WeChat/arm64 Weixin GPVersion/1 NetType/WIFI Language/zh_CN ABI/arm64  </span><br></pre></td></tr></table></figure><p>çœ‹äº†çœ‹åº”ç”¨çš„åŒ… å‘ç° <code>ky</code> è¿™ä¸ªç°ä»£çš„æœ‰è¶£å®¶ä¼™</p><p>æ© æœäº†æœ å‘ç°ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</p><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> hasOwn <span class="keyword">from</span> <span class="string">&#x27;object.hasown&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">Object</span>.<span class="property">hasOwn</span>) &#123;</span><br><span class="line">  hasOwn.<span class="title function_">shim</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒåœ°å€</p><ul><li><a href="https://github.com/sindresorhus/ky/issues/629">https://github.com/sindresorhus/ky/issues/629</a></li><li><a href="https://github.com/vitejs/vite/discussions/15794">https://github.com/vitejs/vite/discussions/15794</a></li><li><a href="https://ccny.ltd/views/blog/2022/%E4%BB%8E%20Object.hasOwn%20%E7%9C%8B%20@vitejs_plugin-legacy.html">https://ccny.ltd/views/blog/2022/%E4%BB%8E%20Object.hasOwn%20%E7%9C%8B%20@vitejs_plugin-legacy.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© æµè§ˆå™¨å…¼å®¹ æ¢èµ›é“äº†å‘¢&lt;/p&gt;
&lt;p&gt;å¥½ä¹…æ²¡å‡çº§çš„æˆ‘é‡åˆ°äº† &lt;code&gt;Object.hasOwn is not a function&lt;/code&gt; é”™è¯¯&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>UA åˆ—è¡¨æ”¶é›†</title>
    <link href="https://puzzle9.github.io/posts/44f49894/"/>
    <id>https://puzzle9.github.io/posts/44f49894/</id>
    <published>2024-10-22T07:52:35.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p><code>Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/86.0.4240.99 XWEB/4263 MMWEBSDK/20220604 Mobile Safari/537.36 MMWEBID/2083 MicroMessenger/8.0.24.2167(0x28001843) WeChat/arm64 Weixin GPVersion/1 NetType/WIFI Language/zh_CN ABI/arm64</code></p></li><li><p><code>Mozilla/5.0 (Linux; U; Android 13; zh-cn; 21091116AC Build/TP1A.220624.014) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/109.0.5414.118 Mobile Safari/537.36 XiaoMi/MiuiBrowser/18.4.410719</code></p></li><li><p><code>Mozilla/5.0 (Linux; Android 13; 21091116AC Build/TP1A.220624.014; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/126.0.6478.188 Mobile Safari/537.36 XWEB/1260117 MMWEBSDK/20240501 MMWEBID/8157 MicroMessenger/8.0.50.2701(0x2800325B) WeChat/arm64 Weixin NetType/4G Language/zh_CN ABI/arm64</code></p></li><li><p><code>Mozilla/5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.52(0x18003425) NetType/WIFI Language/zh_CN</code></p></li><li><p><code>Mozilla/5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1</code></p></li></ul><p>&#96;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Ch</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤ **æŠ€å·§</title>
    <link href="https://puzzle9.github.io/posts/6c5b1981/"/>
    <id>https://puzzle9.github.io/posts/6c5b1981/</id>
    <published>2024-10-22T07:51:50.000Z</published>
    <updated>2025-06-11T08:39:00.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> &#123;http,https&#125;_proxy=<span class="string">&quot;http://ip:port&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> http_proxy=http://ip:port</span><br><span class="line"><span class="built_in">set</span> https_proxy=http://ip:port</span><br></pre></td></tr></table></figure><h1 id="mariadb"><a href="#mariadb" class="headerlink" title="mariadb"></a>mariadb</h1><h2 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h2><ul><li><a href="https://mariadb.com/kb/en/installing-mariadb-deb-files/">https://mariadb.com/kb/en/installing-mariadb-deb-files/</a></li><li><a href="https://swmlee.com/2020/06/18/technicalessays/mariadbseries/07mariadb-performance-optimization/">https://swmlee.com/2020/06/18/technicalessays/mariadbseries/07mariadb-performance-optimization/</a></li><li><a href="https://www.cnblogs.com/dh17/p/14484423.html">https://www.cnblogs.com/dh17/p/14484423.html</a></li><li><a href="https://stackoverflow.com/a/19101356/6686061">https://stackoverflow.com/a/19101356/6686061</a></li><li><a href="https://github.com/major/MySQLTuner-perl">https://github.com/major/MySQLTuner-perl</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | bash</span><br><span class="line">apt install mariadb-server</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb --now</span><br><span class="line"></span><br><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><p><code>/etc/mysql/mariadb.conf.d/10-custom.cnf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve=ON</span><br><span class="line">performance_schema=ON</span><br><span class="line">innodb_buffer_pool_size=512M</span><br><span class="line">innodb_log_file_size=128M</span><br><span class="line">innodb_log_buffer_size=256M</span><br><span class="line"></span><br><span class="line">slow-query-log=1</span><br><span class="line">slow-query-log-file=/var/log/mysql-slow.log</span><br><span class="line">long_query_time=2</span><br><span class="line"></span><br><span class="line">query_cache_type=ON</span><br><span class="line">query_cache_size=256M</span><br></pre></td></tr></table></figure><h2 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apk add mariadb mariadb-client</span><br><span class="line">/etc/init.d/mariadb setup</span><br><span class="line">rc-service mariadb start</span><br><span class="line">rc-update add mariadb default</span><br><span class="line">mariadb-secure-installation</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `database`;</span><br><span class="line"></span><br><span class="line">CREATE USER &#x27;user&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO user@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27; WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON `database`.* TO &#x27;user&#x27;@&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show status like &#x27;%Qcache%&#x27;;</span><br><span class="line">show variables like &quot;%query_cache%&quot;</span><br></pre></td></tr></table></figure><h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><h2 id="debian-1"><a href="#debian-1" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get install lsb-release curl gpg</span><br><span class="line">curl -fsSL https://packages.redis.io/gpg | gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg</span><br><span class="line"><span class="built_in">chmod</span> 644 /usr/share/keyrings/redis-archive-keyring.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb <span class="subst">$(lsb_release -cs)</span> main&quot;</span> | <span class="built_in">tee</span> /etc/apt/sources.list.d/redis.list</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install redis</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> redis-server --now</span><br></pre></td></tr></table></figure><h1 id="caddy"><a href="#caddy" class="headerlink" title="caddy"></a>caddy</h1><ul><li><a href="https://caddyserver.com/docs/install">https://caddyserver.com/docs/install</a></li><li><a href="https://gist.github.com/ryanburnette/d13575c9ced201e73f8169d3a793c1a3">https://gist.github.com/ryanburnette/d13575c9ced201e73f8169d3a793c1a3</a></li></ul><h2 id="debian-2"><a href="#debian-2" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt install -y debian-keyring debian-archive-keyring apt-transport-https curl</span><br><span class="line">curl -1sLf <span class="string">&#x27;https://dl.cloudsmith.io/public/caddy/stable/gpg.key&#x27;</span> | gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg</span><br><span class="line">curl -1sLf <span class="string">&#x27;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt&#x27;</span> | <span class="built_in">tee</span> /etc/apt/sources.list.d/caddy-stable.list</span><br><span class="line">apt update</span><br><span class="line">apt install caddy</span><br><span class="line">systemctl <span class="built_in">enable</span> caddy --now</span><br></pre></td></tr></table></figure><h2 id="alpine-1"><a href="#alpine-1" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apk add caddy</span><br><span class="line">rc-update add caddy</span><br><span class="line">rc-service caddy restart</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">(cors) &#123;</span><br><span class="line">  @cors_preflight method OPTIONS</span><br><span class="line">  @cors header Origin &#123;args.0&#125;</span><br><span class="line"></span><br><span class="line">  handle @cors_preflight &#123;</span><br><span class="line">    header Access-Control-Allow-Origin &quot;&#123;args.0&#125;&quot;</span><br><span class="line">    header Access-Control-Allow-Methods *</span><br><span class="line">    header Access-Control-Allow-Headers *</span><br><span class="line">    header Access-Control-Max-Age &quot;3600&quot;</span><br><span class="line">    respond &quot;&quot; 204</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handle @cors &#123;</span><br><span class="line">    header Access-Control-Allow-Origin &quot;&#123;args.0&#125;&quot;</span><br><span class="line">    header Access-Control-Expose-Headers *</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">import /data/conf/*.caddy</span><br><span class="line"></span><br><span class="line">:80 &#123;</span><br><span class="line">  root * /usr/share/caddy</span><br><span class="line">  file_server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">domain.com &#123;</span><br><span class="line">  encode zstd gzip</span><br><span class="line">  tls domain@email</span><br><span class="line"></span><br><span class="line">  import cors http://domain.com</span><br><span class="line">  reverse_proxy 127.0.0.1:6001</span><br><span class="line"></span><br><span class="line">  log &#123;</span><br><span class="line">    output file /data/logs/domain.log</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">domain.com:80 &#123;</span><br><span class="line">  encode zstd gzip</span><br><span class="line"></span><br><span class="line">  root * /data/www//dist</span><br><span class="line">  try_files &#123;path&#125; /index.html</span><br><span class="line">  file_server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reverse_proxy 127.0.0.1:4050 &#123;</span><br><span class="line">  header_up X-Real-IP &#123;remote&#125;</span><br><span class="line">  handle_response &#123;</span><br><span class="line">    header Access-Control-Allow-Origin *</span><br><span class="line">    header Access-Control-Allow-Methods *</span><br><span class="line">    header Access-Control-Allow-Headers *</span><br><span class="line">    header Access-Control-Max-Age 3600</span><br><span class="line">    copy_response</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log &#123;</span><br><span class="line">  output file /data/logs/log.log</span><br><span class="line"></span><br><span class="line">  format console &#123;</span><br><span class="line">    time_format wall</span><br><span class="line">    time_local</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handle_path /logs/* &#123;</span><br><span class="line">  root * /data/www/logs/</span><br><span class="line">  file_server browse &#123;</span><br><span class="line">    precompressed zstd br gzip</span><br><span class="line">    hide &quot;.gitignore&quot; &quot;*.json&quot; &quot;supervisord*&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a>supervisor</h1><h2 id="debian-3"><a href="#debian-3" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install supervisor</span><br><span class="line">systemctl <span class="built_in">enable</span> supervisor --now</span><br></pre></td></tr></table></figure><h2 id="alpine-2"><a href="#alpine-2" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apk add supervisor</span><br><span class="line">rc-update add supervisord</span><br><span class="line">rc-service supervisord restart</span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/supervisor.d/</span><br></pre></td></tr></table></figure><h1 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://deb.nodesource.com/setup_lts.x | bash</span><br><span class="line">apt install nodejs</span><br><span class="line"></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line">npm install -g pnpm</span><br></pre></td></tr></table></figure><h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config core.filemode <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">git daemon --verbose --export-all --base-path=.</span><br><span class="line">git <span class="built_in">clone</span> git://127.0.0.1/file file</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> ../base/file file</span><br></pre></td></tr></table></figure><h1 id="pake"><a href="#pake" class="headerlink" title="pake"></a>pake</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pake http://domain.test --name domain --icon favicon_128.ico --fullscreen --always-on-top --installer-language zh-CN</span><br><span class="line">pake http://domain-dev.test --name domain-dev --icon favicon_128.ico --installer-language zh-CN --debug</span><br></pre></td></tr></table></figure><h1 id="php"><a href="#php" class="headerlink" title="php"></a>php</h1><h2 id="frankenphp"><a href="#frankenphp" class="headerlink" title="frankenphp"></a>frankenphp</h2><ul><li><a href="https://github.com/dunglas/frankenphp">https://github.com/dunglas/frankenphp</a></li><li><a href="https://frankenphp.dev/docs/known-issues/#composer-scripts-referencing-php">https://frankenphp.dev/docs/known-issues/#composer-scripts-referencing-php</a></li><li><a href="https://mirrors.tencent.com/help/composer.html">https://mirrors.tencent.com/help/composer.html</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/dunglas/frankenphp/releases/download/v1.3.1/frankenphp-linux-x86_64</span><br><span class="line"><span class="built_in">chmod</span> +x frankenphp-linux-x86_64</span><br><span class="line"><span class="built_in">mv</span> frankenphp-linux-x86_64 /usr/local/bin</span><br></pre></td></tr></table></figure><p><code>/usr/local/bin/php</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line">args=(<span class="string">&quot;<span class="variable">$@</span>&quot;</span>)</span><br><span class="line">index=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$i</span>&quot;</span> == <span class="string">&quot;-d&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">unset</span> <span class="string">&#x27;args[$index]&#x27;</span></span><br><span class="line">        <span class="built_in">unset</span> <span class="string">&#x27;args[$index+1]&#x27;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    index=$((index+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">/usr/local/bin/frankenphp php-cli <span class="variable">$&#123;args[@]&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frankenphp php-cli /usr/local/bin/composer  install --no-dev -vvv</span><br></pre></td></tr></table></figure><h2 id="composer"><a href="#composer" class="headerlink" title="composer"></a>composer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tencent.com/composer/composer.phar</span><br><span class="line"><span class="built_in">mv</span> composer.phar /usr/local/bin/composer</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/composer</span><br><span class="line">composer config -g repos.packagist composer https://mirrors.tencent.com/composer/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install --no-dev -vvv</span><br></pre></td></tr></table></figure><h2 id="laravel"><a href="#laravel" class="headerlink" title="laravel"></a>laravel</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan key:generate</span><br></pre></td></tr></table></figure><h1 id="win"><a href="#win" class="headerlink" title="win"></a>win</h1><ul><li><a href="https://github.com/TGSAN/CMWTAT_Digital_Edition/issues/81">https://github.com/TGSAN/CMWTAT_Digital_Edition/issues/81</a></li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">irm</span> https://massgrave.dev/get | <span class="built_in">iex</span></span><br></pre></td></tr></table></figure><h1 id="alpine-3"><a href="#alpine-3" class="headerlink" title="alpine"></a>alpine</h1><ul><li><a href="https://stackoverflow.com/a/62218241/6686061">https://stackoverflow.com/a/62218241/6686061</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN apk add name --repository=http://dl-cdn.alpinelinux.org/alpine/edge/testing/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apk add openssh</span><br><span class="line">rc-update add sshd</span><br></pre></td></tr></table></figure><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="debian-4"><a href="#debian-4" class="headerlink" title="debian"></a>debian</h3><ul><li><a href="https://docs.docker.com/engine/install/debian/">https://docs.docker.com/engine/install/debian/</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install ca-certificates curl</span><br><span class="line">install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line"><span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \</span></span><br><span class="line"><span class="string">  <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$VERSION_CODENAME</span>&quot;</span>)</span> stable&quot;</span> | \</span><br><span class="line"> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save image</span></span><br><span class="line">docker save puzzle9/image:latest | gzip  &gt; puzzle9_image-latest.tar.gz</span><br><span class="line"><span class="comment"># load image</span></span><br><span class="line">gunzip -c puzzle9_image-latest.tar.gz | docker load</span><br></pre></td></tr></table></figure><h1 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvf file</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…</span></span><br><span class="line">tar -cvf file.tar files</span><br><span class="line">tar -czvf file.tar.gz files</span><br></pre></td></tr></table></figure><h1 id="é™æ€è·¯ç”±"><a href="#é™æ€è·¯ç”±" class="headerlink" title="é™æ€è·¯ç”±"></a>é™æ€è·¯ç”±</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip route add 192.168.21.0/24 via 192.168.2.9</span><br><span class="line">ip route del 192.168.21.0/24 via 192.168.2.9</span><br></pre></td></tr></table></figure><h1 id="ssh-key"><a href="#ssh-key" class="headerlink" title="ssh key"></a>ssh key</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519</span><br></pre></td></tr></table></figure><h1 id="æ¸…ç©ºç½‘å¡å·²è·å–åˆ°çš„ipå¹¶é‡æ–°è·å–"><a href="#æ¸…ç©ºç½‘å¡å·²è·å–åˆ°çš„ipå¹¶é‡æ–°è·å–" class="headerlink" title="æ¸…ç©ºç½‘å¡å·²è·å–åˆ°çš„ipå¹¶é‡æ–°è·å–"></a>æ¸…ç©ºç½‘å¡å·²è·å–åˆ°çš„ipå¹¶é‡æ–°è·å–</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr flush eth0 &amp;&amp; dhclient</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ é™¤éå¯ä»¥å¤åˆ¶</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ ç§äººdns</title>
    <link href="https://puzzle9.github.io/posts/9992adb/"/>
    <id>https://puzzle9.github.io/posts/9992adb/</id>
    <published>2024-10-22T06:06:21.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© è¿˜æœ‰ç‚¹ç”¨å§</p><p>ä¹‹å‰çš„é‚£ä¸ªå†…å­˜ä¸å¤Ÿ å®¹æ˜“é‡å¯<br>å°±æ­å»ºäº† <code>pve</code> è·‘äº† <code>openwrt</code></p><p><img src="/posts/9992adb/index.png"></p><h1 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h1><p>æ–¹æ¡ˆ1: ä¿®æ”¹ <code>openwrt</code> ä¸­çš„ <code>dnsmasq</code> æœåŠ¡å™¨ç«¯å£å·<br>æ–¹æ¡ˆ2: å¼€å¯ <code>openwrt</code> ä¸­çš„ <code>dnsmasq</code> æœåŠ¡å™¨çš„è½¬å‘åŠŸèƒ½</p><p>æœ€ç»ˆé€‰æ‹©äº†æ–¹æ¡ˆ1</p><p>è¿™æ ·å¯ä»¥æ˜¾ç¤ºå‡ºæ¥dnsæŸ¥è¯¢çš„ip</p><h1 id="adguard-å®‰è£…"><a href="#adguard-å®‰è£…" class="headerlink" title="adguard å®‰è£…"></a>adguard å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install adguardhome</span><br></pre></td></tr></table></figure><h1 id="adguard-é…ç½®"><a href="#adguard-é…ç½®" class="headerlink" title="adguard é…ç½®"></a>adguard é…ç½®</h1><h2 id="ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®"><a href="#ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®"></a>ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®</h2><p><code>/etc/config/adguardhome</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config adguardhome config</span><br><span class="line">option workdir /data/adguardhome</span><br></pre></td></tr></table></figure><h2 id="dnsä¸Šæ¸¸"><a href="#dnsä¸Šæ¸¸" class="headerlink" title="dnsä¸Šæ¸¸"></a>dnsä¸Šæ¸¸</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">https://dns.alidns.com/dns-query</span><br><span class="line">https://dns.pub/dns-query</span><br><span class="line">223.5.5.5</span><br><span class="line">114.114.114.114</span><br><span class="line">119.29.29.29</span><br><span class="line">2400:3200::1</span><br><span class="line">2402:4e00::</span><br></pre></td></tr></table></figure><h2 id="dnsé»‘åå•"><a href="#dnsé»‘åå•" class="headerlink" title="dnsé»‘åå•"></a>dnsé»‘åå•</h2><ul><li><code>easylistchina</code>: <code>https://easylist-downloads.adblockplus.org/easylistchina.txt</code></li><li><code>AdGuard DNS filter mirror</code>: <code>https://raw.gitmirror.com/AdguardTeam/HostlistsRegistry/refs/heads/main/assets/filter_1.txt</code></li></ul><h1 id="openwrt-é…ç½®"><a href="#openwrt-é…ç½®" class="headerlink" title="openwrt é…ç½®"></a>openwrt é…ç½®</h1><p>ç”¨äº ä¿®æ”¹ openwrt dnsç«¯å£ æ—  dnsæœåŠ¡å™¨ä¸‹å‘</p><p>ä¿®æ”¹ <code>dhcp</code> æœåŠ¡å™¨é€‰é¡¹ æ‰‹åŠ¨ä¸‹å‘dnsåœ°å€ <code>6,192.168.9.1</code></p><p><img src="/posts/9992adb/openwrt_dhcp_setting.png"></p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://www.right.com.cn/forum/thread-4090928-1-1.html">https://www.right.com.cn/forum/thread-4090928-1-1.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© è¿˜æœ‰ç‚¹ç”¨å§&lt;/p&gt;
&lt;p&gt;ä¹‹å‰çš„é‚£ä¸ªå†…å­˜ä¸å¤Ÿ å®¹æ˜“é‡å¯&lt;br&gt;å°±æ­å»ºäº† &lt;code&gt;pve&lt;/code&gt; è·‘äº† &lt;code&gt;openwrt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/9992adb/index.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;æ–¹æ¡ˆ</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ openwrt</title>
    <link href="https://puzzle9.github.io/posts/fe6d4e/"/>
    <id>https://puzzle9.github.io/posts/fe6d4e/</id>
    <published>2024-10-22T06:06:20.000Z</published>
    <updated>2025-06-10T14:08:13.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© è¿™é‡Œç©ºç©ºçš„</p><h1 id="ddns"><a href="#ddns" class="headerlink" title="ddns"></a>ddns</h1><p>å—¯ å¦‚åŒå­—é¢æ„æ€ä¸€æ ·</p><p>å®‰è£… <code>luci-app-ddns</code> å³å¯æ‹¥æœ‰åŸºæœ¬åŠŸèƒ½</p><ul><li><code>ddns-scripts-dnspod</code> ç”¨çš„ <a href="https://console.dnspod.cn/account/token/token">DNSPod Token</a></li><li><code>ddns-scripts-dnspod-v3</code> ç”¨çš„ <a href="https://console.cloud.tencent.com/cam/capi">è…¾è®¯äº‘ API å¯†é’¥</a></li></ul><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="ç‰ˆæœ¬åŒºåˆ«"><a href="#ç‰ˆæœ¬åŒºåˆ«" class="headerlink" title="ç‰ˆæœ¬åŒºåˆ«"></a>ç‰ˆæœ¬åŒºåˆ«</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">generic-ext4-combined-efi.img.gz # ç±»ä¼¼äºè™šæ‹Ÿæœºç£ç›˜å¯¼å…¥ å¯ç›´æ¥ä½¿ç”¨</span><br><span class="line">generic-ext4-combined.img.gz</span><br><span class="line">generic-ext4-rootfs.img.gz</span><br><span class="line">generic-kernel.bin</span><br><span class="line">generic-squashfs-combined-efi.img.gz # ç±»ä¼¼äºisoé•œåƒ éœ€è¦å®‰è£…åä½¿ç”¨</span><br><span class="line">generic-squashfs-combined.img.gz</span><br><span class="line">generic-squashfs-rootfs.img.gz</span><br><span class="line">rootfs.tar.gz</span><br></pre></td></tr></table></figure><ul><li>efi å¸¦äº†å¼•å¯¼ å¯ä»¥ç›´æ¥å¯åŠ¨</li></ul><h2 id="å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º"><a href="#å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º" class="headerlink" title="å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º"></a>å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º</h2><p>å®‰è£…ç›¸åº”å‹å·é©±åŠ¨ å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">opkg install iwlwifi-firmware-ax210</span><br><span class="line">opkg install kmod-iwlwifi</span><br><span class="line">opkg install wpa-supplicant</span><br></pre></td></tr></table></figure><h2 id="å¤šwan-å¤šlan-åˆ†å¼€ä½¿ç”¨"><a href="#å¤šwan-å¤šlan-åˆ†å¼€ä½¿ç”¨" class="headerlink" title="å¤šwan å¤šlan åˆ†å¼€ä½¿ç”¨"></a>å¤šwan å¤šlan åˆ†å¼€ä½¿ç”¨</h2><p>å¯ä»¥ç”¨ mwan3<br>ç›®å‰åªæå®šäº† ipv4</p><h2 id="lan-å£æ— ç½‘ç»œ"><a href="#lan-å£æ— ç½‘ç»œ" class="headerlink" title="lan å£æ— ç½‘ç»œ"></a><code>lan</code> å£æ— ç½‘ç»œ</h2><p>åœ¨ <code>é˜²ç«å¢™</code> ä¸­ å¼€å¯ <code>wan</code> å£çš„ <code>IP åŠ¨æ€ä¼ªè£…</code></p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© è¿™é‡Œç©ºç©ºçš„&lt;/p&gt;
&lt;h1 id=&quot;ddns&quot;&gt;&lt;a href=&quot;#ddns&quot; class=&quot;headerlink&quot; title=&quot;ddns&quot;&gt;&lt;/a&gt;ddns&lt;/h1&gt;&lt;p&gt;å—¯ å¦‚åŒå­—é¢æ„æ€ä¸€æ ·&lt;/p&gt;
&lt;p&gt;å®‰è£… &lt;code&gt;luci-app-ddns&lt;/code&gt;</summary>
      
    
    
    
    
    <category term="OpenWrt" scheme="https://puzzle9.github.io/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ å®˜æ”¹</title>
    <link href="https://puzzle9.github.io/posts/4ec329a2/"/>
    <id>https://puzzle9.github.io/posts/4ec329a2/</id>
    <published>2024-10-22T06:06:19.000Z</published>
    <updated>2025-06-05T05:57:10.233Z</updated>
    
    <content type="html"><![CDATA[<p>æ„Ÿè§‰é™æ€ipç»‘å®šäºŒæ¬¡ç¡®è®¤ä¸å¥½ç”¨</p><p>é‚£å°± è§£åŒ… æè‡ªå·±çš„è·¯ç”±</p><h1 id="è·å–å¼€å‘åŒ…"><a href="#è·å–å¼€å‘åŒ…" class="headerlink" title="è·å–å¼€å‘åŒ…"></a>è·å–å¼€å‘åŒ…</h1><ul><li><a href="https://miuirom.org/miwifi/xiaomi-router-be3600-2-5g">https://miuirom.org/miwifi/xiaomi-router-be3600-2-5g</a></li></ul><p>è·å¾— <code>miwifi_rd15_firmware_23a4f_1.0.68.bin</code> æ–‡ä»¶</p><h1 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h1><blockquote><p>debian bookworm</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt install binwalk</span><br><span class="line">apt install python3.11-venv</span><br><span class="line"></span><br><span class="line">python3 -m venv venv</span><br><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br><span class="line"></span><br><span class="line">pip install ubi_reader</span><br></pre></td></tr></table></figure><h1 id="è§£åŒ…"><a href="#è§£åŒ…" class="headerlink" title="è§£åŒ…"></a>è§£åŒ…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">(venv) root@localhost:/route_package# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin</span><br><span class="line">â””â”€â”€ venv</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package# ubireader_extract_images -w miwifi_rd15_firmware_23a4f_1.0.68.bin <span class="comment"># ç¬¬ä¸€æ¬¡è§£åŒ…</span></span><br><span class="line">UBI_File Warning: end_offset - start_offset length is not block aligned, could mean missing data. <span class="comment"># è¿™ä¸ªé”™è¯¯å¯ä»¥ä¸ç”¨ç®¡</span></span><br><span class="line">(venv) root@localhost:/route_package# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin</span><br><span class="line">â”œâ”€â”€ ubifs-root</span><br><span class="line">â””â”€â”€ venv</span><br><span class="line"></span><br><span class="line">3 directories, 1 file</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root# tree -L 1</span><br><span class="line">.</span><br><span class="line">â””â”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin <span class="comment"># éœ€è¦å†æ¬¡è§£åŒ…</span></span><br><span class="line"></span><br><span class="line">2 directories, 0 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root# binwalk -Me miwifi_rd15_firmware_23a4f_1.0.68.bin --run-as=root  <span class="comment"># å†æ¬¡è§£åŒ…</span></span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs <span class="comment"># å†…æ ¸æ–‡ä»¶</span></span><br><span class="line">â””â”€â”€ img-2059293214_vol-ubi_rootfs.ubifs <span class="comment"># ç¨‹åºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">1 directory, 2 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# unsquashfs img-2059293214_vol-ubi_rootfs.ubifs <span class="comment"># æå–ç¨‹åºæ–‡ä»¶</span></span><br><span class="line">Parallel unsquashfs: Using 2 processors</span><br><span class="line">5288 inodes (4844 blocks) to write</span><br><span class="line"></span><br><span class="line">[=====================================================================================================================================================================================================================================================================================================================================-] 10132/10132 100%</span><br><span class="line"></span><br><span class="line">created 4779 files</span><br><span class="line">created 302 directories</span><br><span class="line">created 508 symlinks</span><br><span class="line">created 1 device</span><br><span class="line">created 0 fifos</span><br><span class="line">created 0 sockets</span><br><span class="line">created 0 hardlinks</span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â””â”€â”€ squashfs-root <span class="comment"># è¿™æ˜¯ç¨‹åºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">2 directories, 2 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin/squashfs-root# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ data</span><br><span class="line">â”œâ”€â”€ dev</span><br><span class="line">â”œâ”€â”€ etc</span><br><span class="line">â”œâ”€â”€ ini</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”œâ”€â”€ mnt</span><br><span class="line">â”œâ”€â”€ overlay</span><br><span class="line">â”œâ”€â”€ proc</span><br><span class="line">â”œâ”€â”€ <span class="built_in">readonly</span></span><br><span class="line">â”œâ”€â”€ rom</span><br><span class="line">â”œâ”€â”€ root</span><br><span class="line">â”œâ”€â”€ run -&gt; tmp/run</span><br><span class="line">â”œâ”€â”€ sawf</span><br><span class="line">â”œâ”€â”€ sbin</span><br><span class="line">â”œâ”€â”€ sys</span><br><span class="line">â”œâ”€â”€ tmp</span><br><span class="line">â”œâ”€â”€ userdisk</span><br><span class="line">â”œâ”€â”€ usr</span><br><span class="line">â”œâ”€â”€ var -&gt; tmp</span><br><span class="line">â”œâ”€â”€ vendor</span><br><span class="line">â””â”€â”€ www</span><br><span class="line"></span><br><span class="line">22 directories, 1 file</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹å†…å®¹"><a href="#ä¿®æ”¹å†…å®¹" class="headerlink" title="ä¿®æ”¹å†…å®¹"></a>ä¿®æ”¹å†…å®¹</h1><ul><li>ğŸ•Š</li></ul><h1 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h1><p>ç”¨è¿™ä¸ªè„šæœ¬å§ æ–¹ä¾¿</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https://raw.githubusercontent.com/geekman/xqrepack/refs/heads/master/ubinize.sh</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# mksquashfs squashfs-root squashfs-root.bin.new -comp xz -b 256K -no-xattrs <span class="comment"># å°† ç¨‹åºé‡æ–°æ‰“åŒ…ä¸ºbinæ–‡ä»¶</span></span><br><span class="line">Parallel mksquashfs: Using 2 processors</span><br><span class="line">Creating 4.0 filesystem on squashfs-root.bin.new, block size 262144.</span><br><span class="line">[=======================================================================================================================================================================================================================================================================================================================================/] 4844/4844 100%</span><br><span class="line"></span><br><span class="line">Exportable Squashfs 4.0 filesystem, xz compressed, data block size 262144</span><br><span class="line">  compressed data, compressed metadata, compressed fragments,</span><br><span class="line">  no xattrs, compressed ids</span><br><span class="line">  duplicates are removed</span><br><span class="line">Filesystem size 24391.34 Kbytes (23.82 Mbytes)</span><br><span class="line">  31.05% of uncompressed filesystem size (78564.39 Kbytes)</span><br><span class="line">Inode table size 37534 bytes (36.65 Kbytes)</span><br><span class="line">  20.36% of uncompressed inode table size (184374 bytes)</span><br><span class="line">Directory table size 52864 bytes (51.62 Kbytes)</span><br><span class="line">  41.62% of uncompressed directory table size (127006 bytes)</span><br><span class="line">Number of duplicate files found 982</span><br><span class="line">Number of inodes 5590</span><br><span class="line">Number of files 4779</span><br><span class="line">Number of fragments 137</span><br><span class="line">Number of symbolic links 508</span><br><span class="line">Number of device nodes 1</span><br><span class="line">Number of fifo nodes 0</span><br><span class="line">Number of socket nodes 0</span><br><span class="line">Number of directories 302</span><br><span class="line">Number of hard-links 0</span><br><span class="line">Number of ids (unique uids + gids) 1</span><br><span class="line">Number of uids 1</span><br><span class="line">  root (0)</span><br><span class="line">Number of gids 1</span><br><span class="line">  root (0)</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â”œâ”€â”€ squashfs-root</span><br><span class="line">â”œâ”€â”€ squashfs-root.bin.new</span><br><span class="line">â””â”€â”€ ubinize.sh</span><br><span class="line"></span><br><span class="line">2 directories, 4 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# ./ubinize.sh ./img-2059293214_vol-kernel.ubifs ./squashfs-root.bin.new <span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å†…æ ¸æ–‡ä»¶ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¨‹åºæ–‡ä»¶</span></span><br><span class="line">ubinize: volume size was not specified <span class="keyword">in</span> section <span class="string">&quot;kernel&quot;</span>, assume minimum to fit image <span class="string">&quot;./img-2059293214_vol-kernel.ubifs&quot;</span>3174400 bytes (3.0 MiB)</span><br><span class="line">ubinize: volume size was not specified <span class="keyword">in</span> section <span class="string">&quot;rootfs&quot;</span>, assume minimum to fit image <span class="string">&quot;./squashfs-root.bin.new&quot;</span>24977408 bytes (23.8 MiB)</span><br><span class="line"><span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â”œâ”€â”€ r3600-raw-img.bin <span class="comment"># è„šæœ¬å†™æ­»äº†è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">â”œâ”€â”€ squashfs-root</span><br><span class="line">â”œâ”€â”€ squashfs-root.bin.new</span><br><span class="line">â””â”€â”€ ubinize.sh</span><br><span class="line"></span><br><span class="line">2 directories, 5 files</span><br></pre></td></tr></table></figure><h1 id="åˆ·å…¥"><a href="#åˆ·å…¥" class="headerlink" title="åˆ·å…¥"></a>åˆ·å…¥</h1><p>ä½¿ç”¨ <code>scp</code> è¿æ¥åˆ°è·¯ç”±å™¨ å°†æ–°é•œåƒè¿›å…¥ <code>/tmp</code> ç›®å½•</p><p>åœ¨ è·¯ç”±å™¨ä¸­æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">r0_mtd=$(grep <span class="string">&#x27;&quot;rootfs&quot;&#x27;</span>   /proc/mtd | awk -F: <span class="string">&#x27;&#123;print substr($1,4)&#125;&#x27;</span>)</span><br><span class="line">r1_mtd=$(grep <span class="string">&#x27;&quot;rootfs_1&quot;&#x27;</span> /proc/mtd | awk -F: <span class="string">&#x27;&#123;print substr($1,4)&#125;&#x27;</span>)</span><br><span class="line">os_idx=$(nvram get flag_boot_rootfs)</span><br><span class="line">mtd_cur=$((<span class="variable">$r0_mtd</span>+<span class="variable">$&#123;os_idx:-0&#125;</span>))</span><br><span class="line">mtd_nxt=$((<span class="variable">$r0_mtd</span>+<span class="variable">$r1_mtd</span>-<span class="variable">$mtd_cur</span>))</span><br><span class="line">MTD_DEV=/dev/mtd<span class="variable">$mtd_nxt</span></span><br><span class="line"></span><br><span class="line">ubiformat <span class="variable">$MTD_DEV</span> -f r3600-raw-img.bin</span><br><span class="line"></span><br><span class="line">nvram <span class="built_in">set</span> flag_ota_reboot=1</span><br><span class="line">nvram commit</span><br><span class="line"></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h1 id="æ•‘ç –"><a href="#æ•‘ç –" class="headerlink" title="æ•‘ç –"></a>æ•‘ç –</h1><ul><li><a href="https://www1.miwifi.com/miwifi_download.html">https://www1.miwifi.com/miwifi_download.html</a></li></ul><p>ä¸‹è½½ å°ç±³è·¯ç”±å™¨ä¿®å¤å·¥å…·</p><p>é€‰æ‹©ç¬¬ä¸€æ­¥ä¸‹è½½çš„å®˜æ–¹é•œåƒç­‰å¾…ç»“æœçš„å‘ç”Ÿå°±è¡Œ</p><h1 id="æˆæœå±•ç¤º"><a href="#æˆæœå±•ç¤º" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@XiaoQiang:~# netstat -nlp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       <span class="keyword">in</span> out PID/Program name</span><br><span class="line">tcp        0      0 127.0.0.1:784           0.0.0.0:*               LISTEN       0 0 9150/tbusd</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN       0 0 6008/nginx.conf -g</span><br><span class="line">tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN       0 0 9209/dnsmasq</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN       0 0 9038/dropbear</span><br><span class="line">tcp        0      0 127.0.0.1:8920          0.0.0.0:*               LISTEN       0 0 6026/fcgi-cgi</span><br><span class="line">tcp        0      0 127.0.0.1:6010          0.0.0.0:*               LISTEN       0 0 24201/dropbear</span><br><span class="line">tcp        0      0 :::80                   :::*                    LISTEN       0 0 6008/nginx.conf -g</span><br><span class="line">tcp        0      0 ::1:53                  :::*                    LISTEN       0 0 9209/dnsmasq</span><br><span class="line">tcp        0      0 :::22                   :::*                    LISTEN       0 0 9038/dropbear</span><br><span class="line">udp        0      0 127.0.0.1:514           0.0.0.0:*                            0 0 10053/syslog-ng</span><br><span class="line">udp        0      0 127.0.0.1:53            0.0.0.0:*                            0 0 9209/dnsmasq</span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                            0 0 9209/dnsmasq</span><br><span class="line">udp        0      0 127.0.0.1:9900          0.0.0.0:*                            0 0 6301/hostapd</span><br><span class="line">udp        0      0 127.0.0.1:9902          0.0.0.0:*                            0 0 6300/wpa_supplicant</span><br><span class="line">udp        0      0 :::546                  :::*                                 0 0 29454/odhcp6c</span><br><span class="line">udp        0      0 :::547                  :::*                                 0 0 6190/odhcpd</span><br><span class="line">udp        0      0 ::1:53                  :::*                                 0 0 9209/dnsmasq</span><br><span class="line">Active UNIX domain sockets (only servers)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node PID/Program name    Path</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING      13312 10053/syslog-ng     /var/syslog-ng.ctl</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING       8234 526/ubusd           /var/run/ubus.sock</span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="ä¿®æ”¹XiaoQiangé»˜è®¤dns"><a href="#ä¿®æ”¹XiaoQiangé»˜è®¤dns" class="headerlink" title="ä¿®æ”¹XiaoQiangé»˜è®¤dns"></a>ä¿®æ”¹<code>XiaoQiang</code>é»˜è®¤dns</h2><p><code>/etc/config/dhcp</code> æ–‡ä»¶ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">config dnsmasq</span><br><span class="line">        ...</span><br><span class="line">        list server &#x27;192.168.2.9&#x27;</span><br><span class="line"></span><br><span class="line">config dhcp &#x27;lan&#x27;</span><br><span class="line">        ...</span><br><span class="line">        option dns1 &#x27;192.168.2.9&#x27;</span><br><span class="line">        option dns2 &#x27;223.5.5.5&#x27;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://v2ex.com/t/746094">https://v2ex.com/t/746094</a></li><li><a href="https://www.right.com.cn/forum/thread-218346-1-1.html">https://www.right.com.cn/forum/thread-218346-1-1.html</a></li><li><a href="https://github.com/geekman/xqrepack">https://github.com/geekman/xqrepack</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ„Ÿè§‰é™æ€ipç»‘å®šäºŒæ¬¡ç¡®è®¤ä¸å¥½ç”¨&lt;/p&gt;
&lt;p&gt;é‚£å°± è§£åŒ… æè‡ªå·±çš„è·¯ç”±&lt;/p&gt;
&lt;h1 id=&quot;è·å–å¼€å‘åŒ…&quot;&gt;&lt;a href=&quot;#è·å–å¼€å‘åŒ…&quot; class=&quot;headerlink&quot; title=&quot;è·å–å¼€å‘åŒ…&quot;&gt;&lt;/a&gt;è·å–å¼€å‘åŒ…&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ å¼€ç¯‡</title>
    <link href="https://puzzle9.github.io/posts/2195506d/"/>
    <id>https://puzzle9.github.io/posts/2195506d/</id>
    <published>2024-10-22T06:06:18.000Z</published>
    <updated>2025-06-10T14:01:00.645Z</updated>
    
    <content type="html"><![CDATA[<p>æ© æ— èŠçš„äº§ç‰©</p><h1 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h1><p>å…¥æ‰‹äº† <code>be3600</code></p><p>å‘ç°æ²¡åŠæ³•è®¾ç½®<code>é™æ€è·¯ç”±</code></p><p>é‚£ ä¸èƒ½å°±è¿™ä¹ˆæ”¾å¼ƒäº†</p><h1 id="å¼€-ssh"><a href="#å¼€-ssh" class="headerlink" title="å¼€ ssh"></a>å¼€ <code>ssh</code></h1><p>æ„Ÿè°¢ <code>æ©å±±</code> çš„å¤§ä½¬ä»¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Anvram%20set%20ssh_en%3D1&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Anvram%20commit&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Ased%20-i%20&#x27;s%2Fchannel%3D.*%2Fchannel%3D%22debug%22%2Fg&#x27;%20%2Fetc%2Finit.d%2Fdropbear&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0A%2Fetc%2Finit.d%2Fdropbear%20start&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>è®¡ç®— <code>ssh</code> å¯†ç  æ³¨æ„ <code>sn</code> å¤§å°å†™é—®é¢˜</p><ul><li><a href="https://miwifi.dev/ssh">https://miwifi.dev/ssh</a></li></ul><h1 id="å¼€å¯é™æ€è·¯ç”±"><a href="#å¼€å¯é™æ€è·¯ç”±" class="headerlink" title="å¼€å¯é™æ€è·¯ç”±"></a>å¼€å¯é™æ€è·¯ç”±</h1><h2 id="ä¿®æ”¹é˜²ç«å¢™"><a href="#ä¿®æ”¹é˜²ç«å¢™" class="headerlink" title="ä¿®æ”¹é˜²ç«å¢™"></a>ä¿®æ”¹é˜²ç«å¢™</h2><ul><li><code>/etc/config/firewall</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">config defaults</span><br><span class="line">option syn_flood &#x27;0&#x27;</span><br><span class="line">option input &#x27;ACCEPT&#x27;</span><br><span class="line">option output &#x27;ACCEPT&#x27;</span><br><span class="line">option forward &#x27;REJECT&#x27; # æ”¹æˆ ACCEPT</span><br><span class="line">option drop_invalid &#x27;1&#x27; # æ”¹æˆ 0</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">option name &#x27;lan&#x27;</span><br><span class="line">option network &#x27;lan&#x27;</span><br><span class="line">option input &#x27;ACCEPT&#x27;</span><br><span class="line">option output &#x27;ACCEPT&#x27;</span><br><span class="line">option forward &#x27;REJECT&#x27; # æ”¹æˆ ACCEPT</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®é™æ€è·¯ç”±"><a href="#è®¾ç½®é™æ€è·¯ç”±" class="headerlink" title="è®¾ç½®é™æ€è·¯ç”±"></a>è®¾ç½®é™æ€è·¯ç”±</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uci add network route</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].interface=lan</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].target=192.168.11.0</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].netmask=255.255.255.0</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].gateway=192.168.2.9</span><br><span class="line">uci commit network</span><br><span class="line"></span><br><span class="line">uci show network</span><br></pre></td></tr></table></figure><p>é‡å¯åå°±å¯ä»¥ç”Ÿæ•ˆäº†</p><h1 id="ä¿®æ”¹-ipv6-å­ç½‘æ©ç "><a href="#ä¿®æ”¹-ipv6-å­ç½‘æ©ç " class="headerlink" title="ä¿®æ”¹ ipv6 å­ç½‘æ©ç "></a>ä¿®æ”¹ <code>ipv6</code> å­ç½‘æ©ç </h1><ul><li>è¦è¯´æœ‰ä»€ä¹ˆç”¨ æˆ‘æš‚æ—¶æƒ³ä¸åˆ°</li></ul><p>å…ˆè¿è¡Œ <code>ifstatus wan6</code> çœ‹ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;ipv6-prefix&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2409:aaaa:bbbb:cccc::&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;mask&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;preferred&quot;</span><span class="punctuation">:</span> <span class="number">152473</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;valid&quot;</span><span class="punctuation">:</span> <span class="number">238873</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;class&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wan6&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;assigned&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;lan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2409:aaaa:bbbb:cccc::&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;mask&quot;</span><span class="punctuation">:</span> <span class="number">64</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>å‘ç°ç»™çš„æ˜¯ <code>60</code> çš„å­ç½‘æ©ç </p><p>è¿™è¦æ˜¯æŒ‰ç…§ <code>64</code> åˆ†å¯æ˜¯å¯ä»¥åˆ† <code>16</code> ä¸ªå­ç½‘å‘¢</p><p>ä¿®æ”¹ <code>/etc/config/network</code> å°† <code>option ip6assign &#39;64&#39;</code> æ”¹ä¸º <code>option ip6assign &#39;60&#39;</code> å³å¯</p><p>è¿™ä¸‹ äºŒçº§è·¯ç”±ä¾¿å¯è·å–åˆ° <code>IPv6-PD</code> å•¦</p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://www.right.com.cn/forum/thread-8321180-1-1.html">https://www.right.com.cn/forum/thread-8321180-1-1.html</a></li><li><a href="https://github.com/openwrt-xiaomi/xmir-patcher/issues/19">https://github.com/openwrt-xiaomi/xmir-patcher/issues/19</a></li><li><a href="https://www.right.com.cn/forum/forum.php?mod=redirect&goto=findpost&ptid=6601141&pid=14997935">https://www.right.com.cn/forum/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=6601141&amp;pid=14997935</a></li><li><a href="https://www.right.com.cn/forum/thread-7673021-1-1.html">https://www.right.com.cn/forum/thread-7673021-1-1.html</a></li><li><a href="https://www.right.com.cn/forum/thread-4090898-1-1.html">https://www.right.com.cn/forum/thread-4090898-1-1.html</a></li><li><a href="https://zhuanlan.zhihu.com/p/362151770">https://zhuanlan.zhihu.com/p/362151770</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© æ— èŠçš„äº§ç‰©&lt;/p&gt;
&lt;h1 id=&quot;å‰ç½®æ¡ä»¶&quot;&gt;&lt;a href=&quot;#å‰ç½®æ¡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å‰ç½®æ¡ä»¶&quot;&gt;&lt;/a&gt;å‰ç½®æ¡ä»¶&lt;/h1&gt;&lt;p&gt;å…¥æ‰‹äº† &lt;code&gt;be3600&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°æ²¡åŠæ³•è®¾ç½®&lt;code&gt;é™æ€è·¯</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
</feed>
