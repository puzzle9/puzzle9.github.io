<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>puzzle9 blog</title>
  
  <subtitle>I exist because you need me.</subtitle>
  <link href="https://puzzle9.github.io/atom.xml" rel="self"/>
  
  <link href="https://puzzle9.github.io/"/>
  <updated>2025-06-07T05:10:16.978Z</updated>
  <id>https://puzzle9.github.io/</id>
  
  <author>
    <name>puzzle9</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>pve çš„ OpenWrt</title>
    <link href="https://puzzle9.github.io/posts/73ac8ef6/"/>
    <id>https://puzzle9.github.io/posts/73ac8ef6/</id>
    <published>2025-06-07T04:27:01.000Z</published>
    <updated>2025-06-07T05:10:16.978Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç½®å·¥ä½œ"><a href="#å‰ç½®å·¥ä½œ" class="headerlink" title="å‰ç½®å·¥ä½œ"></a>å‰ç½®å·¥ä½œ</h1><p><code>x86</code> æ¶æ„ä¸­ å…ˆä¸‹è½½æœ€æ–°çš„ <a href="https://downloads.openwrt.org/releases/24.10.1/targets/x86/64/openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img.gz"><code>generic-ext4-combined-efi.img.gz</code></a></p><p>ä¸Šä¼ åˆ° <code>pve</code> çš„ <code>tmp</code> ç›®å½•</p><p>è§£å‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/wrt</span><br><span class="line">gzip -d openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img.gz</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰é•œåƒ"><a href="#è‡ªå®šä¹‰é•œåƒ" class="headerlink" title="è‡ªå®šä¹‰é•œåƒ"></a>è‡ªå®šä¹‰é•œåƒ</h2><p>å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„ <code>raw</code> é•œåƒæ–‡ä»¶<br>å†æŠŠç°æœ‰çš„ä¸œè¥¿ åœ¨å¤åˆ¶è¿›å»çš„åŒæ—¶å»ä¿®æ”¹æ–‡ä»¶ è¾¾åˆ°è‡ªå®šä¹‰çš„ç›®çš„</p><h3 id="åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½"><a href="#åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½" class="headerlink" title="åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½"></a>åˆ›å»ºç©ºçš„é•œåƒå¹¶åˆ†åŒºæŒ‚è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -f raw openwrt_new.raw 1G</span><br><span class="line">losetup /dev/loop2 openwrt_new.raw</span><br></pre></td></tr></table></figure><p>åˆ†åŒºæ—¶å€™ ä¸€ä¸ª <code>efi</code> ä¸€ä¸ª <code>data</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/loop2</span><br><span class="line">kpartx -a /dev/loop2</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–åˆ†åŒºå¹¶æŒ‚è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -n EFI -F16 /dev/mapper/loop2p1</span><br><span class="line">mkfs.ext4 -L OpenWrt /dev/mapper/loop2p2</span><br><span class="line"></span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop2p1 /tmp/wrt/new/boot</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop2p2 /tmp/wrt/new/data</span><br></pre></td></tr></table></figure><h3 id="æŒ‚è½½ç°æœ‰é•œåƒ"><a href="#æŒ‚è½½ç°æœ‰é•œåƒ" class="headerlink" title="æŒ‚è½½ç°æœ‰é•œåƒ"></a>æŒ‚è½½ç°æœ‰é•œåƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">losetup /dev/loop4 openwrt-24.10.1-x86-64-generic-ext4-combined-efi.img</span><br><span class="line">kpartx -a /dev/loop4</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop4p1 /tmp/wrt/old/boot</span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/mapper/loop4p2 /tmp/wrt/old/data</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ"><a href="#å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ" class="headerlink" title="å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ"></a>å¤åˆ¶æ—§çš„æ–‡ä»¶åˆ°æ–°ç³»ç»Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS /tmp/wrt/old/boot/ /tmp/wrt/new/boot/</span><br><span class="line">rsync -qaHAXS /tmp/wrt/old/data/ /tmp/wrt/new/data/</span><br></pre></td></tr></table></figure><h4 id="ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼"><a href="#ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼" class="headerlink" title="ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼"></a>ä¿®å¤æ–°ç³»ç»Ÿå¼•å¯¼</h4><p>ç¼–è¾‘ <code>/tmp/wrt/new/boot/boot/grub/grub.cfg</code> å¦‚ä¸‹</p><p>ä¿®æ”¹çš„æœ‰</p><ul><li><code>PARTUUID</code> <code>d9d3bec6-66ad-6945-acc6-cce5071fce8f</code> ç”¨ <code>blkid</code> è·å–åˆ°çš„ <code>/dev/mapper/loop2p2</code> çš„å€¼</li><li><code>timeout</code> ç­‰å¾…æ—¶é—´</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">serial --unit=0 --speed=115200 --word=8 --parity=no --stop=1 --rtscts=off</span><br><span class="line">terminal_input console serial; terminal_output console serial</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> default=<span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="built_in">timeout</span>=<span class="string">&quot;1&quot;</span></span><br><span class="line">search -l kernel -s root</span><br><span class="line"></span><br><span class="line">menuentry <span class="string">&quot;OpenWrt&quot;</span> &#123;</span><br><span class="line">        linux /boot/vmlinuz root=PARTUUID=d9d3bec6-66ad-6945-acc6-cce5071fce8f rootwait  console=tty1 console=ttyS0,115200n8 noinitrd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…³é—­wané˜²ç«å¢™"><a href="#å…³é—­wané˜²ç«å¢™" class="headerlink" title="å…³é—­wané˜²ç«å¢™"></a>å…³é—­<code>wan</code>é˜²ç«å¢™</h4><p>ç¼–è¾‘ <code>/tmp/wrt/new/data/etc/config/firewall</code></p><p>å°† é‡Œé¢çš„ <code>REJECT</code> æ”¹ä¸º <code>ACCEPT</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">config defaults</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line">        option synflood_protect &#x27;1&#x27;</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">        option name &#x27;lan&#x27;</span><br><span class="line">        list network &#x27;lan&#x27;</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">        option name &#x27;wan&#x27;</span><br><span class="line">        list network &#x27;wan&#x27;</span><br><span class="line">        list network &#x27;wan6&#x27;</span><br><span class="line">        option input &#x27;ACCEPT&#x27;</span><br><span class="line">        option output &#x27;ACCEPT&#x27;</span><br><span class="line">        option forward &#x27;ACCEPT&#x27;</span><br><span class="line">        option mtu_fix &#x27;1&#x27;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹ç½‘ç»œé…ç½®"><a href="#ä¿®æ”¹ç½‘ç»œé…ç½®" class="headerlink" title="ä¿®æ”¹ç½‘ç»œé…ç½®"></a>ä¿®æ”¹ç½‘ç»œé…ç½®</h4><p><code>/etc/config/network</code> è¿™ç©æ„è²Œä¼¼å¯åŠ¨æˆåŠŸåæ‰æœ‰</p><p>ç­‰è¿›å…¥åç”¨ç»ˆç«¯æ”¹å§</p><h3 id="å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹"><a href="#å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹" class="headerlink" title="å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹"></a>å–æ¶ˆæŒ‚è½½å®Œæˆä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">umount /tmp/wrt/new/boot/</span><br><span class="line">umount /tmp/wrt/new/data/</span><br><span class="line">kpartx -d /dev/loop2</span><br><span class="line">losetup -d /dev/loop2</span><br><span class="line"></span><br><span class="line">umount /tmp/wrt/old/boot/</span><br><span class="line">umount /tmp/wrt/old/data/</span><br><span class="line">kpartx -d /dev/loop4</span><br><span class="line">losetup -d /dev/loop4</span><br></pre></td></tr></table></figure><h1 id="å¯¼å…¥é•œåƒ"><a href="#å¯¼å…¥é•œåƒ" class="headerlink" title="å¯¼å…¥é•œåƒ"></a>å¯¼å…¥é•œåƒ</h1><p><code>pve</code> å°†æ”¹ä¸º <code>uefi</code> å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qm disk import [openwrt vm <span class="built_in">id</span>] /tmp/wrt/openwrt_new.raw <span class="built_in">local</span></span><br></pre></td></tr></table></figure><h1 id="pve-ip-è®¾ç½®"><a href="#pve-ip-è®¾ç½®" class="headerlink" title="pve ip è®¾ç½®"></a><code>pve</code> <code>ip</code> è®¾ç½®</h1><p>ğŸ•Š</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://openwrt.org/docs/guide-user/installation/openwrt_x86">https://openwrt.org/docs/guide-user/installation/openwrt_x86</a></li><li><a href="https://xotechy.com/blog/mount-a-raw-qemu-image-file-to-your-linux-system/">https://xotechy.com/blog/mount-a-raw-qemu-image-file-to-your-linux-system/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰ç½®å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‰ç½®å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‰ç½®å·¥ä½œ&quot;&gt;&lt;/a&gt;å‰ç½®å·¥ä½œ&lt;/h1&gt;&lt;p&gt;&lt;code&gt;x86&lt;/code&gt; æ¶æ„ä¸­ å…ˆä¸‹è½½æœ€æ–°çš„ &lt;a href=&quot;https://downloads.openwrt</summary>
      
    
    
    
    
    <category term="pve" scheme="https://puzzle9.github.io/tags/pve/"/>
    
    <category term="OpenWrt" scheme="https://puzzle9.github.io/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>pve è‡ªå®šä¹‰åˆ†åŒº</title>
    <link href="https://puzzle9.github.io/posts/f3bcfc95/"/>
    <id>https://puzzle9.github.io/posts/f3bcfc95/</id>
    <published>2025-06-05T12:16:49.000Z</published>
    <updated>2025-06-05T13:02:01.223Z</updated>
    
    <content type="html"><![CDATA[<p>é€šå¸¸ <code>pve</code> å®‰è£…å‡ºæ¥çš„æ˜¯ <code>lvm</code> ä½œä¸ºå…¼å®¹å±‚ ä¸Šé¢å†æ˜¯å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>å¯æ˜¯å§ å•ç¡¬ç›˜ æˆ‘ç”¨ä¸åˆ°</p><p>æ˜¯çš„ æˆ‘ä¸å–œæ¬¢è¿™ç§åˆ†åŒºæ–¹æ¡ˆ</p><p>å¯æ˜¯ è¿™æ˜¯ <code>linux</code> å•Š é‚£ä¸éƒ½æ˜¯é€šç”¨çš„</p><p>å¼€æ</p><blockquote><p>å¤‡ä»½ å†æ¢å¤ å°±è¡Œ</p></blockquote><p>å…ˆé‡‡ç”¨å®˜æ–¹æ­£å¸¸çš„å®‰è£…æµç¨‹ è£…å®Œåè¿›å…¥ <code>livecd</code> æ¨è <a href="https://archlinux.org/download/"><code>archlinux</code></a> çš„</p><h1 id="å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº"><a href="#å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº" class="headerlink" title="å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº"></a>å…ˆæŒ‚è½½ç³»ç»Ÿåˆ†åŒº</h1><h2 id="æ˜¯-lvm-æ ¼å¼çš„"><a href="#æ˜¯-lvm-æ ¼å¼çš„" class="headerlink" title="æ˜¯ lvm æ ¼å¼çš„"></a>æ˜¯ <a href="https://superuser.com/questions/116617/how-to-mount-an-lvm-volume"><code>lvm</code></a> æ ¼å¼çš„</h2><p>å…ˆ ä½¿ç”¨ <code>lvscan</code> ç½—åˆ—å‡ºæ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@pve:/tmp# lvscan</span><br><span class="line">  ACTIVE            <span class="string">&#x27;/dev/pve-OLD-A39EDD75/root&#x27;</span> [446.00 GiB] inherit</span><br></pre></td></tr></table></figure><p>å†ç›´æ¥æŒ‚è½½å°±è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/mapper/pve--OLD--A39EDD75-root olda/</span><br></pre></td></tr></table></figure><h2 id="æ˜¯-btrfs-æ ¼å¼çš„"><a href="#æ˜¯-btrfs-æ ¼å¼çš„" class="headerlink" title="æ˜¯ btrfs æ ¼å¼çš„"></a>æ˜¯ <code>btrfs</code> æ ¼å¼çš„</h2><p>ç›´æ¥æŒ‚è½½åˆ†åŒºå°±è¡Œ é»˜è®¤å®‰è£…çš„æ˜¯ä¸å¸¦å­å·çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p3 olda/</span><br></pre></td></tr></table></figure><h1 id="å¤‡ä»½æ–‡ä»¶"><a href="#å¤‡ä»½æ–‡ä»¶" class="headerlink" title="å¤‡ä»½æ–‡ä»¶"></a>å¤‡ä»½æ–‡ä»¶</h1><h2 id="ä½¿ç”¨-rsync"><a href="#ä½¿ç”¨-rsync" class="headerlink" title="ä½¿ç”¨ rsync"></a>ä½¿ç”¨ <a href="https://wiki.archlinux.org/title/Rsync#File_system_cloning"><code>rsync</code></a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS olda/ /tmp/bak/</span><br></pre></td></tr></table></figure><h1 id="é‡æ–°åˆ†åŒº"><a href="#é‡æ–°åˆ†åŒº" class="headerlink" title="é‡æ–°åˆ†åŒº"></a>é‡æ–°åˆ†åŒº</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/nvme0n1</span><br></pre></td></tr></table></figure><p>åˆ†ä¸¤ä¸ª</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Device           Start       End   Sectors  Size Type</span><br><span class="line">/dev/nvme0n1p1    2048   2099199   2097152    1G EFI System</span><br><span class="line">/dev/nvme0n1p2 2099200 966789119 964689920  460G Linux filesystem</span><br></pre></td></tr></table></figure><p>å†æ ¼å¼åŒ–ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -n EFI -F32 /dev/nvme0n1p1</span><br><span class="line">mkfs.btrfs -L PVE /dev/nvme0n1p2</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå­å·"><a href="#åˆ›å»ºå­å·" class="headerlink" title="åˆ›å»ºå­å·"></a>åˆ›å»ºå­å·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p2 /tmp/newbtrfs</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp/newbtrfs</span><br><span class="line"><span class="comment"># å°±è¿™ä¹ˆåˆ›å»ºä¸‹å»</span></span><br><span class="line">btrfs subvolume create @</span><br></pre></td></tr></table></figure><p>å¤§æ¦‚æœ‰è¿™äº›å­å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@pve:/tmp/newbtrfs# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ @</span><br><span class="line">â”œâ”€â”€ @pvevz</span><br><span class="line">â”œâ”€â”€ @root</span><br><span class="line">â”œâ”€â”€ @var_cache</span><br><span class="line">â”œâ”€â”€ @var_log</span><br><span class="line">â””â”€â”€ @var_tmp</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½æ–°åˆ†åŒº"><a href="#æŒ‚è½½æ–°åˆ†åŒº" class="headerlink" title="æŒ‚è½½æ–°åˆ†åŒº"></a>æŒ‚è½½æ–°åˆ†åŒº</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t btrfs -o subvol=/@,compress=zstd /dev/nvme0n1p2 /tmp/newpve</span><br></pre></td></tr></table></figure><h1 id="æ¢å¤å¤‡ä»½"><a href="#æ¢å¤å¤‡ä»½" class="headerlink" title="æ¢å¤å¤‡ä»½"></a>æ¢å¤å¤‡ä»½</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -qaHAXS /tmp/bak/ /tmp/newpve/</span><br></pre></td></tr></table></figure><h1 id="ä¿®å¤å¼•å¯¼"><a href="#ä¿®å¤å¼•å¯¼" class="headerlink" title="ä¿®å¤å¼•å¯¼"></a>ä¿®å¤å¼•å¯¼</h1><p>é»˜è®¤ç”¨çš„ <code>grub2</code> è¿›è¡Œå¼•å¯¼çš„</p><p>å‚è€ƒ <a href="https://pve.proxmox.com/wiki/Host_Bootloader"><code>proxmox-boot-tool</code></a> è¿™ä¸ª</p><p>è€Œæˆ‘ ç”¨çš„ <code>systemd-boot</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /tmp/newpve/</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>/etc/kernel/cmdline</code> åŠ å…¥å­å·å¯åŠ¨é¡¹ <code>rootflags=subvol=@</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root=UUID=eb239303-5067-4e32-add8-55fd643059ac rootflags=subvol=@ rw</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>proxmox-boot-tool clean</code> åˆ é™¤ <code>/etc/kernel/proxmox-boot-uuids</code> ä¸­æ—§çš„ <code>esp</code> <code>uuid</code></p><p>è¿è¡Œ <code>proxmox-boot-tool init /dev/nvme0n1p1</code> è‡ªåŠ¨å¤„ç† <code>efi</code> å¼•å¯¼ç­‰</p><p>è‡³æ­¤ <code>reboot</code> ååº”è¯¥å¯ä»¥è¿›å…¥ç³»ç»Ÿäº†</p><h1 id="å…³é—­-grub-æç¤ºä¿¡æ¯"><a href="#å…³é—­-grub-æç¤ºä¿¡æ¯" class="headerlink" title="å…³é—­ grub æç¤ºä¿¡æ¯"></a>å…³é—­ <code>grub</code> æç¤ºä¿¡æ¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Removable bootloader found at <span class="string">&#x27;/boot/efi/EFI/BOOT/BOOTX64.efi&#x27;</span>, but GRUB packages not <span class="built_in">set</span> up to update it!</span><br><span class="line">Run the following <span class="built_in">command</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;grub-efi-amd64 grub2/force_efi_extra_removable boolean true&#x27;</span> | debconf-set-selections -v -u</span><br><span class="line"></span><br><span class="line">Then reinstall GRUB with <span class="string">&#x27;apt install --reinstall grub-efi-amd64&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿›å…¥ç³»ç»Ÿå æ‰§è¡Œ <code>echo &#39;grub-efi-amd64 grub2/force_efi_extra_removable boolean true&#39; | debconf-set-selections -v -u</code></p><p>ç½®äºèƒ½ä¸èƒ½å¸è½½ <code>grub</code> è¿™ä»¶äº‹æƒ…å‘¢ å‘ç°æ˜¯ä¸è¡Œçš„</p><p>ä½†æ˜¯å¯ä»¥å¸è½½ <code>memtest86+</code></p><h1 id="å¸è½½æ—§å†…æ ¸"><a href="#å¸è½½æ—§å†…æ ¸" class="headerlink" title="å¸è½½æ—§å†…æ ¸"></a>å¸è½½æ—§å†…æ ¸</h1><p>ä»–æ˜¯ <code>proxmox-kernel-</code> å¼€å¤´çš„åŒ…</p><p>ç›´æ¥ <code>apt purge proxmox-kernel-6.8.12-9-pve</code> å°±è¡Œ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é€šå¸¸ &lt;code&gt;pve&lt;/code&gt; å®‰è£…å‡ºæ¥çš„æ˜¯ &lt;code&gt;lvm&lt;/code&gt; ä½œä¸ºå…¼å®¹å±‚ ä¸Šé¢å†æ˜¯å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;å¯æ˜¯å§ å•ç¡¬ç›˜ æˆ‘ç”¨ä¸åˆ°&lt;/p&gt;
&lt;p&gt;æ˜¯çš„ æˆ‘ä¸å–œæ¬¢è¿™ç§åˆ†åŒºæ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;å¯æ˜¯ è¿™æ˜¯ &lt;code&gt;linux&lt;/code&gt; å•Š </summary>
      
    
    
    
    
    <category term="pve" scheme="https://puzzle9.github.io/tags/pve/"/>
    
  </entry>
  
  <entry>
    <title>é•¿å¤§</title>
    <link href="https://puzzle9.github.io/posts/f18e40a8/"/>
    <id>https://puzzle9.github.io/posts/f18e40a8/</id>
    <published>2025-05-24T10:02:24.000Z</published>
    <updated>2025-05-24T10:07:17.731Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>éƒ½è¯´ è¢«ä¿æŠ¤çš„å¤ªå¥½çš„äººæ˜¯æ— æ³•æˆé•¿çš„</p></blockquote><p>é‚£ è‡ªå·±æ”¾å¼ƒæˆé•¿å‘¢</p><p>å—¯ ? !!</p><p>è½¬çœ¼é—´ å·²ç» <code>25å²4æœˆ</code> å•¦</p><p>å‘¨å›´çš„äºº ç»“å©šçš„ç»“å©š æ‹çˆ±çš„æ‹çˆ± ç»“å©šçš„ç»“å©š ç”Ÿå¨ƒçš„ç”Ÿå¨ƒ</p><p>æ„è¯†åˆ° è‡ªå·±æ˜¯æ™®é€šäºº æ²¡æœ‰é‚£é€†å¤©çš„ç³»ç»Ÿå</p><p>å†åŠ ä¸Šä¸€ä¸¢ä¸¢å€ºåŠ¡</p><p>ç¬é—´è§‰å¾— å¾—é•¿å¤§äº†</p>]]></content>
    
    
    <summary type="html">ç¢ç¢å¿µ</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Android TV ä¼˜åŒ–</title>
    <link href="https://puzzle9.github.io/posts/71fefb90/"/>
    <id>https://puzzle9.github.io/posts/71fefb90/</id>
    <published>2025-05-20T05:35:10.000Z</published>
    <updated>2025-05-20T06:16:17.445Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ä¸ª å·²ç» æœ‰ å¥½å¤šå¹´ å†å²çš„ <code>55</code>å¯¸ çš„ å¤§ç”µè§†</p></blockquote><p>é‚£æ—¶å€™çš„çƒ­æ’­å‰§è¿˜æ˜¯<a href="https://www.themoviedb.org/tv/60957"><code>é‚£ä¸ªç”·äºº</code></a></p><h1 id="åˆ·æœº"><a href="#åˆ·æœº" class="headerlink" title="åˆ·æœº"></a>åˆ·æœº</h1><p>ä» <a href="https://www.znds.com/tv-617019-1-1.html">https://www.znds.com/tv-617019-1-1.html</a> ä¸‹è½½ <code>8H73_M5_V016.011.171_9_5.5.zip</code> åæ”¾åˆ° <code>fat32</code>æ ¼å¼çš„<code>uç›˜</code>æ ¹ç›®å½•</p><p>é•¿æŒ‰ç”µæºé”® ç­‰å¾…äº®å±ååˆå†æ¬¡äº®å±æ—¶æ¾å¼€</p><p>è¿›å…¥ <code>recovery</code> æ¨¡å¼ å…ˆ <code>åŒæ¸…</code> å† <code>å‡çº§</code> å³å¯</p><h1 id="é¦–æ¬¡å¼€å¯-adb"><a href="#é¦–æ¬¡å¼€å¯-adb" class="headerlink" title="é¦–æ¬¡å¼€å¯ adb"></a>é¦–æ¬¡å¼€å¯ <code>adb</code></h1><p>åœ¨ è®¾ç½® çš„ å…³äºç³»ç»Ÿ é¡µé¢</p><p>æŒ‰ <code>â¬†ï¸â¬†ï¸â¬‡ï¸â¬‡ï¸â¬…ï¸â¡ï¸â¬…ï¸â¡ï¸</code> è¿›å…¥ <code>å·¥å‚æ¨¡å¼</code></p><p>é‡Œé¢ <code>å…¨éƒ¨è®¾ç½®</code> <code>å…¶ä»–</code> <code>å¼€å¯adb</code></p><h1 id="è§£é”-root"><a href="#è§£é”-root" class="headerlink" title="è§£é” root"></a>è§£é” <code>root</code></h1><p>ä¸‹è½½ <a href="https://www.kingoapp.com/">kingo root</a> å³å¯</p><p>ä½¿ç”¨ <code>adb install</code> å®‰è£…å</p><p>ç”µè§†æœºæ‰“å¼€ç­‰å¾…3åˆ†é’Ÿå·¦å³è§£é”<code>root</code></p><h1 id="adb-ç›¸å…³"><a href="#adb-ç›¸å…³" class="headerlink" title="adb ç›¸å…³"></a><code>adb</code> ç›¸å…³</h1><h2 id="è‡ªåŠ¨å¼€å¯"><a href="#è‡ªåŠ¨å¼€å¯" class="headerlink" title="è‡ªåŠ¨å¼€å¯"></a>è‡ªåŠ¨å¼€å¯</h2><p>ä¿®æ”¹ <code>/system/build.prop</code></p><ul><li><code>persist.sys.openadb=1</code></li></ul><h2 id="å†è¿æ¥æ—¶å€™-shell-Read-only-file-system"><a href="#å†è¿æ¥æ—¶å€™-shell-Read-only-file-system" class="headerlink" title="å†è¿æ¥æ—¶å€™ shell Read only file system"></a>å†è¿æ¥æ—¶å€™ <code>shell</code> <a href="https://stackoverflow.com/a/8534641/6686061"><code>Read only file system</code></a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o rw,remount /system</span><br></pre></td></tr></table></figure><h2 id="push-æ—¶"><a href="#push-æ—¶" class="headerlink" title="push æ—¶"></a><code>push</code> æ—¶</h2><p>å¯ä»¥å°†æ–‡ä»¶ <code>push</code> åˆ° <code>/data/local/tmp/</code> è¿™ä¸ªç›®å½•<br>å†è¿›å…¥ <code>shell</code> <code>cp</code> <code>chmod</code></p><h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><p>å®‰è£… <code>Solid Explorer</code> å°† æœ‰å›¾æ ‡ èƒ½çœ‹æ‡‚çš„åº”ç”¨ åˆ é™¤å³å¯</p><h1 id="æ¡Œé¢"><a href="#æ¡Œé¢" class="headerlink" title="æ¡Œé¢"></a>æ¡Œé¢</h1><ul><li>ä½¿ç”¨ <code>å½“è´æ¡Œé¢</code> <code>com.dangbei.tvlauncher</code></li></ul><p>ä¿®æ”¹ <code>/system/pcfg/8H73_M5/config/general_config.xml</code></p><ul><li><code>&lt;config name=&quot;DEFAULT_HOMEPAGE&quot; value = &quot;com.dangbei.tvlauncher/com.dangbei.tvlauncher.IndexActivity&quot;/&gt;</code></li></ul><p>å°†<code>apk</code> æ”¾åˆ° <code>system/app</code> ç›®å½•ä¸­ ä¸ç„¶ä¼šå¡å¼€æœº</p><h1 id="DLNA-æŠ•å±"><a href="#DLNA-æŠ•å±" class="headerlink" title="DLNA æŠ•å±"></a><code>DLNA</code> æŠ•å±</h1><p>å¯ä»¥ä½¿ç”¨ <code>æ©™å­æŠ•å±</code></p><h1 id="EMBY-ä½¿ç”¨"><a href="#EMBY-ä½¿ç”¨" class="headerlink" title="EMBY ä½¿ç”¨"></a><code>EMBY</code> ä½¿ç”¨</h1><p>è¿™æ˜¯æœ€åä¸€ä¸ªæ”¯æŒå®‰å“ç‰ˆæœ¬ <code>4.4.2</code> çš„</p><ul><li><a href="https://www.apkmirror.com/apk/emby-media/emby-for-android/emby-for-android-3-0-21-release/">https://www.apkmirror.com/apk/emby-media/emby-for-android/emby-for-android-3-0-21-release/</a></li></ul><p>ç¡¬ä»¶é—®é¢˜ <code>HDR</code> çš„è§†é¢‘æ˜¯æ— æ³•æ’­æ”¾çš„</p>]]></content>
    
    
    <summary type="html">ç»™ åˆ›ç»´ 8H73_M5 çš„ä¼˜åŒ–è®°å½•</summary>
    
    
    
    
    <category term="Android" scheme="https://puzzle9.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>btrfs</title>
    <link href="https://puzzle9.github.io/posts/6c53b462/"/>
    <id>https://puzzle9.github.io/posts/6c53b462/</id>
    <published>2025-05-14T04:45:43.000Z</published>
    <updated>2025-05-14T05:08:36.267Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠä¸»åŠ›æœºæ¢æˆ<code>arch</code>çš„é‚£ä¸¤ä¸‰äº‹</p></blockquote><p>è¦è¯´è¿™ä¸ªå¥½ é‚£å°±å¥½çš„ä¸å¾—äº†</p><p>é¦–å…ˆ è¦æœ‰ <a href="https://archlinux.org/packages/core/x86_64/btrfs-progs/"><code>btrfs-progs</code></a> è¿™ä¸ªåŒ…</p><p>å…¶æ¬¡ è¦æœ‰ <code>btrfs</code> çš„æ–‡ä»¶ç³»ç»Ÿ <code>mkfs.btrfs -L Arch /dev/sdxn</code></p><p>å†è€… è¦èƒ½è®¿é—® <code>mount /dev/sdxn /btrfs</code></p><h1 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h1><p>ä¸€ç§æ˜¯æŒ‚è½½ <code>åˆ†åŒº</code></p><p>è¿™æ—¶å€™å¯ä»¥å¯¹ <code>å­å·</code> è¿›è¡Œæ“ä½œ</p><p>å¦ä¸€ç§æ˜¯æŒ‚è½½ <code>å­å·</code></p><p>è¿™æ—¶å€™å¯ä»¥å † <code>å­å·</code> çš„æ–‡ä»¶è¿›è¡Œæ“ä½œ è™½è®©ä¸Šé¢é‚£ç§æŒ‚è½½ä¹Ÿè¡Œ</p><h1 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæŒ‚è½½</span></span><br><span class="line">mount --<span class="built_in">mkdir</span> /dev/sdxn /btrfs</span><br><span class="line"><span class="built_in">cd</span> /btrfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå­å·åˆ—è¡¨</span></span><br><span class="line">btrfs subvolume list .</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå­å·</span></span><br><span class="line">btrfs subvolume create @vm</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å­å·</span></span><br><span class="line">btrfs subvolume delete @vm</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿«ç…§å­å·</span></span><br><span class="line">btrfs subvolume snapshot @vm @vm_bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘½ä»¤ä¹Ÿå¯ä»¥ç²¾ç®€</span></span><br><span class="line"><span class="comment"># btrfs sub snap ...</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mount -t btrfs -o subvol=@vm,noatime,compress=zstd:1 /dev/sdxn /archlinux/vm</span><br><span class="line">mount -t btrfs -o subvol=@home,noatime,compress=lzo /dev/sdxn /archlinux/home</span><br><span class="line">mount -t btrfs -o subvol=@var_cache,noatime,nodatacow /dev/sdxn /archlinux/var/cache</span><br><span class="line">mount -t btrfs -o subvol=@var_log,noatime,nodatacow /dev/sdxn /archlinux/var/log</span><br></pre></td></tr></table></figure><ul><li><code>nodatacow</code> å…³é—­ <code>cow</code> åŠŸèƒ½</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºå±æ€§</span></span><br><span class="line">lsattr .</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æŸä¸ªæ–‡ä»¶å…³é—­cow</span></span><br><span class="line">chattr +C [path]</span><br></pre></td></tr></table></figure><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>è¿˜åœ¨å¯»æ‰¾ç­”æ¡ˆä¸­</p><p>linux btrf åŒä¸€ä¸ªå·ä¸­<br>æœ‰ä»¥ä¸‹ä¸‰ç§æŒ‚è½½æ–¹å¼<br>rw,noatime,compress&#x3D;zstd:1,subvol&#x3D;&#x2F;@<br>rw,noatime,compress&#x3D;lzo,subvol&#x3D;&#x2F;@home<br>rw,noatime,nodatacow,subvol&#x3D;&#x2F;@opt</p><p>æŠŠaæ–‡ä»¶ä»@ç§»åŠ¨åˆ°@homeæ—¶å€™ æ–‡ä»¶å‹ç¼©ç±»å‹å˜åŒ–å—<br>æŠŠbæ–‡ä»¶ä»@ç§»åŠ¨åˆ°@optæ—¶å€™ æ–‡ä»¶ç”¨åˆ°äº†cowäº†å—<br>æŠŠcæ–‡ä»¶ä»@optç§»åŠ¨åˆ°äº†@opt æ–‡ä»¶ç”¨åˆ°cowäº†å—<br>æŠŠdæ–‡ä»¶ä»@optç§»åŠ¨åˆ°äº†@home æ–‡ä»¶ç”¨åˆ°cowäº†å—<br>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦ç”¨åˆ°äº†cow</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æŠŠä¸»åŠ›æœºæ¢æˆ&lt;code&gt;arch&lt;/code&gt;çš„é‚£ä¸¤ä¸‰äº‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¦è¯´è¿™ä¸ªå¥½ é‚£å°±å¥½çš„ä¸å¾—äº†&lt;/p&gt;
&lt;p&gt;é¦–å…ˆ è¦æœ‰ &lt;a href=&quot;https://archlinux.org/packages/core/x8</summary>
      
    
    
    
    <category term="btrfs" scheme="https://puzzle9.github.io/categories/btrfs/"/>
    
    
    <category term="linux" scheme="https://puzzle9.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>libvirt åˆæ¢</title>
    <link href="https://puzzle9.github.io/posts/9c0bfbd/"/>
    <id>https://puzzle9.github.io/posts/9c0bfbd/</id>
    <published>2025-05-11T06:47:38.000Z</published>
    <updated>2025-05-27T18:07:36.816Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠä¸»åŠ›æœºæ¢æˆ<code>arch</code>çš„é‚£ä¸¤ä¸‰äº‹</p></blockquote><h1 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h1><ul><li><code>kvm</code> æ˜¯åº•å±‚è™šæ‹ŸåŒ– æä¾› <code>cpu</code> <code>å†…å­˜</code> ç­‰</li><li><code>qemu</code> æ˜¯åŸºäº <code>kvm</code> ç®¡ç†å¤–è®¾çš„ <code>ç½‘å¡</code> <code>ç¡¬ç›˜</code> ç­‰</li><li><code>libvirt</code> æ˜¯åŸºäºå‰ä¸¤ä¸ªçš„ <code>ç»ˆç«¯å‘½ä»¤</code></li><li><code>virt-manager</code> æ˜¯åŸºäº <code>libvirt</code> çš„ <code>gui</code> é¡µé¢</li><li><code>virt-viewer</code> æ˜¯åŸºäº <code>spice</code> åè®®çš„ è¿œç¨‹è¿æ¥è½¯ä»¶ å°† <code>virt-manager</code> è¿™éƒ¨åˆ†åŠŸèƒ½ç‹¬ç«‹å‡ºæ¥äº†</li></ul><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><ul><li><code>ä¸»æœº host</code> <code>æä¾›è™šæ‹ŸåŒ–çš„æœºå™¨</code></li><li><code>å®¢æˆ·æœº guest</code> <code>ä½¿ç”¨è™šæ‹ŸåŒ–çš„æœºå™¨</code></li></ul><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å¦‚æœä½¿ç”¨ <code>btrfs</code> çš„è¯<br>å»ºè®®æŠŠ <code>/var/lib/libvirt/</code> å…ˆåšä¸ªå­å· å¹¶è®¾ç½®ä¸º <code>nodatacow</code> å±æ€§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-desktop libvirt virt-manager dnsmasq</span><br><span class="line">systemctl <span class="built_in">enable</span> libvirtd --now</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a>ä¿®æ”¹æƒé™</h2><ul><li><code>/etc/libvirt/libvirtd.conf</code> å–æ¶ˆæ³¨é‡Š <code>unix_sock_group</code> å’Œ <code>unix_sock_ro_perms</code></li><li><code>usermod -aG libvirt [who]</code> å°†è‡ªå·±æ·»åŠ åˆ°ç”¨æˆ·ç»„</li></ul><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>æ‰“å¼€ <code>virt-manager</code></p><p>å¼€å¯ <code>xml</code> ç¼–è¾‘åŠŸèƒ½</p><h2 id="ç½‘ç»œè®¾ç½®"><a href="#ç½‘ç»œè®¾ç½®" class="headerlink" title="ç½‘ç»œè®¾ç½®"></a>ç½‘ç»œè®¾ç½®</h2><p>ä¿é™©æœŸé—´æœŸé—´ ä½¿ç”¨ <code>nat</code> æˆ–è€… <code>éš”ç¦»</code></p><p>ç½‘æ®µå¯ä¸º <code>192.168.26.0/28</code></p><h2 id="kvm"><a href="#kvm" class="headerlink" title="kvm"></a>kvm</h2><p>è¿æ¥ä¸º <code>qemu:///system</code></p><p>å¤–è®¾æ¨¡å¼éƒ½é€‰ <code>virtio</code> å†åˆ é™¤ä¸ç”¨çš„å¤–è®¾</p><p>ä½¿ç”¨ <code>qcow2</code> æ¨¡å¼é•œåƒ <code>å¿«ç…§</code> <code>æ´¾ç”Ÿ</code> ç­‰åŠŸèƒ½å¾ˆæ£’</p><h3 id="win10-or-win11"><a href="#win10-or-win11" class="headerlink" title="win10 or win11"></a>win10 or win11</h3><p>æ¨èç”¨ <code>Windows 10 IoT Enterprise LTSC 2021</code> æˆ– <code>Windows 11 IoT Enterprise LTSC 2024</code> <a href="https://massgrave.dev/windows_ltsc_links">é•œåƒ</a></p><p>ä¸€å®šè¦åŠ è½½ <a href="https://aur.archlinux.org/packages/virtio-win"><code>virtio-win</code></a> <a href="https://docs.fedoraproject.org/en-US/quick-docs/creating-windows-virtual-machines-using-virtio-drivers/index.html">é•œåƒ</a></p><p>å®‰è£…æ—¶ å¿…é¡»å°† <a href="https://superuser.com/a/948591/1173085"><strong>ç¡¬ç›˜è®¾ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹</strong></a></p><p><del>ç”¨peåº”è¯¥ä¹Ÿå¯ä»¥æ æˆ‘æ›¾ç»æƒ³è¯•è¿‡</del></p><p>ç”¨ <a href="https://firpe.cn/">pe</a> åŠ è½½ é©±åŠ¨å å®‰è£…æ—¶å†æŠŠé©±åŠ¨å†…ç½®è¿›å»å°±æˆ</p><h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><ul><li><p>ä½¿ç”¨ <code>host-passthrough</code> æ¨¡å¼</p></li><li><p><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#CPU_pinning">å®šä½<code>cpu</code></a></p></li><li><p>å…³é—­ä¼‘çœ  <code>powercfg -h off</code></p></li><li><p>ç¦ç”¨ <code>SysMain</code> <code>Search</code> ç­‰æœåŠ¡</p></li><li><p>åˆ é™¤ <code>å®šæ—¶ä»»åŠ¡</code></p></li><li><p><a href="https://github.com/tsgrgo/windows-update-disabler">ç¦æ­¢ <code>update</code> å•¦</a></p></li><li><p><a href="https://github.com/ionuttbara/windows-defender-remover">ç§»é™¤ <code>defender</code> å•¦</a></p></li></ul><h5 id="win10-lts-wsappx-cpuå ç”¨é«˜"><a href="#win10-lts-wsappx-cpuå ç”¨é«˜" class="headerlink" title="win10 lts wsappx cpuå ç”¨é«˜"></a>win10 lts wsappx cpuå ç”¨é«˜</h5><ul><li><a href="https://github.com/brokyz/Win10_LTSC_2021_FixPacks">https://github.com/brokyz/Win10_LTSC_2021_FixPacks</a></li></ul><h5 id="win11-ä¿®æ”¹ä¸º-win10-çš„å³é”®èœå•"><a href="#win11-ä¿®æ”¹ä¸º-win10-çš„å³é”®èœå•" class="headerlink" title="win11 ä¿®æ”¹ä¸º win10 çš„å³é”®èœå•"></a>win11 ä¿®æ”¹ä¸º win10 çš„å³é”®èœå•</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg.exe add &quot;HKCU\Software\Classes\CLSID\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\InprocServer32&quot; /f /ve</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-virtiofs-æ–‡ä»¶å…±äº«"><a href="#ä½¿ç”¨-virtiofs-æ–‡ä»¶å…±äº«" class="headerlink" title="ä½¿ç”¨ virtiofs æ–‡ä»¶å…±äº«"></a>ä½¿ç”¨ <a href="https://virtio-fs.gitlab.io/howto-windows.html"><code>virtiofs</code></a> æ–‡ä»¶å…±äº«</h4><blockquote><p>è¿™ä¸ªå…±äº«å§ æœ‰äº›è½¯ä»¶ä»–ä¸æ”¯æŒ!</p></blockquote><p>éœ€è¦å®‰è£… <a href="https://github.com/winfsp/winfsp"><code>WinFsp</code></a> å å¹¶æ‰‹åŠ¨å¼€å¯ <code>VirtioFsSvc</code> æœåŠ¡</p><p>è¿™ç§æ¨¡å¼åªæ”¯æŒä¸€ä¸ªæ–‡ä»¶å¤¹</p><p>å¦‚éœ€å¤šç§å…±äº«å‚è€ƒ <a href="https://github.com/virtio-win/kvm-guest-drivers-windows/wiki/Virtiofs:-Shared-file-system#mount">wiki</a></p><h4 id="gpu-å…±äº«"><a href="#gpu-å…±äº«" class="headerlink" title="gpu å…±äº«"></a><code>gpu</code> å…±äº«</h4><h5 id="ä½¿ç”¨-vgpu"><a href="#ä½¿ç”¨-vgpu" class="headerlink" title="ä½¿ç”¨ vgpu"></a>ä½¿ç”¨ <code>vgpu</code></h5><p>æˆ‘åœ¨ <code>arch 6.12.28-1-lts</code> ä¸Šä¸€ç›´å¤±è´¥ ä½†åœ¨ <code>debian 13</code> æ˜¯æˆåŠŸçš„ ä¾¿æ”¾å¼ƒäº†</p><ul><li><a href="https://gitlab.com/polloloco/vgpu-proxmox">https://gitlab.com/polloloco/vgpu-proxmox</a></li><li><a href="https://foxi.buduanwang.vip/virtualization/pve/3417.html">https://foxi.buduanwang.vip/virtualization/pve/3417.html</a></li><li><a href="https://alist.homelabproject.cc/foxipan">https://alist.homelabproject.cc/foxipan</a></li></ul><h5 id="ç›´é€š-gpu"><a href="#ç›´é€š-gpu" class="headerlink" title="ç›´é€š gpu"></a>ç›´é€š <code>gpu</code></h5><p>æ·»åŠ  <code>pci</code> å</p><p>å» <a href="https://www.nvidia.cn/drivers/lookup/"><code>nvidia</code></a> ä¸‹è½½ é©±åŠ¨ ä»–ä»¬å°±åå­—ä¸ä¸€æ ·</p><p>åªéœ€è¦å®‰è£… <code>ç²¾ç®€</code> é‚£ä¸ªæ¨¡å¼å°±è¡Œ</p><p>ç”±äº <code>win</code> æ˜¾å¡æ— è¾“å‡º æ‰€ä»¥ä»–ä¸ä¼šç”¨ <code>gpu</code> çš„ ç¥å¥‡å§</p><p>è¿™é‡Œå°±ç‰µæ‰¯åˆ°ä¸¤ä¸ªæ–¹æ¡ˆå•¦</p><h6 id="hdmiæ˜¾å¡æ¬ºéª—å™¨"><a href="#hdmiæ˜¾å¡æ¬ºéª—å™¨" class="headerlink" title="hdmiæ˜¾å¡æ¬ºéª—å™¨"></a>hdmiæ˜¾å¡æ¬ºéª—å™¨</h6><p>ç¬”è®°æœ¬ä¸­ä¸ç°å® æ”¾å¼ƒ</p><h6 id="è™šæ‹Ÿå±å¹•"><a href="#è™šæ‹Ÿå±å¹•" class="headerlink" title="è™šæ‹Ÿå±å¹•"></a><a href="https://github.com/VirtualDisplay/Virtual-Display-Driver">è™šæ‹Ÿå±å¹•</a></h6><p>éœ€è¦å®‰è£… <a href="https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-desktop-6.0.36-windows-x64-installer"><code>windowsdesktop-runtime-6.0.x-win-x64.exe</code></a></p><p>å®‰è£…åæœ‰å¯èƒ½è®¾å¤‡å¯åŠ¨å¤±è´¥ åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­çœ‹çœ‹å¯ä»¥æ‰‹åŠ¨å¯ç”¨ä¸ ä¸å¾—è¡Œå°±æ¢ <code>win11</code> å§</p><p>å¯ä»¥ä¿®æ”¹ å®‰è£…ç›®å½•çš„ <a href="https://github.com/VirtualDrivers/Virtual-Display-Driver/wiki/How-to-configure-the-driver#overview-of-the-configuration-xml"><code>vdd_settings.xml</code></a> æ–‡ä»¶è‡ªå®šä¹‰åˆ†è¾¨ç‡ç­‰</p><hr><p>é‚£è§£å†³äº†æ˜¾å¡æ— è¾“å‡ºé—®é¢˜å ä¸‹ä¸ªé—®é¢˜å°±å…‰æ˜æ­£å¤§çš„æ¥å•¦</p><p>é‚£è¦å¦‚ä½•æ˜¾ç¤ºè¿™ä¸ªè™šæ‹Ÿå±å¹•å‘¢?</p><p>è¿™æ—¶å€™ <a href="https://looking-glass.io/"><code>Looking Glass</code></a> å°±æ¥å•¦</p><p>å®‰è£… <a href="https://aur.archlinux.org/packages/looking-glass"><code>looking-glass-client</code></a></p><p>å†å‚è€ƒ <a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Using_Looking_Glass_to_stream_guest_screen_to_the_host"><code>wiki</code></a> é…ç½®ä¸‹</p><p>å°† <code>looking-glass</code> çš„æ˜¾å­˜å¯ä»¥è°ƒå¤§ç‚¹ æ¯”å¦‚ <code>128</code></p><p>åœ¨ <code>å®¢æˆ·æœº</code> ä¸Šå°†è™šæ‹Ÿå±å¹•è®¾ä¸ºå”¯ä¸€æ˜¾ç¤º</p><p>å‡ºé—®é¢˜äº†å¯ä»¥æŒ‰ <code>win + p</code> å‡­è®°å¿†ä¿®æ”¹æ˜¾ç¤ºå±å¹•</p><p>ä¸»æœºä¸Šè¿è¡Œ <code>looking-glass-client -m 97 -F</code> å³å¯å¯åŠ¨</p><ul><li><code>-F</code> å…¨å±</li><li><code>-m</code> æŒ‡å®šä¸»æœºé”® <code>97</code> è¿™é‡Œæ˜¯ <code>lctrl</code></li></ul><p>å‡ºäº†æ„å¤–çš„è¯ çœ‹ <code>%ProgramData%\Looking Glass (host)\looking-glass-host.txt</code> æ—¥å¿—</p><p>æ¥å¼  <em>ç´¢æ‹‰å¡å‰çš„å¯¹æ¯”å›¾</em></p><p><img src="/posts/9c0bfbd/lol_soraka_befor.png" alt="lol_soraka_befor"></p><h4 id="åˆ é™¤-win-çš„æ¢å¤åˆ†åŒº"><a href="#åˆ é™¤-win-çš„æ¢å¤åˆ†åŒº" class="headerlink" title="åˆ é™¤ win çš„æ¢å¤åˆ†åŒº"></a><a href="https://superuser.com/a/1824309/1173085">åˆ é™¤ win çš„æ¢å¤åˆ†åŒº</a></h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">diskpart</span><br><span class="line">list disk</span><br><span class="line">select disk [number]</span><br><span class="line">list partition</span><br><span class="line">select partition [number]</span><br><span class="line">delete partition override</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><h4 id="å¼€å¯-TPM-æ”¯æŒ"><a href="#å¼€å¯-TPM-æ”¯æŒ" class="headerlink" title="å¼€å¯ TPM æ”¯æŒ"></a>å¼€å¯ <code>TPM</code> æ”¯æŒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S swtpm</span><br></pre></td></tr></table></figure><h4 id="åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡"><a href="#åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡" class="headerlink" title="åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡"></a>åŒæ­¥ä¸»æœºåˆ†è¾¨ç‡</h4><p>é¦–æ¬¡å¯ä»¥åŒæ­¥ å…¨å±å’Œä¿®æ”¹æœ‰ç‚¹é—®é¢˜</p><p>å¯ä»¥åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­ é‡å¯ <code>Red Hat VirtIO GPU DOD controller</code> è§£å†³</p><h3 id="qcow2-çš„-é«˜çº§ä½¿ç”¨"><a href="#qcow2-çš„-é«˜çº§ä½¿ç”¨" class="headerlink" title="qcow2 çš„ é«˜çº§ä½¿ç”¨"></a><code>qcow2</code> çš„ é«˜çº§ä½¿ç”¨</h3><ul><li>q -&gt; qume</li><li>cow -&gt; å†™æ—¶å¤åˆ¶</li><li>2 -&gt; ç¬¬äºŒç‰ˆæœ¬?</li></ul><p>è¿™ä¸ªå¿«ç…§æ˜¯çº¿æ€§çš„</p><h4 id="å¿«ç…§åˆå¹¶"><a href="#å¿«ç…§åˆå¹¶" class="headerlink" title="å¿«ç…§åˆå¹¶"></a>å¿«ç…§åˆå¹¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img convert -O qcow2 origin save</span><br><span class="line">qemu-img convert -O qcow2 base.qcow2 new.qcow2</span><br></pre></td></tr></table></figure><h4 id="é•œåƒæ´¾ç”Ÿ"><a href="#é•œåƒæ´¾ç”Ÿ" class="headerlink" title="é•œåƒæ´¾ç”Ÿ"></a>é•œåƒæ´¾ç”Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -F qcow2 -f qcow2 save -o backing_file=origin size</span><br><span class="line">qemu-img create -F qcow2 -f qcow2 new.qcow2 -o backing_file=/base.qcow2 200G</span><br></pre></td></tr></table></figure><h4 id="é•œåƒä¿®æ”¹"><a href="#é•œåƒä¿®æ”¹" class="headerlink" title="é•œåƒä¿®æ”¹"></a>é•œåƒä¿®æ”¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modprobe nbd</span><br><span class="line">qemu-nbd -c /dev/nbd0 base.qcow2</span><br><span class="line">qemu-nbd -d /dev/nbd0</span><br></pre></td></tr></table></figure><h2 id="lxc"><a href="#lxc" class="headerlink" title="lxc"></a>lxc</h2><p>è¿æ¥ä¸º <code>lxc:///</code></p><p>è¿™ä¸ªæ˜¯è‡ªå·±å®ç°çš„ <code>lxc</code> æ— é¡»å®‰è£…å…¶ä»–çš„åŒ…</p><p>å¯ä»¥ç›´æ¥ç”¨ <code>rootfs</code></p><p>æˆ–è€…åœ¨ <a href="https://images.linuxcontainers.org/">https://images.linuxcontainers.org/</a> ä¸‹è½½</p><p>å…ˆ <code>chroot</code> è¿›å»ä¿®æ”¹ å¯†ç </p><h3 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chroot</span> alpine /bin/sh -l</span><br></pre></td></tr></table></figure><p>å†è€… æ¨èä½¿ç”¨ <code>dropbear</code> æ¥èŠ‚çœç‚¹ <code>å†…å­˜</code></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://wiki.archlinux.org/title/Libvirt">https://wiki.archlinux.org/title/Libvirt</a></li><li><a href="https://wiki.archlinux.org/title/Virt-manager">https://wiki.archlinux.org/title/Virt-manager</a></li><li><a href="https://wiki.archlinux.org/title/QEMU">https://wiki.archlinux.org/title/QEMU</a></li><li><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF">https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF</a></li><li><a href="https://sysguides.com/install-a-windows-11-virtual-machine-on-kvm">https://sysguides.com/install-a-windows-11-virtual-machine-on-kvm</a></li><li><a href="https://zhuanlan.zhihu.com/p/24366335">https://zhuanlan.zhihu.com/p/24366335</a></li><li><a href="https://zhuanlan.zhihu.com/p/600611659">https://zhuanlan.zhihu.com/p/600611659</a></li><li><a href="https://ivonblog.com/posts/looking-glass-host-for-windows/">https://ivonblog.com/posts/looking-glass-host-for-windows/</a></li><li><a href="https://blog.gavinzh.com/2017/08/02/qemu-img-tutorial-commands/">https://blog.gavinzh.com/2017/08/02/qemu-img-tutorial-commands/</a></li></ul>]]></content>
    
    
    <summary type="html">linux è™šæ‹ŸåŒ– kvm qemu</summary>
    
    
    
    <category term="libvirt" scheme="https://puzzle9.github.io/categories/libvirt/"/>
    
    
    <category term="linux" scheme="https://puzzle9.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>vite çš„ target å‘€</title>
    <link href="https://puzzle9.github.io/posts/97f3c987/"/>
    <id>https://puzzle9.github.io/posts/97f3c987/</id>
    <published>2024-11-19T13:41:38.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© æµè§ˆå™¨å…¼å®¹ æ¢èµ›é“äº†å‘¢</p><p>å¥½ä¹…æ²¡å‡çº§çš„æˆ‘é‡åˆ°äº† <code>Object.hasOwn is not a function</code> é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/86.0.4240.99 XWEB/4263 MMWEBSDK/20220604 Mobile Safari/537.36 MMWEBID/2083 MicroMessenger/8.0.24.2167(0x28001843) WeChat/arm64 Weixin GPVersion/1 NetType/WIFI Language/zh_CN ABI/arm64  </span><br></pre></td></tr></table></figure><p>çœ‹äº†çœ‹åº”ç”¨çš„åŒ… å‘ç° <code>ky</code> è¿™ä¸ªç°ä»£çš„æœ‰è¶£å®¶ä¼™</p><p>æ© æœäº†æœ å‘ç°ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</p><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> hasOwn <span class="keyword">from</span> <span class="string">&#x27;object.hasown&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">Object</span>.<span class="property">hasOwn</span>) &#123;</span><br><span class="line">  hasOwn.<span class="title function_">shim</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒåœ°å€</p><ul><li><a href="https://github.com/sindresorhus/ky/issues/629">https://github.com/sindresorhus/ky/issues/629</a></li><li><a href="https://github.com/vitejs/vite/discussions/15794">https://github.com/vitejs/vite/discussions/15794</a></li><li><a href="https://ccny.ltd/views/blog/2022/%E4%BB%8E%20Object.hasOwn%20%E7%9C%8B%20@vitejs_plugin-legacy.html">https://ccny.ltd/views/blog/2022/%E4%BB%8E%20Object.hasOwn%20%E7%9C%8B%20@vitejs_plugin-legacy.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© æµè§ˆå™¨å…¼å®¹ æ¢èµ›é“äº†å‘¢&lt;/p&gt;
&lt;p&gt;å¥½ä¹…æ²¡å‡çº§çš„æˆ‘é‡åˆ°äº† &lt;code&gt;Object.hasOwn is not a function&lt;/code&gt; é”™è¯¯&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>UA åˆ—è¡¨æ”¶é›†</title>
    <link href="https://puzzle9.github.io/posts/44f49894/"/>
    <id>https://puzzle9.github.io/posts/44f49894/</id>
    <published>2024-10-22T07:52:35.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p><code>Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/86.0.4240.99 XWEB/4263 MMWEBSDK/20220604 Mobile Safari/537.36 MMWEBID/2083 MicroMessenger/8.0.24.2167(0x28001843) WeChat/arm64 Weixin GPVersion/1 NetType/WIFI Language/zh_CN ABI/arm64</code></p></li><li><p><code>Mozilla/5.0 (Linux; U; Android 13; zh-cn; 21091116AC Build/TP1A.220624.014) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/109.0.5414.118 Mobile Safari/537.36 XiaoMi/MiuiBrowser/18.4.410719</code></p></li><li><p><code>Mozilla/5.0 (Linux; Android 13; 21091116AC Build/TP1A.220624.014; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/126.0.6478.188 Mobile Safari/537.36 XWEB/1260117 MMWEBSDK/20240501 MMWEBID/8157 MicroMessenger/8.0.50.2701(0x2800325B) WeChat/arm64 Weixin NetType/4G Language/zh_CN ABI/arm64</code></p></li><li><p><code>Mozilla/5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.52(0x18003425) NetType/WIFI Language/zh_CN</code></p></li><li><p><code>Mozilla/5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1</code></p></li></ul><p>&#96;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Mozilla/5.0 (Linux; Android 12; 2112123AG Build/SKQ1.220303.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Ch</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤ **æŠ€å·§</title>
    <link href="https://puzzle9.github.io/posts/6c5b1981/"/>
    <id>https://puzzle9.github.io/posts/6c5b1981/</id>
    <published>2024-10-22T07:51:50.000Z</published>
    <updated>2025-05-11T06:41:43.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> &#123;http,https&#125;_proxy=<span class="string">&quot;http://ip:port&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> http_proxy=http://ip:port</span><br><span class="line"><span class="built_in">set</span> https_proxy=http://ip:port</span><br></pre></td></tr></table></figure><h1 id="mariadb"><a href="#mariadb" class="headerlink" title="mariadb"></a>mariadb</h1><h2 id="debian"><a href="#debian" class="headerlink" title="debian"></a>debian</h2><ul><li><a href="https://mariadb.com/kb/en/installing-mariadb-deb-files/">https://mariadb.com/kb/en/installing-mariadb-deb-files/</a></li><li><a href="https://swmlee.com/2020/06/18/technicalessays/mariadbseries/07mariadb-performance-optimization/">https://swmlee.com/2020/06/18/technicalessays/mariadbseries/07mariadb-performance-optimization/</a></li><li><a href="https://www.cnblogs.com/dh17/p/14484423.html">https://www.cnblogs.com/dh17/p/14484423.html</a></li><li><a href="https://stackoverflow.com/a/19101356/6686061">https://stackoverflow.com/a/19101356/6686061</a></li><li><a href="https://github.com/major/MySQLTuner-perl">https://github.com/major/MySQLTuner-perl</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | bash</span><br><span class="line">apt install mariadb-server</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb --now</span><br><span class="line"></span><br><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><p><code>/etc/mysql/mariadb.conf.d/10-custom.cnf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve=ON</span><br><span class="line">performance_schema=ON</span><br><span class="line">innodb_buffer_pool_size=512M</span><br><span class="line">innodb_log_file_size=128M</span><br><span class="line">innodb_log_buffer_size=256M</span><br><span class="line"></span><br><span class="line">slow-query-log=1</span><br><span class="line">slow-query-log-file=/var/log/mysql-slow.log</span><br><span class="line">long_query_time=2</span><br><span class="line"></span><br><span class="line">query_cache_type=ON</span><br><span class="line">query_cache_size=256M</span><br></pre></td></tr></table></figure><h2 id="alpine"><a href="#alpine" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apk add mariadb mariadb-client</span><br><span class="line">/etc/init.d/mariadb setup</span><br><span class="line">rc-service mariadb start</span><br><span class="line">rc-update add mariadb default</span><br><span class="line">mariadb-secure-installation</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `database`;</span><br><span class="line"></span><br><span class="line">CREATE USER &#x27;user&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO user@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27; WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON `database`.* TO &#x27;user&#x27;@&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show status like &#x27;%Qcache%&#x27;;</span><br><span class="line">show variables like &quot;%query_cache%&quot;</span><br></pre></td></tr></table></figure><h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><h2 id="debian-1"><a href="#debian-1" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get install lsb-release curl gpg</span><br><span class="line">curl -fsSL https://packages.redis.io/gpg | gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg</span><br><span class="line"><span class="built_in">chmod</span> 644 /usr/share/keyrings/redis-archive-keyring.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb <span class="subst">$(lsb_release -cs)</span> main&quot;</span> | <span class="built_in">tee</span> /etc/apt/sources.list.d/redis.list</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install redis</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> redis-server --now</span><br></pre></td></tr></table></figure><h1 id="caddy"><a href="#caddy" class="headerlink" title="caddy"></a>caddy</h1><ul><li><a href="https://caddyserver.com/docs/install">https://caddyserver.com/docs/install</a></li><li><a href="https://gist.github.com/ryanburnette/d13575c9ced201e73f8169d3a793c1a3">https://gist.github.com/ryanburnette/d13575c9ced201e73f8169d3a793c1a3</a></li></ul><h2 id="debian-2"><a href="#debian-2" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt install -y debian-keyring debian-archive-keyring apt-transport-https curl</span><br><span class="line">curl -1sLf <span class="string">&#x27;https://dl.cloudsmith.io/public/caddy/stable/gpg.key&#x27;</span> | gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg</span><br><span class="line">curl -1sLf <span class="string">&#x27;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt&#x27;</span> | <span class="built_in">tee</span> /etc/apt/sources.list.d/caddy-stable.list</span><br><span class="line">apt update</span><br><span class="line">apt install caddy</span><br><span class="line">systemctl <span class="built_in">enable</span> caddy --now</span><br></pre></td></tr></table></figure><h2 id="alpine-1"><a href="#alpine-1" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apk add caddy</span><br><span class="line">rc-update add caddy</span><br><span class="line">rc-service caddy restart</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">(cors) &#123;</span><br><span class="line">  @cors_preflight method OPTIONS</span><br><span class="line">  @cors header Origin &#123;args.0&#125;</span><br><span class="line"></span><br><span class="line">  handle @cors_preflight &#123;</span><br><span class="line">    header Access-Control-Allow-Origin &quot;&#123;args.0&#125;&quot;</span><br><span class="line">    header Access-Control-Allow-Methods *</span><br><span class="line">    header Access-Control-Allow-Headers *</span><br><span class="line">    header Access-Control-Max-Age &quot;3600&quot;</span><br><span class="line">    respond &quot;&quot; 204</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handle @cors &#123;</span><br><span class="line">    header Access-Control-Allow-Origin &quot;&#123;args.0&#125;&quot;</span><br><span class="line">    header Access-Control-Expose-Headers *</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">import /data/conf/*.caddy</span><br><span class="line"></span><br><span class="line">:80 &#123;</span><br><span class="line">  root * /usr/share/caddy</span><br><span class="line">  file_server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">domain.com &#123;</span><br><span class="line">  encode zstd gzip</span><br><span class="line">  tls domain@email</span><br><span class="line"></span><br><span class="line">  import cors http://domain.com</span><br><span class="line">  reverse_proxy 127.0.0.1:6001</span><br><span class="line"></span><br><span class="line">  log &#123;</span><br><span class="line">    output file /data/logs/domain.log</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">domain.com:80 &#123;</span><br><span class="line">  encode zstd gzip</span><br><span class="line"></span><br><span class="line">  root * /data/www//dist</span><br><span class="line">  try_files &#123;path&#125; /index.html</span><br><span class="line">  file_server</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reverse_proxy 127.0.0.1:4050 &#123;</span><br><span class="line">  header_up X-Real-IP &#123;remote&#125;</span><br><span class="line">  handle_response &#123;</span><br><span class="line">    header Access-Control-Allow-Origin *</span><br><span class="line">    header Access-Control-Allow-Methods *</span><br><span class="line">    header Access-Control-Allow-Headers *</span><br><span class="line">    header Access-Control-Max-Age 3600</span><br><span class="line">    copy_response</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log &#123;</span><br><span class="line">  output file /data/logs/log.log</span><br><span class="line"></span><br><span class="line">  format console &#123;</span><br><span class="line">    time_format wall</span><br><span class="line">    time_local</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handle_path /logs/* &#123;</span><br><span class="line">  root * /data/www/logs/</span><br><span class="line">  file_server browse &#123;</span><br><span class="line">    precompressed zstd br gzip</span><br><span class="line">    hide &quot;.gitignore&quot; &quot;*.json&quot; &quot;supervisord*&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a>supervisor</h1><h2 id="debian-3"><a href="#debian-3" class="headerlink" title="debian"></a>debian</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install supervisor</span><br><span class="line">systemctl <span class="built_in">enable</span> supervisor --now</span><br></pre></td></tr></table></figure><h2 id="alpine-2"><a href="#alpine-2" class="headerlink" title="alpine"></a>alpine</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apk add supervisor</span><br><span class="line">rc-update add supervisord</span><br><span class="line">rc-service supervisord restart</span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/supervisor.d/</span><br></pre></td></tr></table></figure><h1 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://deb.nodesource.com/setup_lts.x | bash</span><br><span class="line">apt install nodejs</span><br><span class="line"></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line">npm install -g pnpm</span><br></pre></td></tr></table></figure><h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config core.filemode <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">git daemon --verbose --export-all --base-path=.</span><br><span class="line">git <span class="built_in">clone</span> git://127.0.0.1/file file</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> ../base/file file</span><br></pre></td></tr></table></figure><h1 id="pake"><a href="#pake" class="headerlink" title="pake"></a>pake</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pake http://domain.test --name domain --icon favicon_128.ico --fullscreen --always-on-top --installer-language zh-CN</span><br><span class="line">pake http://domain-dev.test --name domain-dev --icon favicon_128.ico --installer-language zh-CN --debug</span><br></pre></td></tr></table></figure><h1 id="php"><a href="#php" class="headerlink" title="php"></a>php</h1><h2 id="frankenphp"><a href="#frankenphp" class="headerlink" title="frankenphp"></a>frankenphp</h2><ul><li><a href="https://github.com/dunglas/frankenphp">https://github.com/dunglas/frankenphp</a></li><li><a href="https://frankenphp.dev/docs/known-issues/#composer-scripts-referencing-php">https://frankenphp.dev/docs/known-issues/#composer-scripts-referencing-php</a></li><li><a href="https://mirrors.tencent.com/help/composer.html">https://mirrors.tencent.com/help/composer.html</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/dunglas/frankenphp/releases/download/v1.3.1/frankenphp-linux-x86_64</span><br><span class="line"><span class="built_in">chmod</span> +x frankenphp-linux-x86_64</span><br><span class="line"><span class="built_in">mv</span> frankenphp-linux-x86_64 /usr/local/bin</span><br></pre></td></tr></table></figure><p><code>/usr/local/bin/php</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line">args=(<span class="string">&quot;<span class="variable">$@</span>&quot;</span>)</span><br><span class="line">index=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$i</span>&quot;</span> == <span class="string">&quot;-d&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">unset</span> <span class="string">&#x27;args[$index]&#x27;</span></span><br><span class="line">        <span class="built_in">unset</span> <span class="string">&#x27;args[$index+1]&#x27;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    index=$((index+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">/usr/local/bin/frankenphp php-cli <span class="variable">$&#123;args[@]&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frankenphp php-cli /usr/local/bin/composer  install --no-dev -vvv</span><br></pre></td></tr></table></figure><h2 id="composer"><a href="#composer" class="headerlink" title="composer"></a>composer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tencent.com/composer/composer.phar</span><br><span class="line"><span class="built_in">mv</span> composer.phar /usr/local/bin/composer</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/composer</span><br><span class="line">composer config -g repos.packagist composer https://mirrors.tencent.com/composer/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install --no-dev -vvv</span><br></pre></td></tr></table></figure><h2 id="laravel"><a href="#laravel" class="headerlink" title="laravel"></a>laravel</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan key:generate</span><br></pre></td></tr></table></figure><h1 id="win"><a href="#win" class="headerlink" title="win"></a>win</h1><ul><li><a href="https://github.com/TGSAN/CMWTAT_Digital_Edition/issues/81">https://github.com/TGSAN/CMWTAT_Digital_Edition/issues/81</a></li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">irm</span> https://massgrave.dev/get | <span class="built_in">iex</span></span><br></pre></td></tr></table></figure><h1 id="alpine-3"><a href="#alpine-3" class="headerlink" title="alpine"></a>alpine</h1><ul><li><a href="https://stackoverflow.com/a/62218241/6686061">https://stackoverflow.com/a/62218241/6686061</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN apk add name --repository=http://dl-cdn.alpinelinux.org/alpine/edge/testing/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apk add openssh</span><br><span class="line">rc-update add sshd</span><br></pre></td></tr></table></figure><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="debian-4"><a href="#debian-4" class="headerlink" title="debian"></a>debian</h3><ul><li><a href="https://docs.docker.com/engine/install/debian/">https://docs.docker.com/engine/install/debian/</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install ca-certificates curl</span><br><span class="line">install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line"><span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \</span></span><br><span class="line"><span class="string">  <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$VERSION_CODENAME</span>&quot;</span>)</span> stable&quot;</span> | \</span><br><span class="line"> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save image</span></span><br><span class="line">docker save puzzle9/image:latest | gzip  &gt; puzzle9_image-latest.tar.gz</span><br><span class="line"><span class="comment"># load image</span></span><br><span class="line">gunzip -c puzzle9_image-latest.tar.gz | docker load</span><br></pre></td></tr></table></figure><h1 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvf file</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…</span></span><br><span class="line">tar -cvf file.tar files</span><br><span class="line">tar -czvf file.tar.gz files</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ é™¤éå¯ä»¥å¤åˆ¶</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ ç§äººdns</title>
    <link href="https://puzzle9.github.io/posts/9992adb/"/>
    <id>https://puzzle9.github.io/posts/9992adb/</id>
    <published>2024-10-22T06:06:21.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© è¿˜æœ‰ç‚¹ç”¨å§</p><p>ä¹‹å‰çš„é‚£ä¸ªå†…å­˜ä¸å¤Ÿ å®¹æ˜“é‡å¯<br>å°±æ­å»ºäº† <code>pve</code> è·‘äº† <code>openwrt</code></p><p><img src="/posts/9992adb/index.png"></p><h1 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h1><p>æ–¹æ¡ˆ1: ä¿®æ”¹ <code>openwrt</code> ä¸­çš„ <code>dnsmasq</code> æœåŠ¡å™¨ç«¯å£å·<br>æ–¹æ¡ˆ2: å¼€å¯ <code>openwrt</code> ä¸­çš„ <code>dnsmasq</code> æœåŠ¡å™¨çš„è½¬å‘åŠŸèƒ½</p><p>æœ€ç»ˆé€‰æ‹©äº†æ–¹æ¡ˆ1</p><p>è¿™æ ·å¯ä»¥æ˜¾ç¤ºå‡ºæ¥dnsæŸ¥è¯¢çš„ip</p><h1 id="adguard-å®‰è£…"><a href="#adguard-å®‰è£…" class="headerlink" title="adguard å®‰è£…"></a>adguard å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install adguardhome</span><br></pre></td></tr></table></figure><h1 id="adguard-é…ç½®"><a href="#adguard-é…ç½®" class="headerlink" title="adguard é…ç½®"></a>adguard é…ç½®</h1><h2 id="ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®"><a href="#ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®"></a>ä¿®æ”¹æ–‡ä»¶ä¿å­˜ä½ç½®</h2><p><code>/etc/config/adguardhome</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config adguardhome config</span><br><span class="line">option workdir /data/adguardhome</span><br></pre></td></tr></table></figure><h2 id="dnsä¸Šæ¸¸"><a href="#dnsä¸Šæ¸¸" class="headerlink" title="dnsä¸Šæ¸¸"></a>dnsä¸Šæ¸¸</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">https://dns.alidns.com/dns-query</span><br><span class="line">https://dns.pub/dns-query</span><br><span class="line">223.5.5.5</span><br><span class="line">114.114.114.114</span><br><span class="line">119.29.29.29</span><br><span class="line">2400:3200::1</span><br><span class="line">2402:4e00::</span><br></pre></td></tr></table></figure><h2 id="dnsé»‘åå•"><a href="#dnsé»‘åå•" class="headerlink" title="dnsé»‘åå•"></a>dnsé»‘åå•</h2><ul><li><code>easylistchina</code>: <code>https://easylist-downloads.adblockplus.org/easylistchina.txt</code></li><li><code>AdGuard DNS filter mirror</code>: <code>https://raw.gitmirror.com/AdguardTeam/HostlistsRegistry/refs/heads/main/assets/filter_1.txt</code></li></ul><h1 id="openwrt-é…ç½®"><a href="#openwrt-é…ç½®" class="headerlink" title="openwrt é…ç½®"></a>openwrt é…ç½®</h1><p>ç”¨äº ä¿®æ”¹ openwrt dnsç«¯å£ æ—  dnsæœåŠ¡å™¨ä¸‹å‘</p><p>ä¿®æ”¹ <code>dhcp</code> æœåŠ¡å™¨é€‰é¡¹ æ‰‹åŠ¨ä¸‹å‘dnsåœ°å€ <code>6,192.168.9.1</code></p><p><img src="/posts/9992adb/openwrt_dhcp_setting.png"></p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://www.right.com.cn/forum/thread-4090928-1-1.html">https://www.right.com.cn/forum/thread-4090928-1-1.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© è¿˜æœ‰ç‚¹ç”¨å§&lt;/p&gt;
&lt;p&gt;ä¹‹å‰çš„é‚£ä¸ªå†…å­˜ä¸å¤Ÿ å®¹æ˜“é‡å¯&lt;br&gt;å°±æ­å»ºäº† &lt;code&gt;pve&lt;/code&gt; è·‘äº† &lt;code&gt;openwrt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/9992adb/index.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;æ–¹æ¡ˆ</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ openwrt</title>
    <link href="https://puzzle9.github.io/posts/fe6d4e/"/>
    <id>https://puzzle9.github.io/posts/fe6d4e/</id>
    <published>2024-10-22T06:06:20.000Z</published>
    <updated>2025-06-07T04:33:18.114Z</updated>
    
    <content type="html"><![CDATA[<p>æ© è¿™é‡Œç©ºç©ºçš„</p><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="ç‰ˆæœ¬åŒºåˆ«"><a href="#ç‰ˆæœ¬åŒºåˆ«" class="headerlink" title="ç‰ˆæœ¬åŒºåˆ«"></a>ç‰ˆæœ¬åŒºåˆ«</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">generic-ext4-combined-efi.img.gz # ç±»ä¼¼äºè™šæ‹Ÿæœºç£ç›˜å¯¼å…¥ å¯ç›´æ¥ä½¿ç”¨</span><br><span class="line">generic-ext4-combined.img.gz</span><br><span class="line">generic-ext4-rootfs.img.gz</span><br><span class="line">generic-kernel.bin</span><br><span class="line">generic-squashfs-combined-efi.img.gz # ç±»ä¼¼äºisoé•œåƒ éœ€è¦å®‰è£…åä½¿ç”¨</span><br><span class="line">generic-squashfs-combined.img.gz</span><br><span class="line">generic-squashfs-rootfs.img.gz</span><br><span class="line">rootfs.tar.gz</span><br></pre></td></tr></table></figure><ul><li>efi å¸¦äº†å¼•å¯¼ å¯ä»¥ç›´æ¥å¯åŠ¨</li></ul><h2 id="å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º"><a href="#å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º" class="headerlink" title="å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º"></a>å¢åŠ pciæ— çº¿ç½‘å¡ä¸æ˜¾ç¤º</h2><p>å®‰è£…ç›¸åº”å‹å·é©±åŠ¨ å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">opkg install iwlwifi-firmware-ax210</span><br><span class="line">opkg install kmod-iwlwifi</span><br><span class="line">opkg install wpa-supplicant</span><br></pre></td></tr></table></figure><h2 id="å¤šwan-å¤šlan-åˆ†å¼€ä½¿ç”¨"><a href="#å¤šwan-å¤šlan-åˆ†å¼€ä½¿ç”¨" class="headerlink" title="å¤šwan å¤šlan åˆ†å¼€ä½¿ç”¨"></a>å¤šwan å¤šlan åˆ†å¼€ä½¿ç”¨</h2><p>å¯ä»¥ç”¨ mwan3<br>ç›®å‰åªæå®šäº† ipv4</p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© è¿™é‡Œç©ºç©ºçš„&lt;/p&gt;
&lt;h1 id=&quot;Q-A&quot;&gt;&lt;a href=&quot;#Q-A&quot; class=&quot;headerlink&quot; title=&quot;Q&amp;amp;A&quot;&gt;&lt;/a&gt;Q&amp;amp;A&lt;/h1&gt;&lt;h2 id=&quot;ç‰ˆæœ¬åŒºåˆ«&quot;&gt;&lt;a href=&quot;#ç‰ˆæœ¬åŒºåˆ«&quot; class=&quot;headerlin</summary>
      
    
    
    
    
    <category term="OpenWrt" scheme="https://puzzle9.github.io/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ å®˜æ”¹</title>
    <link href="https://puzzle9.github.io/posts/4ec329a2/"/>
    <id>https://puzzle9.github.io/posts/4ec329a2/</id>
    <published>2024-10-22T06:06:19.000Z</published>
    <updated>2025-06-05T05:57:10.233Z</updated>
    
    <content type="html"><![CDATA[<p>æ„Ÿè§‰é™æ€ipç»‘å®šäºŒæ¬¡ç¡®è®¤ä¸å¥½ç”¨</p><p>é‚£å°± è§£åŒ… æè‡ªå·±çš„è·¯ç”±</p><h1 id="è·å–å¼€å‘åŒ…"><a href="#è·å–å¼€å‘åŒ…" class="headerlink" title="è·å–å¼€å‘åŒ…"></a>è·å–å¼€å‘åŒ…</h1><ul><li><a href="https://miuirom.org/miwifi/xiaomi-router-be3600-2-5g">https://miuirom.org/miwifi/xiaomi-router-be3600-2-5g</a></li></ul><p>è·å¾— <code>miwifi_rd15_firmware_23a4f_1.0.68.bin</code> æ–‡ä»¶</p><h1 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h1><blockquote><p>debian bookworm</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt install binwalk</span><br><span class="line">apt install python3.11-venv</span><br><span class="line"></span><br><span class="line">python3 -m venv venv</span><br><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br><span class="line"></span><br><span class="line">pip install ubi_reader</span><br></pre></td></tr></table></figure><h1 id="è§£åŒ…"><a href="#è§£åŒ…" class="headerlink" title="è§£åŒ…"></a>è§£åŒ…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">(venv) root@localhost:/route_package# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin</span><br><span class="line">â””â”€â”€ venv</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package# ubireader_extract_images -w miwifi_rd15_firmware_23a4f_1.0.68.bin <span class="comment"># ç¬¬ä¸€æ¬¡è§£åŒ…</span></span><br><span class="line">UBI_File Warning: end_offset - start_offset length is not block aligned, could mean missing data. <span class="comment"># è¿™ä¸ªé”™è¯¯å¯ä»¥ä¸ç”¨ç®¡</span></span><br><span class="line">(venv) root@localhost:/route_package# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin</span><br><span class="line">â”œâ”€â”€ ubifs-root</span><br><span class="line">â””â”€â”€ venv</span><br><span class="line"></span><br><span class="line">3 directories, 1 file</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root# tree -L 1</span><br><span class="line">.</span><br><span class="line">â””â”€â”€ miwifi_rd15_firmware_23a4f_1.0.68.bin <span class="comment"># éœ€è¦å†æ¬¡è§£åŒ…</span></span><br><span class="line"></span><br><span class="line">2 directories, 0 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root# binwalk -Me miwifi_rd15_firmware_23a4f_1.0.68.bin --run-as=root  <span class="comment"># å†æ¬¡è§£åŒ…</span></span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs <span class="comment"># å†…æ ¸æ–‡ä»¶</span></span><br><span class="line">â””â”€â”€ img-2059293214_vol-ubi_rootfs.ubifs <span class="comment"># ç¨‹åºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">1 directory, 2 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# unsquashfs img-2059293214_vol-ubi_rootfs.ubifs <span class="comment"># æå–ç¨‹åºæ–‡ä»¶</span></span><br><span class="line">Parallel unsquashfs: Using 2 processors</span><br><span class="line">5288 inodes (4844 blocks) to write</span><br><span class="line"></span><br><span class="line">[=====================================================================================================================================================================================================================================================================================================================================-] 10132/10132 100%</span><br><span class="line"></span><br><span class="line">created 4779 files</span><br><span class="line">created 302 directories</span><br><span class="line">created 508 symlinks</span><br><span class="line">created 1 device</span><br><span class="line">created 0 fifos</span><br><span class="line">created 0 sockets</span><br><span class="line">created 0 hardlinks</span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â””â”€â”€ squashfs-root <span class="comment"># è¿™æ˜¯ç¨‹åºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">2 directories, 2 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin/squashfs-root# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ data</span><br><span class="line">â”œâ”€â”€ dev</span><br><span class="line">â”œâ”€â”€ etc</span><br><span class="line">â”œâ”€â”€ ini</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”œâ”€â”€ mnt</span><br><span class="line">â”œâ”€â”€ overlay</span><br><span class="line">â”œâ”€â”€ proc</span><br><span class="line">â”œâ”€â”€ <span class="built_in">readonly</span></span><br><span class="line">â”œâ”€â”€ rom</span><br><span class="line">â”œâ”€â”€ root</span><br><span class="line">â”œâ”€â”€ run -&gt; tmp/run</span><br><span class="line">â”œâ”€â”€ sawf</span><br><span class="line">â”œâ”€â”€ sbin</span><br><span class="line">â”œâ”€â”€ sys</span><br><span class="line">â”œâ”€â”€ tmp</span><br><span class="line">â”œâ”€â”€ userdisk</span><br><span class="line">â”œâ”€â”€ usr</span><br><span class="line">â”œâ”€â”€ var -&gt; tmp</span><br><span class="line">â”œâ”€â”€ vendor</span><br><span class="line">â””â”€â”€ www</span><br><span class="line"></span><br><span class="line">22 directories, 1 file</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹å†…å®¹"><a href="#ä¿®æ”¹å†…å®¹" class="headerlink" title="ä¿®æ”¹å†…å®¹"></a>ä¿®æ”¹å†…å®¹</h1><ul><li>ğŸ•Š</li></ul><h1 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h1><p>ç”¨è¿™ä¸ªè„šæœ¬å§ æ–¹ä¾¿</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https://raw.githubusercontent.com/geekman/xqrepack/refs/heads/master/ubinize.sh</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# mksquashfs squashfs-root squashfs-root.bin.new -comp xz -b 256K -no-xattrs <span class="comment"># å°† ç¨‹åºé‡æ–°æ‰“åŒ…ä¸ºbinæ–‡ä»¶</span></span><br><span class="line">Parallel mksquashfs: Using 2 processors</span><br><span class="line">Creating 4.0 filesystem on squashfs-root.bin.new, block size 262144.</span><br><span class="line">[=======================================================================================================================================================================================================================================================================================================================================/] 4844/4844 100%</span><br><span class="line"></span><br><span class="line">Exportable Squashfs 4.0 filesystem, xz compressed, data block size 262144</span><br><span class="line">  compressed data, compressed metadata, compressed fragments,</span><br><span class="line">  no xattrs, compressed ids</span><br><span class="line">  duplicates are removed</span><br><span class="line">Filesystem size 24391.34 Kbytes (23.82 Mbytes)</span><br><span class="line">  31.05% of uncompressed filesystem size (78564.39 Kbytes)</span><br><span class="line">Inode table size 37534 bytes (36.65 Kbytes)</span><br><span class="line">  20.36% of uncompressed inode table size (184374 bytes)</span><br><span class="line">Directory table size 52864 bytes (51.62 Kbytes)</span><br><span class="line">  41.62% of uncompressed directory table size (127006 bytes)</span><br><span class="line">Number of duplicate files found 982</span><br><span class="line">Number of inodes 5590</span><br><span class="line">Number of files 4779</span><br><span class="line">Number of fragments 137</span><br><span class="line">Number of symbolic links 508</span><br><span class="line">Number of device nodes 1</span><br><span class="line">Number of fifo nodes 0</span><br><span class="line">Number of socket nodes 0</span><br><span class="line">Number of directories 302</span><br><span class="line">Number of hard-links 0</span><br><span class="line">Number of ids (unique uids + gids) 1</span><br><span class="line">Number of uids 1</span><br><span class="line">  root (0)</span><br><span class="line">Number of gids 1</span><br><span class="line">  root (0)</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â”œâ”€â”€ squashfs-root</span><br><span class="line">â”œâ”€â”€ squashfs-root.bin.new</span><br><span class="line">â””â”€â”€ ubinize.sh</span><br><span class="line"></span><br><span class="line">2 directories, 4 files</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# ./ubinize.sh ./img-2059293214_vol-kernel.ubifs ./squashfs-root.bin.new <span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å†…æ ¸æ–‡ä»¶ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¨‹åºæ–‡ä»¶</span></span><br><span class="line">ubinize: volume size was not specified <span class="keyword">in</span> section <span class="string">&quot;kernel&quot;</span>, assume minimum to fit image <span class="string">&quot;./img-2059293214_vol-kernel.ubifs&quot;</span>3174400 bytes (3.0 MiB)</span><br><span class="line">ubinize: volume size was not specified <span class="keyword">in</span> section <span class="string">&quot;rootfs&quot;</span>, assume minimum to fit image <span class="string">&quot;./squashfs-root.bin.new&quot;</span>24977408 bytes (23.8 MiB)</span><br><span class="line"><span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">(venv) root@localhost:/route_package/ubifs-root/miwifi_rd15_firmware_23a4f_1.0.68.bin# tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-kernel.ubifs</span><br><span class="line">â”œâ”€â”€ img-2059293214_vol-ubi_rootfs.ubifs</span><br><span class="line">â”œâ”€â”€ r3600-raw-img.bin <span class="comment"># è„šæœ¬å†™æ­»äº†è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">â”œâ”€â”€ squashfs-root</span><br><span class="line">â”œâ”€â”€ squashfs-root.bin.new</span><br><span class="line">â””â”€â”€ ubinize.sh</span><br><span class="line"></span><br><span class="line">2 directories, 5 files</span><br></pre></td></tr></table></figure><h1 id="åˆ·å…¥"><a href="#åˆ·å…¥" class="headerlink" title="åˆ·å…¥"></a>åˆ·å…¥</h1><p>ä½¿ç”¨ <code>scp</code> è¿æ¥åˆ°è·¯ç”±å™¨ å°†æ–°é•œåƒè¿›å…¥ <code>/tmp</code> ç›®å½•</p><p>åœ¨ è·¯ç”±å™¨ä¸­æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">r0_mtd=$(grep <span class="string">&#x27;&quot;rootfs&quot;&#x27;</span>   /proc/mtd | awk -F: <span class="string">&#x27;&#123;print substr($1,4)&#125;&#x27;</span>)</span><br><span class="line">r1_mtd=$(grep <span class="string">&#x27;&quot;rootfs_1&quot;&#x27;</span> /proc/mtd | awk -F: <span class="string">&#x27;&#123;print substr($1,4)&#125;&#x27;</span>)</span><br><span class="line">os_idx=$(nvram get flag_boot_rootfs)</span><br><span class="line">mtd_cur=$((<span class="variable">$r0_mtd</span>+<span class="variable">$&#123;os_idx:-0&#125;</span>))</span><br><span class="line">mtd_nxt=$((<span class="variable">$r0_mtd</span>+<span class="variable">$r1_mtd</span>-<span class="variable">$mtd_cur</span>))</span><br><span class="line">MTD_DEV=/dev/mtd<span class="variable">$mtd_nxt</span></span><br><span class="line"></span><br><span class="line">ubiformat <span class="variable">$MTD_DEV</span> -f r3600-raw-img.bin</span><br><span class="line"></span><br><span class="line">nvram <span class="built_in">set</span> flag_ota_reboot=1</span><br><span class="line">nvram commit</span><br><span class="line"></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h1 id="æ•‘ç –"><a href="#æ•‘ç –" class="headerlink" title="æ•‘ç –"></a>æ•‘ç –</h1><ul><li><a href="https://www1.miwifi.com/miwifi_download.html">https://www1.miwifi.com/miwifi_download.html</a></li></ul><p>ä¸‹è½½ å°ç±³è·¯ç”±å™¨ä¿®å¤å·¥å…·</p><p>é€‰æ‹©ç¬¬ä¸€æ­¥ä¸‹è½½çš„å®˜æ–¹é•œåƒç­‰å¾…ç»“æœçš„å‘ç”Ÿå°±è¡Œ</p><h1 id="æˆæœå±•ç¤º"><a href="#æˆæœå±•ç¤º" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@XiaoQiang:~# netstat -nlp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       <span class="keyword">in</span> out PID/Program name</span><br><span class="line">tcp        0      0 127.0.0.1:784           0.0.0.0:*               LISTEN       0 0 9150/tbusd</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN       0 0 6008/nginx.conf -g</span><br><span class="line">tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN       0 0 9209/dnsmasq</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN       0 0 9038/dropbear</span><br><span class="line">tcp        0      0 127.0.0.1:8920          0.0.0.0:*               LISTEN       0 0 6026/fcgi-cgi</span><br><span class="line">tcp        0      0 127.0.0.1:6010          0.0.0.0:*               LISTEN       0 0 24201/dropbear</span><br><span class="line">tcp        0      0 :::80                   :::*                    LISTEN       0 0 6008/nginx.conf -g</span><br><span class="line">tcp        0      0 ::1:53                  :::*                    LISTEN       0 0 9209/dnsmasq</span><br><span class="line">tcp        0      0 :::22                   :::*                    LISTEN       0 0 9038/dropbear</span><br><span class="line">udp        0      0 127.0.0.1:514           0.0.0.0:*                            0 0 10053/syslog-ng</span><br><span class="line">udp        0      0 127.0.0.1:53            0.0.0.0:*                            0 0 9209/dnsmasq</span><br><span class="line">udp        0      0 0.0.0.0:67              0.0.0.0:*                            0 0 9209/dnsmasq</span><br><span class="line">udp        0      0 127.0.0.1:9900          0.0.0.0:*                            0 0 6301/hostapd</span><br><span class="line">udp        0      0 127.0.0.1:9902          0.0.0.0:*                            0 0 6300/wpa_supplicant</span><br><span class="line">udp        0      0 :::546                  :::*                                 0 0 29454/odhcp6c</span><br><span class="line">udp        0      0 :::547                  :::*                                 0 0 6190/odhcpd</span><br><span class="line">udp        0      0 ::1:53                  :::*                                 0 0 9209/dnsmasq</span><br><span class="line">Active UNIX domain sockets (only servers)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node PID/Program name    Path</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING      13312 10053/syslog-ng     /var/syslog-ng.ctl</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING       8234 526/ubusd           /var/run/ubus.sock</span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="ä¿®æ”¹XiaoQiangé»˜è®¤dns"><a href="#ä¿®æ”¹XiaoQiangé»˜è®¤dns" class="headerlink" title="ä¿®æ”¹XiaoQiangé»˜è®¤dns"></a>ä¿®æ”¹<code>XiaoQiang</code>é»˜è®¤dns</h2><p><code>/etc/config/dhcp</code> æ–‡ä»¶ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">config dnsmasq</span><br><span class="line">        ...</span><br><span class="line">        list server &#x27;192.168.2.9&#x27;</span><br><span class="line"></span><br><span class="line">config dhcp &#x27;lan&#x27;</span><br><span class="line">        ...</span><br><span class="line">        option dns1 &#x27;192.168.2.9&#x27;</span><br><span class="line">        option dns2 &#x27;223.5.5.5&#x27;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://v2ex.com/t/746094">https://v2ex.com/t/746094</a></li><li><a href="https://www.right.com.cn/forum/thread-218346-1-1.html">https://www.right.com.cn/forum/thread-218346-1-1.html</a></li><li><a href="https://github.com/geekman/xqrepack">https://github.com/geekman/xqrepack</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ„Ÿè§‰é™æ€ipç»‘å®šäºŒæ¬¡ç¡®è®¤ä¸å¥½ç”¨&lt;/p&gt;
&lt;p&gt;é‚£å°± è§£åŒ… æè‡ªå·±çš„è·¯ç”±&lt;/p&gt;
&lt;h1 id=&quot;è·å–å¼€å‘åŒ…&quot;&gt;&lt;a href=&quot;#è·å–å¼€å‘åŒ…&quot; class=&quot;headerlink&quot; title=&quot;è·å–å¼€å‘åŒ…&quot;&gt;&lt;/a&gt;è·å–å¼€å‘åŒ…&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>ç© è·¯ç”±å™¨ ä¹‹ å¼€ç¯‡</title>
    <link href="https://puzzle9.github.io/posts/2195506d/"/>
    <id>https://puzzle9.github.io/posts/2195506d/</id>
    <published>2024-10-22T06:06:18.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<p>æ© æ— èŠçš„äº§ç‰©</p><h1 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h1><p>å…¥æ‰‹äº† <code>be3600</code></p><p>å‘ç°æ²¡åŠæ³•è®¾ç½®<code>é™æ€è·¯ç”±</code></p><p>é‚£ ä¸èƒ½å°±è¿™ä¹ˆæ”¾å¼ƒäº†</p><h1 id="å¼€-ssh"><a href="#å¼€-ssh" class="headerlink" title="å¼€ ssh"></a>å¼€ <code>ssh</code></h1><p>æ„Ÿè°¢ <code>æ©å±±</code> çš„å¤§ä½¬ä»¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Anvram%20set%20ssh_en%3D1&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Anvram%20commit&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0Ased%20-i%20&#x27;s%2Fchannel%3D.*%2Fchannel%3D%22debug%22%2Fg&#x27;%20%2Fetc%2Finit.d%2Fdropbear&#x27;&quot;</span></span><br><span class="line">curl -X POST http://192.168.31.1/cgi-bin/luci/;stok=token/api/xqsystem/start_binding -d <span class="string">&quot;uid=1234&amp;key=1234&#x27;%0A%2Fetc%2Finit.d%2Fdropbear%20start&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>è®¡ç®— <code>ssh</code> å¯†ç  æ³¨æ„ <code>sn</code> å¤§å°å†™é—®é¢˜</p><ul><li><a href="https://miwifi.dev/ssh">https://miwifi.dev/ssh</a></li></ul><h1 id="å¼€å¯é™æ€è·¯ç”±"><a href="#å¼€å¯é™æ€è·¯ç”±" class="headerlink" title="å¼€å¯é™æ€è·¯ç”±"></a>å¼€å¯é™æ€è·¯ç”±</h1><h2 id="ä¿®æ”¹é˜²ç«å¢™"><a href="#ä¿®æ”¹é˜²ç«å¢™" class="headerlink" title="ä¿®æ”¹é˜²ç«å¢™"></a>ä¿®æ”¹é˜²ç«å¢™</h2><ul><li><code>/etc/config/firewall</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">config defaults</span><br><span class="line">option syn_flood &#x27;0&#x27;</span><br><span class="line">option input &#x27;ACCEPT&#x27;</span><br><span class="line">option output &#x27;ACCEPT&#x27;</span><br><span class="line">option forward &#x27;REJECT&#x27; # æ”¹æˆ ACCEPT</span><br><span class="line">option drop_invalid &#x27;1&#x27; # æ”¹æˆ 0</span><br><span class="line"></span><br><span class="line">config zone</span><br><span class="line">option name &#x27;lan&#x27;</span><br><span class="line">option network &#x27;lan&#x27;</span><br><span class="line">option input &#x27;ACCEPT&#x27;</span><br><span class="line">option output &#x27;ACCEPT&#x27;</span><br><span class="line">option forward &#x27;REJECT&#x27; # æ”¹æˆ ACCEPT</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®é™æ€è·¯ç”±"><a href="#è®¾ç½®é™æ€è·¯ç”±" class="headerlink" title="è®¾ç½®é™æ€è·¯ç”±"></a>è®¾ç½®é™æ€è·¯ç”±</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uci add network route</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].interface=lan</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].target=192.168.11.0</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].netmask=255.255.255.0</span><br><span class="line">uci <span class="built_in">set</span> network.@route[-1].gateway=192.168.2.9</span><br><span class="line">uci commit network</span><br><span class="line"></span><br><span class="line">uci show network</span><br></pre></td></tr></table></figure><p>é‡å¯åå°±å¯ä»¥ç”Ÿæ•ˆäº†</p><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://www.right.com.cn/forum/thread-8321180-1-1.html">https://www.right.com.cn/forum/thread-8321180-1-1.html</a></li><li><a href="https://github.com/openwrt-xiaomi/xmir-patcher/issues/19">https://github.com/openwrt-xiaomi/xmir-patcher/issues/19</a></li><li><a href="https://www.right.com.cn/forum/forum.php?mod=redirect&goto=findpost&ptid=6601141&pid=14997935">https://www.right.com.cn/forum/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=6601141&amp;pid=14997935</a></li><li><a href="https://www.right.com.cn/forum/thread-7673021-1-1.html">https://www.right.com.cn/forum/thread-7673021-1-1.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© æ— èŠçš„äº§ç‰©&lt;/p&gt;
&lt;h1 id=&quot;å‰ç½®æ¡ä»¶&quot;&gt;&lt;a href=&quot;#å‰ç½®æ¡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å‰ç½®æ¡ä»¶&quot;&gt;&lt;/a&gt;å‰ç½®æ¡ä»¶&lt;/h1&gt;&lt;p&gt;å…¥æ‰‹äº† &lt;code&gt;be3600&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°æ²¡åŠæ³•è®¾ç½®&lt;code&gt;é™æ€è·¯</summary>
      
    
    
    
    <category term="è·¯ç”±å™¨" scheme="https://puzzle9.github.io/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>LLM åˆæ¢ ğŸ•Š</title>
    <link href="https://puzzle9.github.io/posts/44c7d218/"/>
    <id>https://puzzle9.github.io/posts/44c7d218/</id>
    <published>2024-09-11T16:59:28.000Z</published>
    <updated>2025-05-11T06:12:58.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å—¯ <code>vgpu</code> å¾ˆé‡è¦<br>ç½‘é€Ÿã€ç¡¬ç›˜æ€æ‰‹</p></blockquote><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><ul><li><code>NVIDIA GeForce GTX 1060 5GB</code></li><li><code>WSL</code> <code>Debian Sid</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+---------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 530.41.03              Driver Version: 531.41       CUDA Version: 12.1     |</span><br><span class="line">|-----------------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name                  Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf            Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                      |               MIG M. |</span><br><span class="line">|=========================================+======================+======================|</span><br><span class="line">|   0  NVIDIA GeForce GTX 1060 5GB     On | 00000000:08:00.0  On |                  N/A |</span><br><span class="line">|  0%   53C    P8               10W / 120W|    878MiB /  5120MiB |      6%      Default |</span><br><span class="line">|                                         |                      |                  N/A |</span><br><span class="line">+-----------------------------------------+----------------------+----------------------+</span><br><span class="line"></span><br><span class="line">+---------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                            |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                            GPU Memory |</span><br><span class="line">|        ID   ID                                                             Usage      |</span><br><span class="line">|=======================================================================================|</span><br><span class="line">|  No running processes found                                                           |</span><br><span class="line">+---------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h1 id="MLC-LLM"><a href="#MLC-LLM" class="headerlink" title="MLC LLM"></a>MLC LLM</h1><ul><li><a href="https://github.com/mlc-ai/mlc-llm">https://github.com/mlc-ai/mlc-llm</a></li></ul><p>è¿™ä¸ª ä»–æµè§ˆå™¨ä¹Ÿèƒ½è·‘çš„ !!!</p><blockquote><p><a href="https://huggingface.co/mlc-ai/Phi-3.5-mini-instruct-q4f16_1-MLC">Phi-3.5-mini-instruct-q4f16_1-MLC</a></p></blockquote><p>æˆ‘è¿™ä¸ªæ˜¾å­˜è¯•éªŒäº†ä¸€åœˆ ä¹Ÿå°±è¿™ä¸ªèƒ½è·‘èµ·æ¥ å…¶ä½™çš„ å°± <code>boom</code></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ç”¨çš„ <code>cuad 12.1</code></p><p>è¿™ä¸ªéœ€è¦çš„æ‰©å±•åŒ… <code>nvidia-cuda-toolkit</code> <code>debian</code> åœ¨ <code>sid</code> æ‰æä¾›äº†</p><h3 id="å…ˆæ›´æ”¹ç‰ˆæœ¬"><a href="#å…ˆæ›´æ”¹ç‰ˆæœ¬" class="headerlink" title="å…ˆæ›´æ”¹ç‰ˆæœ¬"></a>å…ˆæ›´æ”¹ç‰ˆæœ¬</h3><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/debian/">https://mirrors.tuna.tsinghua.edu.cn/help/debian/</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> /etc/apt/sources.list.d/debian.sources</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb https://mirrors.tuna.tsinghua.edu.cn/debian/ sid main contrib non-free non-free-firmware&quot;</span> &gt; /etc/apt/sources.list</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…æ‰€éœ€æ‰©å±•"><a href="#å®‰è£…æ‰€éœ€æ‰©å±•" class="headerlink" title="å®‰è£…æ‰€éœ€æ‰©å±•"></a>å®‰è£…æ‰€éœ€æ‰©å±•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt install nvidia-cuda-toolkit</span><br><span class="line">apt install git git-lfs</span><br><span class="line"></span><br><span class="line">git lfs install</span><br></pre></td></tr></table></figure><h3 id="å†å®‰è£…-conda"><a href="#å†å®‰è£…-conda" class="headerlink" title="å†å®‰è£… conda"></a>å†å®‰è£… <code>conda</code></h3><ul><li><a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html">https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl https://repo.anaconda.com/pkgs/misc/gpgkeys/anaconda.asc | gpg --dearmor &gt; conda.gpg</span><br><span class="line">install -o root -g root -m 644 conda.gpg /usr/share/keyrings/conda-archive-keyring.gpg</span><br><span class="line">gpg --keyring /usr/share/keyrings/conda-archive-keyring.gpg --no-default-keyring --fingerprint 34161F5BF5EB1D4BFBBB8F0A8AEB4F8B29D82806</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/conda-archive-keyring.gpg] https://repo.anaconda.com/pkgs/misc/debrepo/conda stable main&quot;</span> &gt; /etc/apt/sources.list.d/conda.list</span><br><span class="line"></span><br><span class="line">apt update</span><br><span class="line">apt install conda</span><br></pre></td></tr></table></figure><h2 id="å¼€è·‘"><a href="#å¼€è·‘" class="headerlink" title="å¼€è·‘"></a>å¼€è·‘</h2><h3 id="ä¸‹è½½æ¨¡å‹"><a href="#ä¸‹è½½æ¨¡å‹" class="headerlink" title="ä¸‹è½½æ¨¡å‹"></a>ä¸‹è½½æ¨¡å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /llm/mlc-llm</span><br><span class="line"></span><br><span class="line">GIT_LFS_SKIP_SMUDGE=1 git <span class="built_in">clone</span> https://huggingface.co/mlc-ai/Phi-3.5-mini-instruct-q4f16_1-MLC</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> Phi-3.5-mini-instruct-q4f16_1-MLC</span><br><span class="line">git lfs pull</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /llm/</span><br><span class="line">conda create -n ai python=3.12</span><br><span class="line">conda activate ai</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://llm.mlc.ai/docs/install/mlc_llm.html#install-mlc-packages</span></span><br><span class="line"></span><br><span class="line">python -m pip install --pre -U -f https://mlc.ai/wheels mlc-llm-nightly-cu121 mlc-ai-nightly-cu121</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•</span></span><br><span class="line">python -c <span class="string">&quot;import mlc_llm; print(mlc_llm)&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å¼€è·‘-1"><a href="#å¼€è·‘-1" class="headerlink" title="å¼€è·‘"></a>å¼€è·‘</h3><blockquote><p>å¯ä»¥ä½“ä¼šåˆ° ä»€ä¹ˆå«åšç»™å‡ºè¹¦å­—</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /llm/</span><br><span class="line">conda activate ai</span><br><span class="line"></span><br><span class="line">mlc_llm chat Phi-3.5-mini-instruct-q4f16_1-MLC</span><br></pre></td></tr></table></figure><p><img src="/posts/44c7d218/mlc_llm_chat.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å—¯ &lt;code&gt;vgpu&lt;/code&gt; å¾ˆé‡è¦&lt;br&gt;ç½‘é€Ÿã€ç¡¬ç›˜æ€æ‰‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;é…ç½®&quot;&gt;&lt;a href=&quot;#é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®&quot;&gt;&lt;/a&gt;é…ç½®&lt;/h1&gt;&lt;ul&gt;</summary>
      
    
    
    
    <category term="LLM" scheme="https://puzzle9.github.io/categories/LLM/"/>
    
    
  </entry>
  
  <entry>
    <title>pve åˆæ¢ ğŸ•Š</title>
    <link href="https://puzzle9.github.io/posts/ef0dfae5/"/>
    <id>https://puzzle9.github.io/posts/ef0dfae5/</id>
    <published>2024-09-11T16:59:08.000Z</published>
    <updated>2025-06-05T13:01:52.616Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><code>one boom all boom</code></p></blockquote><ul><li><a href="https://pve.proxmox.com/">https://pve.proxmox.com/</a></li></ul><h1 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h1><p>ä¸€å®šè¦æœ‰ä¸ª <code>è·¯ç”±å™¨</code> å¯ä»¥å’Œè®¾å¤‡ç”¨ç½‘çº¿è¿æ¥çš„<br>ä¸€å®šè¦æœ‰ä¸ª <code>æµè§ˆå™¨</code> å¯ä»¥å’Œè·¯ç”±å™¨è¿æ¥çš„<br>ä¸€å®šè¦æœ‰ä¸ª <code>uç›˜</code> å¯ä»¥æ ¼å¼åŒ–å’Œè®¾å¤‡ä¼ æ–‡ä»¶çš„<br>è®¾å¤‡å¯ä»¥æ¥ <code>æ˜¾ç¤ºå™¨</code></p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>æˆ‘ç”¨çš„ ç¬”è®°æœ¬ æ•´çš„æ— çº¿ç½‘å¡ éš¾åº¦æ‹‰æ»¡</p><p>å®‰è£…æ—¶</p><ul><li>å°† <code>swap</code> åˆ†åŒºè®¾ç½®ä¸º <code>0</code></li><li>å°†åˆ†åŒºç±»å‹è®¾ç½®ä¸º<br><code>xfs</code> <a href="https://www.reddit.com/r/DataHoarder/comments/11ar65f/linux_filesystems_ext4_vs_xfs_what_to_choose_what/">https://www.reddit.com/r/DataHoarder/comments/11ar65f/linux_filesystems_ext4_vs_xfs_what_to_choose_what/</a></li><li>å°† ç½‘ç»œè¿æ¥ é€‰ä¸º <code>ç½‘å£</code> é€‰<code>wifi</code>ä¹Ÿæ²¡äº‹</li><li>ç½‘ç»œçš„ <code>ip</code> åœ°å€é…ç½®æˆä¸å†²çªçš„ å»ºè®®æä¸ªæ–°ç½‘æ®µ</li></ul><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="è®¾å¤‡å…¥ç½‘"><a href="#è®¾å¤‡å…¥ç½‘" class="headerlink" title="è®¾å¤‡å…¥ç½‘"></a>è®¾å¤‡å…¥ç½‘</h2><p>ä¸»è¦ä¿®æ”¹ <code>/etc/network/interfaces</code></p><p>ä¸å‡ºæ„å¤– ç”¨ç½‘çº¿è¿æ¥å æµè§ˆå™¨å¯ä»¥è®¿é—® <code>8006</code> ç«¯å£äº†</p><h2 id="è¿æ¥-wifi-iwd"><a href="#è¿æ¥-wifi-iwd" class="headerlink" title="è¿æ¥ wifi iwd"></a>è¿æ¥ <code>wifi</code> <code>iwd</code></h2><ul><li><a href="https://wiki.debian.org/WiFi/HowToUse#iwd">https://wiki.debian.org/WiFi/HowToUse#iwd</a></li><li><a href="https://wiki.archlinuxcn.org/wiki/Iwd">https://wiki.archlinuxcn.org/wiki/Iwd</a></li><li><a href="https://pve.proxmox.com/wiki/Network_Configuration">https://pve.proxmox.com/wiki/Network_Configuration</a></li></ul><p>è¿æ¥æˆåŠŸå éœ€è¦ä¿®æ”¹ <code>/etc/network/interfaces</code> æ–‡ä»¶<br>ä¹‹å‰é‚£ä¸²åå­— é€šå¸¸ä¼šå˜æˆ <code>wlan</code><br>å†è€…å‡ºç°äº†å‡ ç§è¿æ¥æ¨¡å¼</p><h2 id="dhcp-æœåŠ¡"><a href="#dhcp-æœåŠ¡" class="headerlink" title="dhcp æœåŠ¡"></a><code>dhcp</code> æœåŠ¡</h2><ul><li><a href="https://wiki.debian.org/DHCP_Server">https://wiki.debian.org/DHCP_Server</a></li></ul><p>ç”¨çš„ <a href="https://packages.debian.org/bookworm/isc-dhcp-server">isc-dhcp-server</a></p><h2 id="ä¿®æ”¹æ—¶é—´åŒæ­¥æœåŠ¡-chrony"><a href="#ä¿®æ”¹æ—¶é—´åŒæ­¥æœåŠ¡-chrony" class="headerlink" title="ä¿®æ”¹æ—¶é—´åŒæ­¥æœåŠ¡ chrony"></a>ä¿®æ”¹æ—¶é—´åŒæ­¥æœåŠ¡ <code>chrony</code></h2><p><code>/etc/chrony/chrony.conf</code> æ–‡ä»¶ä¸­çš„ <code>pool</code> å­—æ®µ</p><h2 id="åˆ é™¤-local-lvm-åˆ†åŒº"><a href="#åˆ é™¤-local-lvm-åˆ†åŒº" class="headerlink" title="åˆ é™¤ local-lvm åˆ†åŒº"></a>åˆ é™¤ <code>local-lvm</code> åˆ†åŒº</h2><p>ç›´æ¥ç•Œé¢æ“ä½œå³å¯</p><h2 id="å…³é—­ç¬”è®°æœ¬ç›’ç›–ä¼‘çœ "><a href="#å…³é—­ç¬”è®°æœ¬ç›’ç›–ä¼‘çœ " class="headerlink" title="å…³é—­ç¬”è®°æœ¬ç›’ç›–ä¼‘çœ "></a>å…³é—­ç¬”è®°æœ¬ç›’ç›–ä¼‘çœ </h2><ul><li><a href="https://gist.github.com/h1code2/33c3c5a9000fc231d1dc6eb968953965">https://gist.github.com/h1code2/33c3c5a9000fc231d1dc6eb968953965</a></li></ul><p><code>/etc/systemd/logind.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#HandlePowerKeyæŒ‰ä¸‹ç”µæºé”®åçš„è¡Œä¸ºï¼Œé»˜è®¤power off</span></span><br><span class="line"><span class="comment">#HandleSleepKey æŒ‰ä¸‹æŒ‚èµ·é”®åçš„è¡Œä¸ºï¼Œé»˜è®¤suspend</span></span><br><span class="line"><span class="comment">#HandleHibernateKeyæŒ‰ä¸‹ä¼‘çœ é”®åçš„è¡Œä¸ºï¼Œé»˜è®¤hibernate</span></span><br><span class="line"><span class="comment">#HandleLidSwitchåˆä¸Šç¬”è®°æœ¬ç›–åçš„è¡Œä¸ºï¼Œé»˜è®¤suspendï¼ˆæ”¹ä¸ºignoreï¼›å³åˆç›–ä¸ä¼‘çœ ï¼‰åœ¨åŸæ–‡ä»¶ä¸­ï¼Œè¿˜è¦å»æ‰å½“å‰è¡Œå’ŒLidSwitchIgnoreInhibited=yesè¿™è¡Œå‰é¢çš„ #</span></span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://pve.sqlsec.com/">https://pve.sqlsec.com/</a></li><li><a href="https://post.smzdm.com/p/akle62mk/">https://post.smzdm.com/p/akle62mk/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;one boom all boom&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://pve.proxmox.com/&quot;&gt;https://pve.proxmox.com/&lt;/a&gt;&lt;/l</summary>
      
    
    
    
    
    <category term="pve" scheme="https://puzzle9.github.io/tags/pve/"/>
    
  </entry>
  
  <entry>
    <title>wsl åˆæ¢</title>
    <link href="https://puzzle9.github.io/posts/ce4a16e7/"/>
    <id>https://puzzle9.github.io/posts/ce4a16e7/</id>
    <published>2024-09-11T15:30:59.000Z</published>
    <updated>2025-05-11T06:12:58.235Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€å¥½ç”¨çš„ <code>linux</code> å‘è¡Œç‰ˆ</p></blockquote><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å»ºè®®ç›´æ¥å» <code>github</code> ä¸‹è½½æœ€æ–°ç‰ˆæœ¬æ¥å®‰è£…</p><ul><li><a href="https://github.com/microsoft/WSL/releases">https://github.com/microsoft/WSL/releases</a></li></ul><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\puzzle&gt; wsl <span class="literal">--version</span></span><br><span class="line">WSL ç‰ˆæœ¬ï¼š <span class="number">2.3</span>.<span class="number">17.0</span></span><br><span class="line">å†…æ ¸ç‰ˆæœ¬ï¼š <span class="number">5.15</span>.<span class="number">153.1</span><span class="literal">-2</span></span><br><span class="line">WSLg ç‰ˆæœ¬ï¼š <span class="number">1.0</span>.<span class="number">64</span></span><br><span class="line">MSRDC ç‰ˆæœ¬ï¼š <span class="number">1.2</span>.<span class="number">5326</span></span><br><span class="line">Direct3D ç‰ˆæœ¬ï¼š <span class="number">1.611</span>.<span class="number">1</span><span class="literal">-81528511</span></span><br><span class="line">DXCore ç‰ˆæœ¬ï¼š <span class="number">10.0</span>.<span class="number">26100.1</span><span class="literal">-240331-1435</span>.ge<span class="literal">-release</span></span><br><span class="line">Windows ç‰ˆæœ¬ï¼š <span class="number">10.0</span>.<span class="number">22631.4037</span></span><br></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><ul><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/wsl-config">https://learn.microsoft.com/zh-cn/windows/wsl/wsl-config</a></li></ul><p>æˆ–è€…ç”¨ <code>WSL Settings</code> è¿›è¡Œä¿®æ”¹</p><h2 id="wslconfig"><a href="#wslconfig" class="headerlink" title=".wslconfig"></a>.wslconfig</h2><p><code>C:\Users\&lt;UserName&gt;\.wslconfig</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[wsl2]</span><br><span class="line">processors=4</span><br><span class="line">memory=8GB</span><br><span class="line"># å…³é—­ swap</span><br><span class="line">swap=0</span><br><span class="line"># ç½‘ç»œæ¨¡å¼ä¸ºé•œåƒ</span><br><span class="line">networkingMode=mirrored</span><br><span class="line"># å…³é—­ wslg</span><br><span class="line">guiApplications=false</span><br><span class="line"></span><br><span class="line">[experimental]</span><br><span class="line">hostAddressLoopback=true</span><br><span class="line"># VHD ç¨€ç–å»ºè®®å…³é—­ ä¸ºäº†åç»­å¯ä»¥ç»•è¿‡wslè¯»å–æ–‡ä»¶ https://github.com/microsoft/WSL/issues/4103</span><br><span class="line">sparseVhd=false</span><br></pre></td></tr></table></figure><h2 id="wsl-conf"><a href="#wsl-conf" class="headerlink" title="wsl.conf"></a>wsl.conf</h2><p><code>/etc/wsl.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[automount]</span><br><span class="line">enabled = false</span><br><span class="line">mountFsTab = true</span><br><span class="line"></span><br><span class="line">[network]</span><br><span class="line">hostname = debian</span><br><span class="line">generateHosts = true</span><br><span class="line">generateResolvConf = true</span><br><span class="line"></span><br><span class="line">[interop]</span><br><span class="line">enabled = false</span><br><span class="line">appendWindowsPath = false</span><br><span class="line"></span><br><span class="line">[boot]</span><br><span class="line">systemd=true</span><br></pre></td></tr></table></figure><h1 id="è‡ªå®šä¹‰å‘è¡Œç‰ˆ"><a href="#è‡ªå®šä¹‰å‘è¡Œç‰ˆ" class="headerlink" title="è‡ªå®šä¹‰å‘è¡Œç‰ˆ"></a>è‡ªå®šä¹‰å‘è¡Œç‰ˆ</h1><p>ä¸‹è½½ä¸€ä¸ªå¯åŠ¨å™¨ å†æä¸€ä¸ªå‘è¡Œç‰ˆçš„åŒ… å°±å¯ä»¥</p><h2 id="å¯åŠ¨å™¨"><a href="#å¯åŠ¨å™¨" class="headerlink" title="å¯åŠ¨å™¨"></a>å¯åŠ¨å™¨</h2><ul><li><a href="https://github.com/yuk7/wsldl">https://github.com/yuk7/wsldl</a></li></ul><p><code>releases</code> ä¸­çš„ <code>icons.zip</code> è§£å‹å³å¯</p><h2 id="å‘è¡Œç‰ˆ"><a href="#å‘è¡Œç‰ˆ" class="headerlink" title="å‘è¡Œç‰ˆ"></a>å‘è¡Œç‰ˆ</h2><h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><ul><li><a href="https://salsa.debian.org/debian/WSL/-/blob/master/create-targz.sh">https://salsa.debian.org/debian/WSL/-/blob/master/create-targz.sh</a></li></ul><p>å‚è€ƒè¿™ä¸ªè‡ªå®šä¹‰å‘è¡Œç‰ˆ</p><p>åœ¨ <code>debian</code> ç³»ç»Ÿè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sid çš„è¯ systemd å¯åŠ¨éœ€è¦å¾ˆä¹… è¿˜åœ¨æŸ¥æ‰¾åŸå› </span></span><br><span class="line"></span><br><span class="line">DIST=<span class="string">&quot;bookworm&quot;</span></span><br><span class="line">debootstrap --<span class="built_in">arch</span> <span class="string">&quot;amd64&quot;</span> --exclude=debfoster --include=locales <span class="variable">$DIST</span> <span class="variable">$DIST</span> http://mirror.sjtu.edu.cn/debian</span><br><span class="line"><span class="built_in">chroot</span> <span class="variable">$DIST</span> apt remove vim-tiny nano &amp;&amp; apt install vim &amp;&amp; apt-get clean</span><br><span class="line"><span class="built_in">chroot</span> <span class="variable">$DIST</span> /bin/bash -c <span class="string">&quot;update-locale LANGUAGE=en_US.UTF-8 LC_ALL=C&quot;</span></span><br><span class="line"><span class="built_in">chroot</span> <span class="variable">$DIST</span> /bin/bash -c <span class="string">&quot;echo &#x27;en_US.UTF-8 UTF-8&#x27; &gt;&gt; /etc/locale.gen &amp;&amp; locale-gen&quot;</span></span><br><span class="line"><span class="comment"># https://github.com/microsoft/WSL/issues/6999 /tmpç›®å½•ä½¿ç”¨å†…å­˜</span></span><br><span class="line"><span class="built_in">chroot</span> <span class="variable">$DIST</span> /usr/bin/systemctl <span class="built_in">enable</span> /usr/share/systemd/tmp.mount</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$DIST</span></span><br><span class="line">tar --ignore-failed-read -czvf ../install.tar.gz *</span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><h4 id="ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link"><a href="#ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link" class="headerlink" title="ldconfig: &#x2F;usr&#x2F;lib&#x2F;wsl&#x2F;lib&#x2F;libcuda.so.1 is not a symbolic link"></a>ldconfig: &#x2F;usr&#x2F;lib&#x2F;wsl&#x2F;lib&#x2F;libcuda.so.1 is not a symbolic link</h4><ul><li><a href="https://github.com/microsoft/WSL/issues/11229">https://github.com/microsoft/WSL/issues/11229</a></li></ul><p>ç›®å‰æ¥çœ‹ å¥½åƒæ²¡å•¥å½±å“</p><h4 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h4><ul><li><a href="https://stackoverflow.com/questions/69968135">https://stackoverflow.com/questions/69968135</a></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WARNING: No blkio throttle.read_bps_device support</span><br><span class="line">WARNING: No blkio throttle.write_bps_device support</span><br><span class="line">WARNING: No blkio throttle.read_iops_device support</span><br><span class="line">WARNING: No blkio throttle.write_iops_device support</span><br></pre></td></tr></table></figure><p>çœ‹é‚£å”¯ä¸€çš„ç­”æ¡ˆ ä¹Ÿæ²¡å•¥å½±å“</p><h3 id="Alpine"><a href="#Alpine" class="headerlink" title="Alpine"></a>Alpine</h3><ul><li><a href="https://github.com/yuk7/AlpineWSL">https://github.com/yuk7/AlpineWSL</a></li><li><a href="https://github.com/puzzle9/AlpineWSL/blob/main/src_x64/Makefile">https://github.com/puzzle9/AlpineWSL/blob/main/src_x64/Makefile</a></li></ul><p>ç›´æ¥åœ¨ <code>workflows</code> è¿è¡Œæ‰“åŒ…å°±è¡Œ</p><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>å®ƒä½¿ç”¨çš„æ˜¯ <a href="https://wiki.alpinelinux.org/wiki/OpenRC">OpenRC</a><br>å…¶ä»–å¤§å¤šæ•°å‘è¡Œç‰ˆç”¨çš„ <a href="https://wiki.archlinux.org/title/Systemd">Systemd</a></p><p>æ‰€ä»¥ <code>/etc/wsl.conf</code> çš„ <code>boot</code> å°±å˜æˆäº† <a href="https://www.cnblogs.com/Hakurei-Reimu-Zh/p/18267770">è¿™æ ·</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/wsl.conf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[boot]</span></span><br><span class="line"><span class="string">command = mkdir -p /run/openrc/ &amp;&amp; touch /run/openrc/softlevel &amp;&amp; openrc</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h1 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h1><ul><li><a href="https://github.com/microsoft/terminal/">https://github.com/microsoft/terminal/</a></li></ul><h1 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h1><h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><ul><li><a href="https://github.com/andy-5/wslgit">https://github.com/andy-5/wslgit</a></li></ul><p>æœ‰è¿™ä¸ªå¯ä»¥ç”¨</p><p>ä¸è¿‡æˆ‘ç”¨çš„ <code>sublime merge</code> è¿™ä¸ªè‡ªå¸¦çš„ git å®¢æˆ·ç«¯</p><p>éœ€è¦ä¸¤è¾¹éƒ½é…ç½®ä¸‹ è´¦å·ä¿¡æ¯</p><p>ä»¥åŠ åœ¨<code>win</code>ä¸Š <code>git config --global --add safe.directory &quot;*&quot;</code></p><h2 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h2><p>ä½¿ç”¨ <code>idea</code> çš„ <code>remote</code></p><p>å­—ä½“æ˜¾ç¤ºæœ‰ç‚¹é—®é¢˜ å…¶ä½™è¿˜è¡Œ</p><p>å¦‚æœå¿½ç•¥ æ–‡ä»¶çš„ æ›´æ–°é€šçŸ¥ ç›´æ¥ç”¨ <code>\\wsl.localhost\</code> åœ¨ç¼–è¾‘å™¨æ‰“å¼€å³å¯</p><ul><li><a href="https://github.com/microsoft/WSL/issues/4739">https://github.com/microsoft/WSL/issues/4739</a></li></ul><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p><code>debian</code> å¸¦äº† <code>systemd</code> é‚£ç›´æ¥æ­£å¸¸ç”¨å°±è¡Œ<br>æœªç”¨åˆ° æ¡Œé¢ç‰ˆæœ¬</p><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ul><li><a href="https://docs.docker.com/engine/install/debian/">https://docs.docker.com/engine/install/debian/</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ca-certificates curl</span><br><span class="line">install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line"><span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \</span></span><br><span class="line"><span class="string">  <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$VERSION_CODENAME</span>&quot;</span>)</span> stable&quot;</span> | \</span><br><span class="line">  <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="etc-docker-daemon-json"><a href="#etc-docker-daemon-json" class="headerlink" title="/etc/docker/daemon.json"></a><code>/etc/docker/daemon.json</code></h4><ul><li><a href="https://docs.docker.com/reference/cli/dockerd/#daemon-configuration-file">https://docs.docker.com/reference/cli/dockerd/#daemon-configuration-file</a></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;default-address-pools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;base&quot;</span><span class="punctuation">:</span> <span class="string">&quot;172.17.0.0/16&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">24</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;proxies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;http-proxy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:10809&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;https-proxy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:10809&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// å…³é—­è‡ªå¸¦çš„é…ç½® é•œåƒç½‘ç»œç”¨åˆ° é˜²æ­¢ æœ¬æœºæ— æ³•è®¿é—®</span></span><br><span class="line">  <span class="attr">&quot;iptables&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹å¯åŠ¨é…ç½®"><a href="#ä¿®æ”¹å¯åŠ¨é…ç½®" class="headerlink" title="ä¿®æ”¹å¯åŠ¨é…ç½®"></a>ä¿®æ”¹å¯åŠ¨é…ç½®</h4><p><code>systemctl edit docker</code></p><ul><li><a href="https://github.com/systemd/systemd/issues/24208#issuecomment-1614658755">https://github.com/systemd/systemd/issues/24208#issuecomment-1614658755</a></li><li><a href="https://stackoverflow.com/a/68818218/6686061">https://stackoverflow.com/a/68818218/6686061</a></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/usr/bin/dockerd --config-file /etc/docker/daemon.json -H fd:// --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="Zone-Identifier"><a href="#Zone-Identifier" class="headerlink" title="Zone.Identifier"></a><code>Zone.Identifier</code></h2><ul><li><a href="https://github.com/microsoft/WSL/issues/7456">https://github.com/microsoft/WSL/issues/7456</a></li></ul><p>é—ç•™é—®é¢˜å§</p><p>æœ‰æ—¶ä» <code>win</code> ç»™ <code>wsl</code> å¤åˆ¶ä¼šå‡ºç°è¿™ä¸ªæ–‡ä»¶</p><h2 id="wsl-ç½‘é€Ÿæ…¢"><a href="#wsl-ç½‘é€Ÿæ…¢" class="headerlink" title="wsl ç½‘é€Ÿæ…¢"></a><code>wsl</code> ç½‘é€Ÿæ…¢</h2><ul><li><a href="https://github.com/microsoft/WSL/issues/4901">https://github.com/microsoft/WSL/issues/4901</a></li></ul><p>æˆ‘é‡è£…ç³»ç»Ÿåè§£å†³äº†</p><h2 id="æŒ‚è½½ç£ç›˜"><a href="#æŒ‚è½½ç£ç›˜" class="headerlink" title="æŒ‚è½½ç£ç›˜"></a>æŒ‚è½½ç£ç›˜</h2><ul><li><a href="https://github.com/microsoft/WSL/issues/6073">https://github.com/microsoft/WSL/issues/6073</a></li><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/wsl2-mount-disk">https://learn.microsoft.com/zh-cn/windows/wsl/wsl2-mount-disk</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET-CimInstance -query <span class="string">&quot;SELECT * from Win32_DiskDrive&quot;</span></span><br><span class="line">wsl --mount \\.\PHYSICALDRIVE* --bare</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t drvfs C: /mnt/c</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">wsl å¼€å‘æŒ‡å—</summary>
    
    
    
    <category term="wsl" scheme="https://puzzle9.github.io/categories/wsl/"/>
    
    
  </entry>
  
  <entry>
    <title>crypto</title>
    <link href="https://puzzle9.github.io/posts/68282885/"/>
    <id>https://puzzle9.github.io/posts/68282885/</id>
    <published>2024-02-12T03:11:25.000Z</published>
    <updated>2025-05-11T06:12:58.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä½ ä¹Ÿä¸æƒ³æˆ‘ä»¬çš„ç§˜å¯†è¢«åˆ«äººæ™“å¾—å§</p></blockquote><h1 id="å¯†ç å­¦"><a href="#å¯†ç å­¦" class="headerlink" title="å¯†ç å­¦"></a><code>å¯†ç å­¦</code></h1><ul><li><code>authenticity</code> çœŸå®æ€§</li><li><code>integrity</code> å®Œæ•´æ€§</li><li><code>non-repudiation</code> ä¸å¯å¦è®¤æ€§</li></ul><h2 id="Hash-å“ˆå¸Œ"><a href="#Hash-å“ˆå¸Œ" class="headerlink" title="Hash å“ˆå¸Œ"></a><code>Hash</code> å“ˆå¸Œ</h2><p>å°†ä»»æ„ä¸€ç»„æ•°æ®è½¬æ¢ä¸ºå›ºå®šé•¿åº¦ ç¡®ä¿æ— æ³•é€†å‘å‡ºåŸå§‹æ¶ˆæ¯</p><ul><li><code>md5</code></li><li><code>sha</code> <code>sha1</code> <code>sha256</code> <code>sha512</code> <code>sha3-512</code></li><li><code>bcrypt</code></li><li><code>argon2</code> <code>argon2d</code> <code>argon2i</code> <em>argon2id</em></li></ul><h2 id="Encryption-Decryption-åŠ å¯†ã€è§£å¯†"><a href="#Encryption-Decryption-åŠ å¯†ã€è§£å¯†" class="headerlink" title="Encryption Decryption åŠ å¯†ã€è§£å¯†"></a><code>Encryption Decryption</code> åŠ å¯†ã€è§£å¯†</h2><h3 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h3><p>åŠ å¯†ä¸è§£å¯† <em>å¯†é’¥ç›¸åŒ</em></p><ul><li><code>AES</code> <code>AES-128-CBC</code> <code>AES-256-GCM</code> <code>AES-GCM-SIV</code></li><li><code>ChaCha</code> <em>XChaCha20-Poly1305</em> <code>ChaCha20-Poly1305</code></li></ul><h3 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h3><p>åŠ å¯†ä¸è§£å¯† <em>å¯†é’¥ä¸åŒ</em> æœ‰ä¸€ä¸ª å…¬é’¥ <code>public key</code> å’Œ ç§é’¥ <code>private key</code></p><ul><li><code>RSA</code> <code>RSA-2048</code> <code>RSA-4096</code></li><li><em>ECIES</em> å†…éƒ¨ç”¨çš„ <code>aes</code></li></ul><h2 id="Key-Exchange-å¯†é’¥äº¤æ¢"><a href="#Key-Exchange-å¯†é’¥äº¤æ¢" class="headerlink" title="Key Exchange å¯†é’¥äº¤æ¢"></a><code>Key Exchange</code> å¯†é’¥äº¤æ¢</h2><p>å¦‚ä½•é˜²æ­¢ <code>Eve</code> æ™“å¾—<code>Alice</code> ç»™ <code>Bob</code> é€šè¿‡è‡ªå·±ä¼ é€’çš„æ¶ˆæ¯ ä¸è¿‡æ²¡æœ‰é˜²æ­¢ <code>Mallory</code></p><ul><li><code>ECDH</code></li><li><code>ECIES</code></li></ul><h2 id="Signed-æ•°å­—ç­¾å"><a href="#Signed-æ•°å­—ç­¾å" class="headerlink" title="Signed æ•°å­—ç­¾å"></a><code>Signed</code> æ•°å­—ç­¾å</h2><ul><li><code>ECDSA</code></li><li><code>EdDSA</code></li></ul><h1 id="ECC-æ¤­åœ†æ›²çº¿å¯†ç å­¦"><a href="#ECC-æ¤­åœ†æ›²çº¿å¯†ç å­¦" class="headerlink" title="ECC æ¤­åœ†æ›²çº¿å¯†ç å­¦"></a><code>ECC</code> æ¤­åœ†æ›²çº¿å¯†ç å­¦</h1><p>åº”ç”¨æœ‰ <code>ECIES</code> <code>ECDH</code> <code>ECDSA</code> ç­‰</p><p>è¿™ä¸‰ç±»æ¤­åœ†æ›²çº¿ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢</p><ul><li><em>ed25519</em> <code>ed448</code> æ‰­æ›²çˆ±å¾·åæ›²çº¿</li><li><code>secp256k1</code> ç»´å°”æ–¯ç‰¹æ‹‰æ–¯</li><li><code>x25519</code> è’™å“¥é©¬åˆ©æ›²çº¿</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://thiscute.world/series/%E5%86%99%E7%BB%99%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E7%9A%84%E5%AE%9E%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A6/">https://thiscute.world/series/å†™ç»™å¼€å‘äººå‘˜çš„å®ç”¨å¯†ç å­¦/</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%84%9B%E9%BA%97%E7%B5%B2%E8%88%87%E9%AE%91%E4%BC%AF">https://zh.wikipedia.org/wiki/æ„›éº—çµ²èˆ‡é®‘ä¼¯</a></li><li><a href="https://github.com/nakov/practical-cryptography-for-developers-book">https://github.com/nakov/practical-cryptography-for-developers-book</a></li><li><a href="https://www.zhihu.com/question/290541183/answer/2514279783">https://www.zhihu.com/question/290541183/answer/2514279783</a></li></ul>]]></content>
    
    
    <summary type="html">é‚£ä¸ªå¯†ç å­¦çš„äº‹</summary>
    
    
    
    <category term="crypto" scheme="https://puzzle9.github.io/categories/crypto/"/>
    
    
  </entry>
  
  <entry>
    <title>port çš„è½¬å‘</title>
    <link href="https://puzzle9.github.io/posts/59f193dd/"/>
    <id>https://puzzle9.github.io/posts/59f193dd/</id>
    <published>2023-10-11T05:49:23.000Z</published>
    <updated>2025-05-11T06:12:58.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æƒ³äº†æƒ³ <code>å†…ç½‘ç©¿é€</code> <code>ç«¯å£æ˜ å°„</code> éƒ½å±äº <code>ç«¯å£è½¬å‘</code> å‘€</p></blockquote><h1 id="ä¸»æœºåˆ—è¡¨"><a href="#ä¸»æœºåˆ—è¡¨" class="headerlink" title="ä¸»æœºåˆ—è¡¨"></a>ä¸»æœºåˆ—è¡¨</h1><table><thead><tr><th align="left">æ ‡è¯†</th><th align="left">åç§°</th><th align="left">IP</th><th align="left">ç½‘ç»œç±»å‹</th><th align="left">å¯è®¿é—®</th><th align="left">ç«¯å£åˆ—è¡¨</th></tr></thead><tbody><tr><td align="left"><code>local</code></td><td align="left"><code>æœ¬æœº</code></td><td align="left">192.168.1.10</td><td align="left">å†…å¤–ç½‘</td><td align="left"><code>jump</code></td><td align="left"><code>tcp/13128</code></td></tr><tr><td align="left"><code>jump</code></td><td align="left"><code>è·³æ¿æœº</code></td><td align="left">10.0.2.20</td><td align="left">å†…ç½‘</td><td align="left"><code>server_local</code>ã€<code>server_public</code></td><td align="left"><code>tcp/280</code></td></tr><tr><td align="left"><code>server_local</code></td><td align="left"><code>å†…ç½‘æœåŠ¡å™¨</code></td><td align="left">10.0.3.30</td><td align="left">å†…ç½‘</td><td align="left"><code>server_public</code></td><td align="left"><code>tcp/33306</code></td></tr><tr><td align="left"><code>server_public</code></td><td align="left"><code>å¤–ç½‘æœåŠ¡å™¨</code></td><td align="left">172.16.4.40</td><td align="left">å…¬ç½‘</td><td align="left"><code>jump</code></td><td align="left"></td></tr></tbody></table><h1 id="è½¬å‘ç±»å‹"><a href="#è½¬å‘ç±»å‹" class="headerlink" title="è½¬å‘ç±»å‹"></a>è½¬å‘ç±»å‹</h1><h2 id="æœ¬åœ°è½¬å‘"><a href="#æœ¬åœ°è½¬å‘" class="headerlink" title="æœ¬åœ°è½¬å‘"></a>æœ¬åœ°è½¬å‘</h2><blockquote><p>æŠŠ <code>æœåŠ¡å™¨</code> ä¸Š çš„ç«¯å£æ˜ å°„åˆ° <code>æœ¬æœº</code></p></blockquote><p>1.åœ¨å—é™ç½‘ç»œä¸­è®¿é—®æŸä¸ªæœåŠ¡å™¨æä¾›çš„ç«¯å£ã€å¸¸è§äºåªæä¾›äº†æœ¬åœ°<code>shell</code>ï¼Œéœ€è¦è®¿é—®<code>æœåŠ¡ç«¯</code>å…¶ä»–ç«¯å£</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L [æœ¬åœ°ç›‘å¬åœ°å€ localhost]:[æœ¬åœ°ç›‘å¬ç«¯å£]:[æœåŠ¡å™¨åœ°å€]:[æœåŠ¡å™¨ç›‘å¬ç«¯å£] [å¾…ç™»å½•ä¸»æœºç”¨æˆ·å]@[å¾…ç™»å½•ä¸»æœºåœ°å€]</span><br></pre></td></tr></table></figure><ul><li>è¿æ¥ <code>è·³æ¿æœº</code> å æŠŠ <code>è·³æ¿æœº</code> çš„ <code>280</code> ç«¯å£æ˜ å°„åˆ° <code>æœ¬æœº</code> çš„ <code>1280</code> ç«¯å£</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 1280:localhost:280 jump@10.0.2.20</span><br></pre></td></tr></table></figure><ul><li>è¿æ¥ <code>è·³æ¿æœº</code> å æŠŠ <code>å†…ç½‘æœåŠ¡å™¨</code> çš„ <code>33306</code> ç«¯å£æ˜ å°„åˆ° <code>æœ¬æœº</code> çš„ <code>13306</code> ç«¯å£</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 13306:10.0.3.30:33306 jump@10.0.2.20</span><br></pre></td></tr></table></figure><h2 id="è¿œç¨‹è½¬å‘"><a href="#è¿œç¨‹è½¬å‘" class="headerlink" title="è¿œç¨‹è½¬å‘"></a>è¿œç¨‹è½¬å‘</h2><blockquote><p>æŠŠ <code>æœ¬æœºã€ç›®æ ‡</code> ä¸Š çš„ç«¯å£æ˜ å°„åˆ° <code>æœåŠ¡å™¨</code>ã€è¿˜æœ‰ä¸ªå“äº®çš„åå­—å« <code>å†…ç½‘ç©¿é€ã€ç«¯å£æ˜ å°„</code></p></blockquote><ol><li>æ”¯ä»˜ã€ç™»å½•å›è°ƒç­‰</li><li>å†…ç½‘çš„æœåŠ¡å™¨é€šè¿‡æœ¬åœ°ä»£ç†ä¸Šç½‘</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R [ç›®æ ‡åœ°å€ localhost]:[ç›®æ ‡ç«¯å£]:[æœåŠ¡å™¨ç›‘å¬åœ°å€]:[æœåŠ¡å™¨ç›‘å¬ç«¯å£] [å¾…ç™»å½•ä¸»æœºç”¨æˆ·å]@[å¾…ç™»å½•ä¸»æœºåœ°å€]</span><br></pre></td></tr></table></figure><ul><li>è¿æ¥ <code>è·³æ¿æœº</code> å æŠŠ <code>æœ¬æœº</code> çš„ <code>13128</code> ç«¯å£æ˜ å°„åˆ° <code>è·³æ¿æœº</code> çš„ <code>23128</code> ç«¯å£</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R 13128:localhost:23128 jump@10.0.2.20</span><br></pre></td></tr></table></figure><ul><li>è¿æ¥ <code>è·³æ¿æœº</code> å æŠŠ <code>æœ¬æœº</code> çš„ <code>13128</code> ç«¯å£æ˜ å°„åˆ° <code>å¤–ç½‘æœåŠ¡å™¨</code> çš„ <code>43128</code> ç«¯å£</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæŠŠ æœ¬æœº çš„ 13128 æ˜ å°„åˆ° è·³æ¿æœº çš„ 23128</span></span><br><span class="line"> sh -R 13128:localhost:23128 jump@10.0.2.20</span><br><span class="line"><span class="comment"># å†æŠŠ è·³æ¿æœºçš„ 23128 æ˜ å°„åˆ° å¤–ç½‘æœåŠ¡å™¨çš„ 43128</span></span><br><span class="line"> sh -R 23128:0.0.0.0:43128 server_public@172.16.4.40</span><br><span class="line"><span class="comment"># å¦‚æœ æœ¬æœº å¯ä»¥ç›´æ¥è¿æ¥ å¤–ç½‘æœåŠ¡å™¨çš„ æ—¶æœ€ç®€å•</span></span><br><span class="line">ssh -R 13128:0.0.0.0:43128 server_public@172.16.4.40</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€è½¬å‘"><a href="#åŠ¨æ€è½¬å‘" class="headerlink" title="åŠ¨æ€è½¬å‘"></a>åŠ¨æ€è½¬å‘</h2><blockquote><p>åœ¨ <code>æœ¬æœº</code> ä¸Šå»ºç«‹ä¸€ä¸ª <code>socket</code> ä»£ç†ã€é€šè¿‡æ­¤ä»£ç†çš„æ•°æ® å°†é€šè¿‡ <code>æœåŠ¡ç«¯</code> è½¬å‘å‡ºå»</p></blockquote><ol><li>æ© å¥½åƒå°± <code>7890</code>ã€<code>20170</code> é‚£ç§ç«¯å£å§</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -D [æœ¬åœ°ç›‘å¬åœ°å€ localhost]:[æœ¬åœ°ç›‘å¬ç«¯å£] [å¾…ç™»å½•ä¸»æœºç”¨æˆ·å]@[å¾…ç™»å½•ä¸»æœºåœ°å€]</span><br></pre></td></tr></table></figure><ul><li>å°† <code>æœ¬æœº</code> <code>18080</code> ç«¯å£æ¥å—åˆ°çš„æ•°æ®é€šè¿‡ <code>è·³æ¿æœº</code> è½¬å‘å‡ºå»</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -D 18080 jump@10.0.2.20</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h1><ul><li><a href="https://github.com/st286/SSH-port-forwarding">https://github.com/st286/SSH-port-forwarding</a></li><li><a href="https://youguanxinqing.xyz/archives/154/">https://youguanxinqing.xyz/archives/154/</a></li><li><a href="https://jeremyxu2010.github.io/2018/12/ssh%E7%9A%84%E4%B8%89%E7%A7%8D%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/">https://jeremyxu2010.github.io/2018/12/sshçš„ä¸‰ç§ç«¯å£è½¬å‘/</a></li></ul>]]></content>
    
    
    <summary type="html">æ© å’Œç«¯å£æœ‰å…³çš„</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>é£æœº</title>
    <link href="https://puzzle9.github.io/posts/b1beabae/"/>
    <id>https://puzzle9.github.io/posts/b1beabae/</id>
    <published>2023-10-07T06:54:27.000Z</published>
    <updated>2025-05-11T06:12:58.228Z</updated>
    
    <content type="html"><![CDATA[<p>æ© é£æœº</p><p>åé£æœº</p><p>ä½ è¯´</p><p>è¿™ä¸ªå®‰å…¨æ€§ æºäºå“ªé‡Œ</p><p>ä»–æ˜¯æ²¡æœ‰ä¸­é—´ç«™çš„</p><p>åªè¦èµ°äº† å°±æ˜¯ç›´è¾¾</p><p>æ¯æ¬¡ å‰æœŸ è¿™ä¸ªå¿ƒé‡Œå•Š å°±æ„Ÿè§‰</p><p>emmmmmmmmm</p><p>å¿å¿‘</p><p>æ˜¯å› ä¸ºè¿™æ˜¯å¯Œäººçš„å·¥å…·å—</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ© é£æœº&lt;/p&gt;
&lt;p&gt;åé£æœº&lt;/p&gt;
&lt;p&gt;ä½ è¯´&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå®‰å…¨æ€§ æºäºå“ªé‡Œ&lt;/p&gt;
&lt;p&gt;ä»–æ˜¯æ²¡æœ‰ä¸­é—´ç«™çš„&lt;/p&gt;
&lt;p&gt;åªè¦èµ°äº† å°±æ˜¯ç›´è¾¾&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡ å‰æœŸ è¿™ä¸ªå¿ƒé‡Œå•Š å°±æ„Ÿè§‰&lt;/p&gt;
&lt;p&gt;emmmmmmmmm&lt;/p&gt;
&lt;p&gt;å¿å¿‘&lt;/p&gt;
&lt;p&gt;æ˜¯å› </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>starbucks</title>
    <link href="https://puzzle9.github.io/posts/d6910c5f/"/>
    <id>https://puzzle9.github.io/posts/d6910c5f/</id>
    <published>2023-09-08T11:29:39.000Z</published>
    <updated>2025-05-11T06:12:58.228Z</updated>
    
    <content type="html"><![CDATA[<p>å‘€ <code>ç‡•éº¦ä¸ç»’æ‹¿é“</code> æœ‰ç‚¹ç”œ</p><p>å†è€… <code>è¶…å¤§çš„é©¬å…‹æ¯</code> ä¸æ˜¯æ¯ä¸ªåº—éƒ½æœ‰çš„</p><p>å¹³æ—¶ å¥½åƒæƒ³è¦å»æ¶ˆç£¨æ—¶é—´ éƒ½ä¼šå»å“ªé‡Œ</p><p>å¬å¬é‚£å¥½åƒæ¯ä¸ªäººéƒ½æœ‰åˆ†äº«çš„äº‹æƒ…</p><p>å¯¹äº† ä»–ä»¬ä¸èµ¶äººçš„</p><p>ä¸è¿‡ ä»–ä»¬å®¶ç¥å¥‡çš„æ˜¯</p><p>æ¯ä¸ªä¸åŒè§„åˆ™çš„æ¯å­çš„è§„åˆ™å·®<code>3å…ƒ</code></p><p>å¯æ˜¯ è¶…å¤§æ¯ ä¹Ÿå°±åŒºåŒº <code>591ml</code></p><p>å¥½åƒå¿«åˆ°æ™®é€š<code>è„‰åŠ¨</code>çš„å®¹é‡äº†</p><p>æˆ‘å˜›</p><p>ä¸€ä¸ª<code>ä¸­æ¯å…‘æ¢åˆ¸</code></p><p>å† <code>+6ï¿¥</code> å‡ä¸ª <code>è¶…å¤§æ¯</code></p><p><code>å’£å’£å’£</code> çš„åœ¨<code>5åˆ†é’Ÿ</code>å–å®Œ</p><p>è¶ç€æ¯å­çš„ä½™çƒ­</p><p>å†å»å‰å°åŠ ä¸Šé‚£ä¹ˆ<code>ä¸¤ä¸‰æ¯</code>çš„æ¸©å¼€æ°´</p><p>å¼€å§‹æƒ³ç€ å¦‚ä½•åº¦è¿‡è¿™</p><p>äººå‡ <code>40+</code> çš„ <code>ç¬¬ä¸‰æ–¹ç©ºé—´</code></p><p>å¥½åƒ æ—¶é—´æ¯”è¾ƒå……è¶³çš„æ—¶å€™</p><p>å»å¸¦ç€ç”µè„‘</p><p>è®°å½•ä¸‹è‡ªå·±è„‘ç“œä¸­é‚£è¿˜æ²¡è¢«æ‰¼æ€åœ¨æ‘‡ç¯®ä¸­çš„<code>project</code></p><p>åˆæˆ–è€…</p><p>å¯èƒ½å› ä¸º<code>åˆ¸</code>å—è¿‡æœŸäº†</p><p>è€Œä¸å¿å¿ƒè®©ä»–ç™½ç™½è¿‡æœŸ</p><p>ä¾¿åŒ†åŒ†çš„é€‰ä¸Šä¸€æ¯</p><p>æ© ä¸èˆå¾—å¸¦èµ°</p><p>è¿˜æ˜¯ä¾æ—§é‚£æ · <code>å’£çš„å’£å®Œ</code></p><p>ç„¶å ç¦»å¼€</p><p>è¦è¯´è¿™ä¸ªå–çš„æ„Ÿè§‰å§</p><p>æ© å¥½åƒä¹Ÿå–ä¸å‡ºæ¥åŒºåˆ«</p><p>ä»–æ‰‹å·¥è°ƒåˆ¶çš„å°±é‚£ä¹ˆä¸åˆ° <code>10</code>ç§</p><p>æ© æˆ‘è§‰å¾—æ…¢æ…¢çš„å–å®Œ</p><p>åº”è¯¥å°±æ™“å¾—åŒºåˆ«äº†</p><p>è®°å¾—æœ‰ä¸€æ¬¡</p><p>ç‚¹äº† <code>çƒ­æ‹¿é“</code></p><p>ä½ åˆ«è¯´ é‚£æ„Ÿè§‰çœŸçš„ å¥½åƒå¾ˆè‹¦</p><p>ä¸è¿‡ä¸ºä»€ä¹ˆé€‰çƒ­è€Œéæ‹›ç‰Œçš„å†°å‘¢</p><p>è¯´èµ·æ¥</p><p>å¥½åƒæ˜¯å¯¹å†°çš„ æ© ä¸èƒ½åƒå†°çš„å‘¢</p><p>å•Š è¿™æ—¶å€™</p><p>æˆ‘å·²ç»å–å®Œäº†ä¸€æ¯æ¸©å¼€æ°´</p><p>æˆ‘è§‰å¾— æˆ‘å¥½åƒç»“æŸäº†</p><p>å¯èƒ½ é‚£æ¯æœ‰ç‚¹ç”œçš„ <code>ç‡•éº¦ä¸ç»’æ‹¿é“</code> å–å¿«äº†å§</p><p>å“¦å¯¹ è¿˜æœ‰é‚£ä¸ª <code>é¦¥èŠ®ç™½ fÃ¹ ruÃ¬ bÃ¡i</code> æˆ‘åˆè¿˜ç»™è¯­æ–‡è€å¸ˆäº†</p><h1 id="231009"><a href="#231009" class="headerlink" title="231009"></a>231009</h1><p>å¦‚æœæ‰“ç¢äº†ä¸€ä¸ªæ¯å­æ€ä¹ˆåŠ</p><p>è¿™ç§å—</p><p>æ˜¯çš„</p><p>é‚£é¦–å…ˆå…³å¿ƒçš„æ˜¯ä½ æœ‰æ²¡æœ‰å—ä¼¤ å…¶æ¬¡ æ˜¯ä¸ç”¨èµ”çš„</p>]]></content>
    
    
    <summary type="html">æ© é‚£ä¸ªç¬¬ä¸‰æ–¹ç©ºé—´é¥®æ–™è€è´µçš„é‚£ä¸ª</summary>
    
    
    
    
  </entry>
  
</feed>
